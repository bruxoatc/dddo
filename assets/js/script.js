var K=Object.defineProperty;var J=Object.getOwnPropertySymbols;var ce=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable;var G=(e,t,i)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,N=(e,t)=>{for(var i in t||(t={}))ce.call(t,i)&&G(e,i,t[i]);if(J)for(var i of J(t))le.call(t,i)&&G(e,i,t[i]);return e};var de=(e,t)=>()=>(e&&(t=e(e=0)),t);var ue=(e,t)=>{for(var i in t)K(e,i,{get:t[i],enumerable:!0})};var Y={};ue(Y,{initAccountSuite:()=>me});function me({AppState:e,Utils:t,Modal:i},s={}){let c={autoShowAuth:s.autoShowAuth!==void 0?s.autoShowAuth:!0,persistAuthOnLogin:s.persistAuthOnLogin===!0,profilePortalUrl:typeof s.profilePortalUrl=="string"&&s.profilePortalUrl.trim()?s.profilePortalUrl.trim():null,profilePortalTarget:s.profilePortalTarget==="_self"?"_self":"_blank"};function m(){if(!c.profilePortalUrl)return!1;if(c.profilePortalTarget==="_self")return window.location.href=c.profilePortalUrl,!0;let a=window.open(c.profilePortalUrl,"_blank");return a?(a.opener=null,!0):!1}let h={window:null,body:null,form:null,input:null,closeBtn:null,openBtn:null,isOpen:!1,hasWelcomed:!1,init(){this.window=document.getElementById("chatWindow"),this.body=document.getElementById("chatBody"),this.form=document.getElementById("chatForm"),this.input=document.getElementById("chatMessage"),this.closeBtn=document.getElementById("chatCloseBtn"),this.openBtn=document.getElementById("supportChatBtn"),!(!this.window||!this.body)&&(this.form&&this.form.addEventListener("submit",a=>{a.preventDefault(),this.sendMessage()}),this.closeBtn&&this.closeBtn.addEventListener("click",()=>this.close()),this.openBtn&&(this.openBtn.setAttribute("aria-expanded","false"),this.openBtn.addEventListener("click",()=>this.toggle())),this.window.setAttribute("aria-hidden","true"),this.ensureGreeting())},ensureGreeting(){this.hasWelcomed||(this.appendMessage("bot","Ol\xE1! Sou da equipe Amex Store. Como posso ajudar voc\xEA hoje?"),this.hasWelcomed=!0)},open(){this.window&&(this.window.classList.add("active"),this.window.setAttribute("aria-hidden","false"),this.isOpen=!0,this.openBtn&&(this.openBtn.classList.add("open"),this.openBtn.setAttribute("aria-expanded","true"),this.openBtn.setAttribute("aria-label","Fechar chat de suporte ao vivo")),this.ensureGreeting(),this.input&&requestAnimationFrame(()=>this.input.focus()),this.scrollToBottom())},close(){this.window&&(this.window.classList.remove("active"),this.window.setAttribute("aria-hidden","true"),this.isOpen=!1,this.openBtn&&(this.openBtn.classList.remove("open"),this.openBtn.setAttribute("aria-expanded","false"),this.openBtn.setAttribute("aria-label","Abrir chat de suporte ao vivo")),this.input&&this.input.blur())},toggle(){this.isOpen?this.close():this.open()},appendMessage(a,o){if(!this.body)return;let r=document.createElement("div");r.className=`chat-message ${a}`;let n=document.createElement("span");n.textContent=o,r.appendChild(n),this.body.appendChild(r),this.scrollToBottom()},generateReply(a){let o=a.toLowerCase();return o.includes("prazo")||o.includes("entrega")?"Os produtos digitais s\xE3o liberados automaticamente ap\xF3s a confirma\xE7\xE3o do pagamento. Se tiver algum atraso, me envie o comprovante.":o.includes("garantia")||o.includes("reembolso")?"Oferecemos garantia imediata durante o processo de entrega. Assim que receber seus dados, teste e fale conosco se notar algo fora do esperado.":o.includes("pagamento")||o.includes("pix")?"Aceitamos Pix e alguns cart\xF5es via parceiros. Ap\xF3s pagar, envie o comprovante para agilizar a ativa\xE7\xE3o.":o.includes("contato")||o.includes("whatsapp")||o.includes("discord")?"Pode chamar a gente pelo WhatsApp (16) 99276-4211 ou Discord 9797x. Estamos online na maior parte do dia.":"Entendi! Se precisar de algo espec\xEDfico, me conte com detalhes e eu te direciono para o melhor caminho."},sendMessage(){if(!this.input)return;let a=this.input.value.trim();a&&(this.appendMessage("user",a),this.input.value="",setTimeout(()=>{this.appendMessage("bot",this.generateReply(a))},600))},scrollToBottom(){this.body&&(this.body.scrollTop=this.body.scrollHeight)}},p={button:null,label:null,avatar:null,modal:null,closeBtn:null,form:null,nameInput:null,emailInput:null,passwordInput:null,summaryName:null,summaryEmail:null,summaryAvatar:null,logoutBtn:null,avatarInput:null,avatarTrigger:null,avatarReset:null,historyList:null,historyEmpty:null,historyRefresh:null,init(){this.button=document.getElementById("profileBtn"),this.label=this.button?this.button.querySelector(".profile-label"):null,this.avatar=this.button?this.button.querySelector(".profile-avatar"):null,this.modal=document.getElementById("profileModal"),this.closeBtn=document.getElementById("closeProfileModal"),this.form=document.getElementById("profileForm"),this.nameInput=document.getElementById("profileName"),this.emailInput=document.getElementById("profileEmail"),this.passwordInput=document.getElementById("profilePassword"),this.summaryName=document.getElementById("profileSummaryName"),this.summaryEmail=document.getElementById("profileSummaryEmail"),this.summaryAvatar=document.getElementById("profileSummaryAvatar"),this.logoutBtn=document.getElementById("logoutBtn"),this.avatarInput=document.getElementById("profileAvatarInput"),this.avatarTrigger=document.getElementById("profileAvatarTrigger"),this.avatarReset=document.getElementById("profileAvatarReset"),this.historyList=document.getElementById("profileHistoryList"),this.historyEmpty=document.getElementById("profileHistoryEmpty"),this.historyRefresh=document.getElementById("profileHistoryRefresh"),this.button&&(c.profilePortalUrl?this.button.addEventListener("click",a=>{a.preventDefault(),m()}):this.button.addEventListener("click",()=>{if(!l.isAuthenticated()||!e.currentUser){l.show("loginForm");return}l.show("accountForm")})),this.closeBtn&&this.closeBtn.addEventListener("click",()=>{i.close("profileModal"),c.persistAuthOnLogin&&l.show("accountForm")}),this.form&&this.form.addEventListener("submit",a=>{a.preventDefault(),this.saveProfile()}),this.logoutBtn&&this.logoutBtn.addEventListener("click",()=>{i.close("profileModal"),l.logout()}),this.avatarTrigger&&this.avatarInput&&this.avatarTrigger.addEventListener("click",()=>{if(!l.isAuthenticated()||!e.currentUser){l.show("loginForm");return}this.avatarInput.click()}),this.avatarInput&&this.avatarInput.addEventListener("change",a=>{let o=a.target.files&&a.target.files[0];o&&(this.handleAvatarFile(o),a.target.value="")}),this.avatarReset&&this.avatarReset.addEventListener("click",()=>this.resetAvatar()),this.historyRefresh&&this.historyRefresh.addEventListener("click",()=>this.renderPurchases(!0)),this.updateUI(),this.renderPurchases(),this.updateAvatarControls()},populateForm(){e.currentUser&&(this.nameInput&&(this.nameInput.value=e.currentUser.name||""),this.emailInput&&(this.emailInput.value=e.currentUser.email||""),this.passwordInput&&(this.passwordInput.value=""),this.updateSummary(e.currentUser),this.updateAvatarControls(),this.renderPurchases())},openModal(){if(!l.isAuthenticated()||!e.currentUser){l.show("loginForm");return}this.populateForm(),l.hide(),i.open("profileModal")},saveProfile(){if(!e.currentUser){t.showToast("Faca login para editar o perfil.","warning");return}let a=(this.nameInput?this.nameInput.value:"").trim(),o=(this.emailInput?this.emailInput.value:"").trim().toLowerCase(),r=(this.passwordInput?this.passwordInput.value:"").trim();if(!a){t.showToast("Informe um nome valido.","warning");return}if(!o){t.showToast("Informe um e-mail valido.","warning");return}let n=e.currentUser.email;if(o!==n&&l.users.some(b=>b.email===o)){t.showToast("Este e-mail ja esta em uso.","error");return}let d=l.users.findIndex(b=>b.email===n);if(d===-1){t.showToast("Conta nao encontrada. Faca login novamente.","error"),l.logout();return}l.users[d].name=a,l.users[d].email=o,r&&(l.users[d].password=r),localStorage.setItem("amexUsers",JSON.stringify(l.users)),e.currentUser={name:a,email:o},localStorage.setItem("amexCurrentUser",JSON.stringify(e.currentUser));let y=document.getElementById("loginEmail");y&&(y.value=o),this.passwordInput&&(this.passwordInput.value=""),this.updateSummary(e.currentUser),this.updateAvatarControls(),this.renderPurchases(),this.updateUI(),l.updateAccountState(),t.showToast("Perfil atualizado com sucesso!","success")},updateSummary(a){if(!a){this.summaryName&&(this.summaryName.textContent="Visitante"),this.summaryEmail&&(this.summaryEmail.textContent="---"),this.applyAvatarToElement(this.summaryAvatar,"","?");return}this.summaryName&&(this.summaryName.textContent=a.name||"Visitante"),this.summaryEmail&&(this.summaryEmail.textContent=a.email||"---"),this.applyAvatarToElement(this.summaryAvatar,a.name,"?")},updateUI(){let a=l.isAuthenticated()&&!!e.currentUser;this.button&&this.button.classList.toggle("logged",a);let o=a&&e.currentUser?e.currentUser.name:"";this.label&&(this.label.textContent=a?this.getFirstName(o):"Entrar"),this.applyAvatarToElement(this.avatar,o,"?"),this.updateSummary(a?e.currentUser:null),this.updateAvatarControls()},updateAvatarControls(){if(this.avatarReset){let a=!!e.profileAvatar&&l.isAuthenticated()&&!!e.currentUser;this.avatarReset.disabled=!a}},handleAvatarFile(a){if(!l.isAuthenticated()||!e.currentUser){l.show("loginForm");return}let o=2*1024*1024;if(!a.type||!a.type.startsWith("image/")){t.showToast("Selecione uma imagem valida.","warning");return}if(a.size>o){t.showToast("Escolha uma imagem menor que 2MB.","warning");return}let r=new FileReader;r.onload=()=>{e.profileAvatar=r.result,t.saveToStorage(),this.updateUI(),t.showToast("Foto de perfil atualizada!","success")},r.onerror=()=>{t.showToast("Nao foi possivel carregar a imagem.","error")},r.readAsDataURL(a)},resetAvatar(){if(!l.isAuthenticated()||!e.currentUser){l.show("loginForm");return}e.profileAvatar&&(e.profileAvatar=null,t.saveToStorage(),this.updateUI(),t.showToast("Foto de perfil removida.","info"))},applyAvatarToElement(a,o="",r="?"){if(!a)return;let n=!!e.profileAvatar&&l.isAuthenticated()&&!!e.currentUser;if(a.classList.toggle("has-photo",n),n)a.style.backgroundImage="url("+e.profileAvatar+")",a.style.backgroundSize="cover",a.style.backgroundPosition="center",a.style.backgroundRepeat="no-repeat",a.style.backgroundColor="#0f1e19",a.textContent="";else{a.style.backgroundImage="",a.style.backgroundSize="",a.style.backgroundPosition="",a.style.backgroundRepeat="",a.style.backgroundColor="";let d=this.getInitial(o)||r;a.textContent=d}},renderPurchases(a=!1){if(!this.historyList||!this.historyEmpty)return;let o=l.isAuthenticated()&&!!e.currentUser,r=Array.isArray(e.purchases)?e.purchases:[];if(this.historyList.innerHTML="",!o){this.historyEmpty.textContent="Entre para visualizar suas compras.",this.historyEmpty.hidden=!1,this.historyList.hidden=!0;return}if(!r.length){this.historyEmpty.textContent="Voce ainda nao realizou nenhuma compra.",this.historyEmpty.hidden=!1,this.historyList.hidden=!0;return}this.historyEmpty.hidden=!0,this.historyList.hidden=!1,r.forEach(n=>{let d=this.getPurchaseStatus(n),y=this.formatDate(n.purchaseDate),b=n.expiresAt?this.formatDate(n.expiresAt):"Sem data de expiracao",w=document.createElement("li");w.className="profile-history-item";let T=document.createElement("div"),F=document.createElement("h5");F.textContent=n.name,T.appendChild(F);let D=document.createElement("div");D.className="profile-history-meta",[{icon:"fa-calendar-alt",text:y},{icon:"fa-stopwatch",text:n.duration||"---"},{icon:"fa-wallet",text:t.formatPrice(n.price||0)},{icon:"fa-hourglass-half",text:b}].forEach(({icon:ne,text:re})=>{let H=document.createElement("span"),V=document.createElement("i");V.className="fas "+ne,V.setAttribute("aria-hidden","true"),H.appendChild(V),H.appendChild(document.createTextNode(" "+re)),D.appendChild(H)}),T.appendChild(D);let q=document.createElement("div");q.className="profile-history-status "+d.className;let z=document.createElement("i");z.className="fas "+d.icon,z.setAttribute("aria-hidden","true");let j=document.createElement("span");j.textContent=d.label,q.append(z,j),w.append(T,q),this.historyList.appendChild(w)}),a&&t.showToast("Historico atualizado!","info")},getPurchaseStatus(a){if(!a||!a.expiresAt)return{label:"Acesso vitalicio",className:"permanent",icon:"fa-infinity"};let o=new Date(a.expiresAt);if(Number.isNaN(o.getTime()))return{label:"Validade indisponivel",className:"permanent",icon:"fa-question-circle"};let r=new Date,n=o.getTime()-r.getTime();if(n<=0){let y=Math.max(1,Math.floor(Math.abs(n)/864e5));return{label:y<=1?"Expirado":"Expirado ha "+y+" dias",className:"expired",icon:"fa-exclamation-triangle"}}let d=Math.ceil(n/(1e3*60*60*24));return d<=1?{label:"Expira em menos de 24h",className:"valid",icon:"fa-clock"}:{label:"Expira em "+d+" dias",className:"valid",icon:"fa-clock"}},formatDate(a){if(!a)return"--";try{return new Intl.DateTimeFormat("pt-BR",{dateStyle:"short",timeStyle:"short"}).format(new Date(a))}catch(o){return new Date(a).toLocaleString("pt-BR")}},getInitial(a=""){let o=a.trim();return o?o.charAt(0).toUpperCase():"?"},getFirstName(a=""){let o=a.trim();if(!o)return"Perfil";let r=o.split(/\s+/);return r.length?r[0]:o},onLogin(){this.updateUI(),this.renderPurchases(),l.updateAccountState()},onLogout(){this.modal&&i.close("profileModal"),this.passwordInput&&(this.passwordInput.value=""),this.renderPurchases(),this.updateUI(),l.updateAccountState()},onPurchaseRecorded(){this.renderPurchases(!0)}},g={element:null,closeBtn:null,message:null,dismissed:!1,init(){if(this.element=document.getElementById("onboardingTips"),!this.element)return;this.closeBtn=document.getElementById("closeOnboardingTips"),this.message=document.getElementById("onboardingMessage"),this.dismissed=localStorage.getItem("amexOnboardingDismissed")==="true",this.closeBtn&&this.closeBtn.addEventListener("click",()=>this.hide(!0)),this.element.querySelectorAll("[data-scroll-target]").forEach(o=>{let r=o.getAttribute("data-scroll-target");if(!r)return;o.addEventListener("click",d=>{d.target.closest("button")||(this.scrollTo(r),this.hide(!1))});let n=o.querySelector("button");n&&n.addEventListener("click",d=>{d.preventDefault(),d.stopPropagation(),this.scrollTo(r),this.hide(!1)})}),this.element.querySelectorAll("[data-open-support]").forEach(o=>{o.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation(),t.openSupportChannel(),this.hide(!1)});let r=o.querySelector("button");r&&r.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation(),t.openSupportChannel(),this.hide(!1)})});let a=document.getElementById("accountGuideBtn");a&&a.addEventListener("click",()=>{this.dismissed=!1,localStorage.removeItem("amexOnboardingDismissed"),l.hide(),this.show(e.currentUser?e.currentUser.name:"",{force:!0})})},show(a="",o={}){if(!this.element)return;let r=o.force===!0;if(r&&(this.dismissed=!1),!(this.dismissed&&!r)){if(this.message)if(a){let n=a.trim().split(/\s+/)[0]||a;this.message.textContent=`Oi, ${n}! Comece com uma destas sugestoes.`}else this.message.textContent="Comece com uma destas sugestoes para aproveitar melhor a loja.";this.element.removeAttribute("hidden"),this.element.classList.add("visible"),this.element.setAttribute("aria-hidden","false"),requestAnimationFrame(()=>{this.element.scrollIntoView({behavior:"smooth",block:"center"})})}},hide(a=!1){this.element&&(this.element.classList.remove("visible"),this.element.setAttribute("hidden",""),this.element.setAttribute("aria-hidden","true"),a&&(this.dismissed=!0,localStorage.setItem("amexOnboardingDismissed","true")))},scrollTo(a){if(!a)return;let o=document.querySelector(a);o&&o.scrollIntoView({behavior:"smooth",block:"start"})}},l={overlay:null,tabContainer:null,tabIndicator:null,tabs:[],forms:[],users:[],activeTabId:"loginForm",handleResize:null,accountTab:null,loginTab:null,registerTab:null,accountForm:null,accountNameEl:null,accountEmailEl:null,accountAvatarEl:null,accountProfileBtn:null,accountLogoutBtn:null,init(){if(this.overlay=document.getElementById("authOverlay"),!this.overlay)return;this.tabContainer=this.overlay.querySelector(".auth-tabs"),this.tabIndicator=this.overlay.querySelector(".auth-tab-indicator"),this.tabs=Array.from(this.overlay.querySelectorAll(".auth-tab")),this.forms=Array.from(this.overlay.querySelectorAll(".auth-form")),this.users=JSON.parse(localStorage.getItem("amexUsers")||"[]"),this.accountTab=this.overlay.querySelector(".auth-tab.account-tab"),this.loginTab=this.overlay.querySelector('.auth-tab[data-target="loginForm"]'),this.registerTab=this.overlay.querySelector('.auth-tab[data-target="registerForm"]'),this.accountForm=document.getElementById("accountForm"),this.accountNameEl=document.getElementById("accountUserName"),this.accountEmailEl=document.getElementById("accountUserEmail"),this.accountAvatarEl=document.getElementById("accountAvatar"),this.accountProfileBtn=document.getElementById("accountProfileBtn"),this.accountLogoutBtn=document.getElementById("accountLogoutBtn"),this.activeTabId="loginForm",this.tabContainer&&this.tabContainer.setAttribute("data-tab-count","2"),this.handleResize&&window.removeEventListener("resize",this.handleResize),this.handleResize=()=>this.moveIndicatorTo(this.activeTabId),window.addEventListener("resize",this.handleResize),this.bindTabEvents(),this.bindFormEvents(),this.bindPasswordToggle(),this.bindAccountActions(),this.updateAccountState(),this.isAuthenticated()&&!!e.currentUser?(p.onLogin(),this.activate("accountForm"),c.persistAuthOnLogin?this.show("accountForm"):this.hide()):(p.onLogout(),this.activate("loginForm"),c.autoShowAuth||c.persistAuthOnLogin?this.show("loginForm"):this.hide())},bindTabEvents(){this.tabs.forEach(a=>{a.addEventListener("click",()=>{let o=a.dataset.target;if(o==="accountForm"&&!this.isAuthenticated()){this.activate("loginForm");return}this.activate(o)})}),this.overlay.querySelectorAll(".auth-switch a").forEach(a=>{a.addEventListener("click",o=>{o.preventDefault();let r=a.dataset.target;r&&this.activate(r)})})},moveIndicatorTo(a){if(!this.tabIndicator||!this.tabContainer)return;let o=a||this.activeTabId||"loginForm",r=this.tabContainer.querySelector(`.auth-tab[data-target="${o}"]`);if(!r||r.offsetParent===null){this.tabIndicator.style.opacity="0";return}window.requestAnimationFrame(()=>{let{offsetLeft:n,offsetWidth:d}=r;this.tabIndicator.style.opacity="1",this.tabIndicator.style.transform=`translateX(${n}px)`,this.tabIndicator.style.width=`${d}px`})},bindPasswordToggle(){this.overlay.querySelectorAll(".toggle-password").forEach(a=>{a.addEventListener("click",()=>{let o=document.getElementById(a.dataset.target);if(!o)return;let r=o.type==="password";o.type=r?"text":"password",a.innerHTML=r?'<i class="fas fa-eye-slash"></i>':'<i class="fas fa-eye"></i>'})})},bindAccountActions(){this.accountProfileBtn&&this.accountProfileBtn.addEventListener("click",a=>{if(c.profilePortalUrl){a.preventDefault(),m();return}p.openModal()}),this.accountLogoutBtn&&this.accountLogoutBtn.addEventListener("click",()=>{this.logout()})},bindFormEvents(){let a=document.getElementById("loginForm"),o=document.getElementById("registerForm");a&&a.addEventListener("submit",r=>{r.preventDefault();let n=a.querySelector("#loginEmail").value.trim().toLowerCase(),d=a.querySelector("#loginPassword").value,y=this.users.find(b=>b.email===n&&b.password===d);if(!y){t.showToast("Credenciais invalidas. Verifique e tente novamente.","error");return}localStorage.setItem("amexAuth","true"),e.currentUser={name:y.name,email:y.email},localStorage.setItem("amexCurrentUser",JSON.stringify(e.currentUser)),p.onLogin(),a.reset(),c.persistAuthOnLogin?(this.activate("accountForm"),this.show("accountForm")):this.hide(),setTimeout(()=>{t.showWelcomeToast(y.name),sessionStorage.getItem("amexPendingOnboardingName")?(g.show(y.name,{force:!0}),sessionStorage.removeItem("amexPendingOnboardingName")):g.show(y.name)},200)}),o&&o.addEventListener("submit",r=>{r.preventDefault();let n=o.querySelector("#registerName").value.trim();if(!n){t.showToast("Informe um nome de usuario valido.","warning");return}let d=o.querySelector("#registerEmail").value.trim().toLowerCase(),y=o.querySelector("#registerPassword").value;if(y.length<6){t.showToast("A senha deve ter pelo menos 6 caracteres.","warning");return}if(this.users.some(F=>F.email===d)){t.showToast("Ja existe uma conta com este e-mail.","error"),this.activate("loginForm");return}let b={name:n,email:d,password:y};this.users.push(b),localStorage.setItem("amexUsers",JSON.stringify(this.users)),sessionStorage.setItem("amexPendingOnboardingName",n),localStorage.removeItem("amexOnboardingDismissed"),t.showToast("Cadastro realizado com sucesso, "+n+"! Agora faca login.","success"),o.reset(),this.activate("loginForm");let w=document.getElementById("loginEmail");w&&(w.value=d,w.focus());let T=document.getElementById("loginPassword");T&&(T.value="")})},activate(a="loginForm"){let o=this.isAuthenticated()&&!!e.currentUser;a==="accountForm"&&!o&&(a="loginForm"),o&&(a==="loginForm"||a==="registerForm")&&(a="accountForm"),this.activeTabId=a,this.forms.forEach(r=>{let n=r.id===a;r.classList.toggle("active",n),r.toggleAttribute("hidden",!n),r.setAttribute("aria-hidden",n?"false":"true")}),this.tabs.forEach(r=>{let n=r.dataset.target===a;r.classList.toggle("active",n),r.setAttribute("aria-selected",n?"true":"false"),r.setAttribute("tabindex",n?"0":"-1")}),this.moveIndicatorTo(a)},show(a="loginForm"){let o=this.isAuthenticated()&&!!e.currentUser;a==="accountForm"&&!o&&(a="loginForm"),o&&(a==="loginForm"||a==="registerForm")&&(a="accountForm"),this.updateAccountState(),this.updateCloseButton(),this.activate(a),document.body.classList.contains("account-standalone")?document.body.classList.remove("auth-locked"):document.body.classList.add("auth-locked"),this.overlay.classList.add("active")},hide(){document.body.classList.remove("auth-locked"),this.overlay.classList.remove("active")},logout(){localStorage.removeItem("amexAuth"),localStorage.removeItem("amexCurrentUser"),e.currentUser=null,p.onLogout(),this.show("loginForm"),t.showToast("Sessao encerrada. Faca login para continuar.","info")},updateCloseButton(){let a=document.getElementById("authModalClose");if(!a)return;let o=this.isAuthenticated()&&!!e.currentUser;a.classList.toggle("visible",o),a.setAttribute("aria-hidden",o?"false":"true"),a.removeEventListener("click",this.handleCloseClick),o&&a.addEventListener("click",this.handleCloseClick)},handleCloseClick:()=>{l.hide()},updateAccountState(){let a=this.isAuthenticated()&&!!e.currentUser;if(this.accountTab&&(this.accountTab.classList.toggle("visible",a),this.accountTab.setAttribute("aria-hidden",a?"false":"true"),this.accountTab.toggleAttribute("disabled",!a),this.accountTab.toggleAttribute("hidden",!a),this.accountTab.setAttribute("tabindex",a&&this.accountTab.classList.contains("active")?"0":"-1"),a||this.accountTab.blur()),this.loginTab&&(this.loginTab.classList.toggle("hidden",a),this.loginTab.setAttribute("aria-hidden",a?"true":"false"),this.loginTab.toggleAttribute("hidden",a)),this.registerTab&&(this.registerTab.classList.toggle("hidden",a),this.registerTab.setAttribute("aria-hidden",a?"true":"false"),this.registerTab.toggleAttribute("hidden",a)),this.tabContainer&&this.tabContainer.setAttribute("data-tab-count",a?"3":"2"),this.accountForm&&(this.accountForm.classList.toggle("available",a),this.accountForm.setAttribute("aria-hidden",a?"false":"true"),this.accountForm.toggleAttribute("hidden",!a),!a&&this.accountForm.classList.contains("active")&&this.activate("loginForm")),this.accountNameEl&&(this.accountNameEl.textContent=a&&e.currentUser?e.currentUser.name:"Visitante"),this.accountEmailEl&&(this.accountEmailEl.textContent=a&&e.currentUser?e.currentUser.email:"---"),this.accountAvatarEl){let o=a&&e.currentUser?e.currentUser.name:"",r=o?o.trim().charAt(0).toUpperCase():"?";this.accountAvatarEl.textContent=r||"?"}this.updateCloseButton(),this.moveIndicatorTo(this.activeTabId)},isAuthenticated(){return localStorage.getItem("amexAuth")==="true"}},v=!1;function E(){v||(v=!0,h.init(),g.init(),p.init(),l.init())}return{ChatWidget:h,Profile:p,Auth:l,Onboarding:g,initialize:E,isInitialized:()=>v}}var X=de(()=>{});console.log("Amex Store carregada com sucesso!");console.log("Dica: Tente o c\xF3digo Konami para uma surpresa especial!");var f={cart:JSON.parse(localStorage.getItem("amexCart"))||[],favorites:JSON.parse(localStorage.getItem("amexFavorites"))||[],theme:localStorage.getItem("amexTheme")||"light",currentUser:JSON.parse(localStorage.getItem("amexCurrentUser"))||null,purchases:JSON.parse(localStorage.getItem("amexPurchases")||"[]"),profileAvatar:localStorage.getItem("amexProfileAvatar")||null,coupons:{DESCONTO10:{discount:.1,description:"10% de desconto"},WELCOME:{discount:.15,description:"15% de desconto para novos clientes"},AMEX2024:{discount:.2,description:"20% de desconto especial"}},appliedCoupon:null},k={cards:[],cardMap:new Map},ee={buildSources(e){if(!e||typeof e!="string")return null;let t=e.replace(/\.[^/.]+$/,"");return{avif:encodeURI(`${t}.avif`),webp:encodeURI(`${t}.webp`),fallback:encodeURI(e)}}},he={parse(e){if(!e||e==="all")return{min:0,max:1/0};if(/\+$/.test(e)){let c=parseFloat(e.replace("+",""));return{min:Number.isFinite(c)?c:0,max:1/0}}let t=e.split("-").map(c=>parseFloat(c)),i=Number.isFinite(t[0])?t[0]:0,s=Number.isFinite(t[1])?t[1]:1/0;return{min:i,max:s}}},pe={deferredPrompt:null,container:null,installButton:null,dismissButton:null,storageKey:"amexInstallDismissed",init(){if(typeof window=="undefined"||(this.container=document.getElementById("installPrompt"),!this.container))return;let e=!1;try{e=localStorage.getItem(this.storageKey)==="true"}catch(t){console.warn("N\xE3o foi poss\xEDvel ler a prefer\xEAncia de instala\xE7\xE3o.",t)}e||(this.installButton=document.getElementById("installPromptAccept"),this.dismissButton=document.getElementById("installPromptDismiss"),window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),this.deferredPrompt=t,this.show()}),window.addEventListener("appinstalled",()=>{this.hide(!0),this.deferredPrompt=null}),this.installButton&&this.installButton.addEventListener("click",()=>this.install()),this.dismissButton&&this.dismissButton.addEventListener("click",()=>this.hide(!0)))},show(){this.container&&(this.container.hidden=!1,this.container.classList.add("visible"))},hide(e=!1){if(this.container&&(this.container.classList.remove("visible"),this.container.hidden=!0),e)try{localStorage.setItem(this.storageKey,"true")}catch(t){console.warn("N\xE3o foi poss\xEDvel salvar a prefer\xEAncia de instala\xE7\xE3o.",t)}},async install(){if(!this.deferredPrompt){this.hide();return}this.installButton&&(this.installButton.disabled=!0);try{this.deferredPrompt.prompt(),(await this.deferredPrompt.userChoice).outcome==="accepted"?(u.showToast("Instala\xE7\xE3o iniciada. Obrigado!","success"),this.hide(!0)):(u.showToast("Tudo bem! Voc\xEA pode instalar mais tarde.","info"),this.hide(!1))}catch(e){console.warn("Falha ao iniciar instala\xE7\xE3o PWA.",e),u.showToast("N\xE3o foi poss\xEDvel iniciar a instala\xE7\xE3o agora.","error"),this.hide(!1)}finally{this.installButton&&(this.installButton.disabled=!1),this.deferredPrompt=null}}},R=typeof document!="undefined"?document.getElementById("profileBtn"):null,te=R&&R.dataset.profileUrl||null,ae=R&&R.dataset.profileTarget||"_blank",C=[{id:1,name:"VALORANT AIM COLOR",description:"Vers\xE3o otimizada, super leve e f\xE1cil de usar",prices:[{duration:"1 Dia",price:20,stock:15,paymentUrl:"https://pag.ae/7_RdWGnKn"},{duration:"7 Dias",price:75,stock:6,paymentUrl:"https://pag.ae/7_RdWwvTH"},{duration:"30 Dias",price:150,stock:10,paymentUrl:"https://pag.ae/7_RdW5LS2"},{duration:"Lifetime",price:375,stock:5,paymentUrl:"https://pag.ae/7_RdVct7H"}],category:"valorant",featured:!0,inStock:!0,image:"Pngs/valorant aim color.png",rating:4.9,reviews:234,price:20},{id:2,name:"VALORANT BYPASS",description:"Corrija de forma r\xE1pida e pr\xE1tica os erros do Valorant relacionados ao TPM, Secure Boot e HVCI!",prices:[{duration:"1 Dia",price:17,stock:6,paymentUrl:"https://pag.ae/7_RdXuVGa"},{duration:"7 Dias",price:55,stock:10,paymentUrl:"https://pag.ae/7_RdXh6B2"},{duration:"30 Dias",price:80,stock:10,paymentUrl:"https://pag.ae/7_RdX3rps"}],category:"valorant",featured:!1,inStock:!0,image:"Pngs/VALORANT BYPASS.png",rating:4.8,reviews:187,price:17},{id:3,name:"VALORANT NFA",description:"Contas NFA verificadas e revisadas manualmente",prices:[{duration:"Random 1-10 Skins",price:7,stock:15,paymentUrl:"https://pag.ae/7_RqrwrsN"},{duration:"Random 11-20 Skins",price:13,stock:27,paymentUrl:"https://pag.ae/7_RqrRuHH"},{duration:"Random 21-30 Skins",price:17,stock:11,paymentUrl:"https://pag.ae/7_Rqs5Yba"},{duration:"Random 31-40 Skins",price:25,stock:0,paymentUrl:null},{duration:"Random 41-50 Skins",price:30,stock:2,paymentUrl:"https://pag.ae/7_RqsMzTR"},{duration:"Random 51-80 Skins",price:35,stock:2,paymentUrl:"https://pag.ae/7_RqtiT9s"},{duration:"Random 81-100 Skins",price:40,stock:0,paymentUrl:null},{duration:"Random 100-150 Skins",price:45,stock:1,paymentUrl:"https://pag.ae/7_RqtNSm9"},{duration:"Random 150-200 Skins",price:60,stock:0,paymentUrl:null},{duration:"200+ Skins",price:75,stock:0,paymentUrl:null}],category:"valorant",featured:!1,inStock:!0,image:"Pngs/VALORANT NFA.png",rating:4.7,reviews:412,price:7},{id:4,name:"LEAGUEOF",description:"Ferramentas avan\xE7adas para League of Legends",prices:[{duration:"7 Dias",price:75,stock:1/0,paymentUrl:"https://pag.ae/7_RWGq_B9"},{duration:"30 Dias",price:100,stock:1/0,paymentUrl:"https://pag.ae/7_RWGUnHP"}],category:"league",featured:!1,inStock:!0,image:"Pngs/LEAGUEOFMENU.png",rating:4.6,reviews:158,price:75},{id:5,name:"VALORANT NFA ALEAT\xD3RIA",description:"Conta Valorant NFA com conte\xFAdo aleat\xF3rio",prices:[{duration:"Conta Aleat\xF3ria",price:5,stock:175,paymentUrl:"https://pag.ae/7_RWNVFNP"}],category:"valorant",featured:!1,inStock:!0,image:"Pngs/VAVAALE.png",rating:4.5,reviews:289,price:5}],P=new Map(C.map(e=>[e.id,e]));function W(){let e=Array.from(document.querySelectorAll(".product-card"));k.cards=e,k.cardMap.clear(),e.forEach(t=>{let i=parseInt(t.dataset.productId,10),s=P.get(i);if(!s)return;k.cardMap.set(i,{card:t,product:s}),t.dataset.searchText=`${s.name} ${s.description} ${s.category}`.toLowerCase(),t.dataset.category=s.category||"uncategorized";let c=typeof s.price=="number"?s.price:Array.isArray(s.prices)&&s.prices.length?s.prices[0].price:0,m=s.inStock===!1?!1:Array.isArray(s.prices)?s.prices.some(h=>typeof h.stock!="number"||h.stock>0):!0;t.dataset.price=Number.isFinite(c)?String(c):"",t.dataset.stock=m?"available":"out"})}function $(){k.cards.length===0&&W()}var u={formatPrice:e=>`R$ ${e.toFixed(2).replace(".",",")}`,openSupportChannel:()=>{let e=()=>{console.warn("ChatWidget indisponivel, usando fallback para WhatsApp."),window.open("https://wa.me/5516992764211?text=Ola%2C%20preciso%20de%20ajuda%20com%20minha%20compra.","_blank")};ie().then(t=>{try{t.initialize(),t.ChatWidget&&typeof t.ChatWidget.open=="function"?t.ChatWidget.open():e()}catch(i){console.warn("Falha ao abrir ChatWidget, usando fallback.",i),e()}}).catch(t=>{console.warn("Nao foi possivel carregar modulo de suporte.",t),e()})},showToast:(e,t="info")=>{let i=document.createElement("div");i.className=`toast ${t}`,i.innerHTML=`
            <i class="toast-icon fas ${t==="success"?"fa-check-circle":t==="error"?"fa-exclamation-circle":t==="warning"?"fa-exclamation-triangle":"fa-info-circle"}"></i>
            <span class="toast-message">${e}</span>
            <button class="toast-close">&times;</button>
        `;let s=document.getElementById("toastContainer");if(s){for(;s.children.length>=4;)s.removeChild(s.firstElementChild);s.appendChild(i),setTimeout(()=>{i.parentNode&&i.remove()},5e3),i.querySelector(".toast-close").addEventListener("click",()=>{i.remove()})}},showWelcomeToast:(e="")=>{let t=document.getElementById("toastContainer");if(!t)return;for(;t.children.length>=4;)t.removeChild(t.firstElementChild);let i=document.createElement("div");i.className="toast success welcome-toast";let s=document.createElement("div");s.className="toast-main";let c=document.createElement("i");c.className="toast-icon fas fa-hand-peace";let m=document.createElement("span");m.className="toast-message";let h=e.trim().split(/\s+/)[0]||"amigo";m.innerHTML=`<strong>Que bom te ver, ${h}!</strong><small>Escolha um atalho para continuar agora mesmo.</small>`;let p=document.createElement("button");p.className="toast-close",p.setAttribute("aria-label","Fechar notificacao"),p.innerHTML="&times;",s.append(c,m);let g=document.createElement("div");g.className="toast-actions";let l=document.createElement("button");l.className="toast-action primary",l.innerHTML='<i class="fas fa-star"></i> Produtos';let v=document.createElement("button");v.className="toast-action secondary",v.innerHTML='<i class="fas fa-shopping-cart"></i> Carrinho',g.append(l,v),i.append(s,g,p),t.appendChild(i);let E=()=>{i.parentNode&&i.remove()};p.addEventListener("click",E),l.addEventListener("click",()=>{let a=document.getElementById("produtos");a&&a.scrollIntoView({behavior:"smooth",block:"start"}),E()}),v.addEventListener("click",()=>{document.getElementById("cartModal")?B.open("cartModal"):u.showToast("Carrinho em breve!","info"),E()}),setTimeout(E,8e3)},showLoading:(e=!0)=>{let t=document.getElementById("loadingOverlay");t&&(e?t.classList.add("active"):t.classList.remove("active"))},saveToStorage:()=>{localStorage.setItem("amexCart",JSON.stringify(f.cart)),localStorage.setItem("amexFavorites",JSON.stringify(f.favorites)),localStorage.setItem("amexTheme",f.theme),localStorage.setItem("amexPurchases",JSON.stringify(f.purchases||[])),f.profileAvatar?localStorage.setItem("amexProfileAvatar",f.profileAvatar):localStorage.removeItem("amexProfileAvatar")},showConfirmModal:(e,t,i,s,c,m)=>{let h=document.getElementById("confirmModal");h&&h.remove();let p=document.createElement("div");p.id="confirmModal",p.className="modal confirm-modal active",p.innerHTML=`
            <div class="modal-content confirm-modal-content">
                <div class="confirm-header">
                    <i class="fas fa-exclamation-triangle warning-icon"></i>
                    <h3>${e}</h3>
                </div>
                
                <div class="confirm-body">
                    <p class="confirm-message">${t}</p>
                    
                    <div class="contact-list">
                        ${i.map(l=>`
                            <div class="contact-item">
                                <i class="${l.icon}" style="color: ${l.color}"></i>
                                <span>${l.text}</span>
                            </div>
                        `).join("")}
                    </div>
                    
                    <div class="warning-message">
                        <i class="fas fa-exclamation-circle"></i>
                        <strong>${s}</strong>
                    </div>
                    
                    <p class="confirm-question">Deseja continuar com a compra?</p>
                </div>
                
                <div class="confirm-actions">
                    <button class="btn-cancel" id="confirmCancel">
                        <i class="fas fa-times"></i>
                        Cancelar
                    </button>
                    <button class="btn-confirm" id="confirmOk">
                        <i class="fas fa-check"></i>
                        Continuar
                    </button>
                </div>
            </div>
        `,document.body.appendChild(p),document.getElementById("confirmOk").addEventListener("click",()=>{p.remove(),c()}),document.getElementById("confirmCancel").addEventListener("click",()=>{p.remove(),m()}),p.addEventListener("click",l=>{l.target===p&&(p.remove(),m())});let g=l=>{l.key==="Escape"&&(p.remove(),m(),document.removeEventListener("keydown",g))};document.addEventListener("keydown",g)}},U=null,Q={autoShowAuth:!0,persistAuthOnLogin:!1,profilePortalUrl:te,profilePortalTarget:ae},fe=typeof window!="undefined"&&window.AmexAccountConfig?N(N({},Q),window.AmexAccountConfig):Q;function ie(){return U||(U=Promise.resolve().then(()=>(X(),Y)).then(({initAccountSuite:e})=>e({AppState:f,Utils:u,Modal:B},fe)).catch(e=>{throw U=null,e})),U}var A={add:(e,t=null)=>{let i=P.get(e);if(!i||!i.inStock){u.showToast("Produto indispon\xEDvel","error");return}let s=t;!s&&i.prices&&i.prices.length>0&&(s=i.prices[0]);let c=`${e}-${s?s.duration:"default"}`;if(f.cart.find(h=>h.key===c)){u.showToast("Produto j\xE1 est\xE1 no carrinho","warning");return}f.cart.push({id:i.id,key:c,name:i.name,duration:s?s.duration:null,price:s?s.price:i.price||0,quantity:1}),A.updateUI(),u.saveToStorage(),u.showToast("Produto adicionado ao carrinho!","success")},remove:e=>{f.cart=f.cart.filter(t=>t.id!==e),A.updateUI(),u.saveToStorage(),u.showToast("Produto removido do carrinho","info")},clear:()=>{f.cart=[],f.appliedCoupon=null,A.updateUI(),u.saveToStorage(),u.showToast("Carrinho limpo","info")},updateUI:()=>{let e=document.querySelector(".cart-count"),t=document.getElementById("cartItems"),i=document.getElementById("cartTotal");e&&(e.textContent=f.cart.length),t&&(f.cart.length===0?(t.innerHTML='<p class="empty-cart">Seu carrinho est\xE1 vazio</p>',i&&(i.style.display="none")):(t.innerHTML=f.cart.map(s=>`
                    <div class="cart-item">
                        <div class="cart-item-info">
                            <div class="cart-item-name">${s.name}</div>
                            <div class="cart-item-price">${u.formatPrice(s.price)}</div>
                        </div>
                        <button class="cart-item-remove" onclick="Cart.remove(${s.id})">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `).join(""),A.updateTotal(),i&&(i.style.display="block")))},updateTotal:()=>{let e=f.cart.reduce((p,g)=>p+g.price,0),t=0;f.appliedCoupon&&(t=e*f.appliedCoupon.discount);let i=e-t,s=document.getElementById("subtotal"),c=document.getElementById("finalTotal"),m=document.getElementById("discountLine"),h=document.getElementById("discountAmount");s&&(s.textContent=u.formatPrice(e)),c&&(c.textContent=u.formatPrice(i)),m&&h&&(t>0?(h.textContent=`-${u.formatPrice(t)}`,m.style.display="flex"):m.style.display="none")},applyCoupon:e=>{let t=f.coupons[e.toUpperCase()];if(!t){u.showToast("Cupom inv\xE1lido","error");return}if(f.cart.length===0){u.showToast("Adicione produtos ao carrinho primeiro","warning");return}f.appliedCoupon=t,A.updateTotal(),u.showToast(`Cupom aplicado: ${t.description}`,"success");let i=document.getElementById("couponInput");i&&(i.value="")}},se={toggle:e=>{let t=f.favorites.indexOf(e);t===-1?(f.favorites.push(e),u.showToast("Produto adicionado aos favoritos!","success")):(f.favorites.splice(t,1),u.showToast("Produto removido dos favoritos","info")),se.updateUI(),u.saveToStorage()},updateUI:()=>{let e=document.querySelector(".favorites-count"),t=document.getElementById("favoritesItems");if(e&&(e.textContent=f.favorites.length),t)if(f.favorites.length===0)t.innerHTML='<p class="empty-favorites">Nenhum produto favoritado</p>';else{let i=f.favorites.map(s=>P.get(s)).filter(Boolean);t.innerHTML=i.map(s=>{let c=typeof s.price=="number"?s.price:s.prices&&s.prices.length?s.prices[0].price:0;return`
                    <div class="cart-item">
                        <div class="cart-item-info">
                            <div class="cart-item-name">${s.name}</div>
                            <div class="cart-item-price">${u.formatPrice(c)}</div>
                        </div>
                        <button class="cart-item-remove" onclick="Favorites.toggle(${s.id})">
                            <i class="fas fa-heart-broken"></i>
                        </button>
                    </div>
                `}).join("")}}},I={searchTerm:"",category:"all",priceRange:"all",stock:"all"};function O(){$();let{searchTerm:e,category:t,priceRange:i,stock:s}=I;k.cards.forEach(c=>{let m=c.dataset.searchText||"",h=!e||m.includes(e),p=t==="all"||c.dataset.category===t,g=parseInt(c.dataset.productId,10),l=k.cardMap.get(g),v=l?l.product:null,E=!0;if(i!=="all"&&v){let r=typeof v.price=="number"?v.price:Array.isArray(v.prices)&&v.prices.length?v.prices[0].price:0,{min:n,max:d}=he.parse(i);E=r>=n&&r<=d}let a=!0;if(s!=="all"&&v){let r=v.inStock!==!1&&(!Array.isArray(v.prices)||v.prices.some(n=>typeof n.stock!="number"||n.stock>0));a=s==="available"?r:!r}let o=h&&p&&E&&a;c.style.display=o?"":"none"})}var ge={container:null,init(){if(this.container=document.getElementById("highlightsGrid"),!this.container)return;let e=[...C].filter(t=>typeof t.rating=="number").sort((t,i)=>i.rating===t.rating?(i.reviews||0)-(t.reviews||0):i.rating-t.rating).slice(0,3);this.container.innerHTML=e.map(t=>{let i=ee.buildSources(t.image),s=t.rating>=4.8?"Mais vendidos":"Novidade",c=(t.description||"").split(".").slice(0,1).join(".").trim(),m=typeof t.price=="number"?`R$ ${t.price.toFixed(2).replace(".",",")}`:"";return`
                <article class="highlight-card" data-product-id="${t.id}">
                    <div class="highlight-badge">${s}</div>
                    ${i?`
                        <picture>
                            <source type="image/avif" srcset="${i.avif}">
                            <source type="image/webp" srcset="${i.webp}">
                            <img src="${i.fallback}" alt="${t.name}" class="highlight-image" loading="lazy" decoding="async">
                        </picture>
                    `:""}
                    <div class="highlight-body">
                        <h3>${t.name}</h3>
                        <div class="highlight-meta">
                            <span class="highlight-rating"><i class="fas fa-star"></i> ${t.rating.toFixed(1)}</span>
                            <span class="highlight-reviews">${t.reviews||0} avalia\xE7\xF5es</span>
                        </div>
                        ${c?`<p>${c}</p>`:""}
                        <div class="highlight-footer">
                            ${m?`<span class="highlight-price">${m}</span>`:""}
                            <button type="button" class="highlight-cta" data-product-id="${t.id}">
                                Ver detalhes
                            </button>
                        </div>
                    </div>
                </article>
            `}).join(""),this.container.querySelectorAll(".highlight-card, .highlight-cta").forEach(t=>{let i=t.closest("[data-product-id]");i&&t.addEventListener("click",()=>{let s=parseInt(i.dataset.productId,10);S.focusProduct(s)})})}},L={container:null,buttons:[],init(){if(this.container=document.getElementById("categoryTabs"),!this.container)return;let e=Array.from(new Set(C.map(i=>i.category))).filter(Boolean).sort(),t=[{id:"all",label:"Todos"}].concat(e.map(i=>({id:i,label:i.charAt(0).toUpperCase()+i.slice(1)})));this.container.innerHTML=t.map(i=>`
            <button type="button" class="category-tab" data-category="${i.id}" aria-pressed="false">${i.label}</button>
        `).join(""),this.buttons=Array.from(this.container.querySelectorAll(".category-tab")),this.buttons.forEach(i=>{i.addEventListener("click",()=>{this.activate(i.dataset.category)})}),this.activate("all",{skipApply:!1})},activate(e,{skipApply:t=!1}={}){I.category=e,this.buttons.forEach(i=>{let s=i.dataset.category===e;i.classList.toggle("active",s),i.setAttribute("aria-pressed",s?"true":"false")}),M&&typeof M.syncCategory=="function"&&M.syncCategory(e),t||O()}},ve={render(){$(),k.cardMap.forEach(({card:e,product:t})=>{if(typeof t.rating!="number")return;let i=e.querySelector(".product-info");if(!i)return;let s=e.querySelector(".product-rating");if(!s){s=document.createElement("div"),s.className="product-rating";let h=i.querySelector("h3");h?h.insertAdjacentElement("afterend",s):i.insertBefore(s,i.firstChild)}let c=t.reviews||0,m=`Avalia\xE7\xE3o ${t.rating.toFixed(1)} de ${c} avalia\xE7\xF5es`;s.innerHTML=`
                <span class="rating-badge" aria-label="${m}">
                    <i class="fas fa-star"></i> ${t.rating.toFixed(1)}
                </span>
                <span class="rating-reviews">${c.toLocaleString("pt-BR")} avalia\xE7\xF5es</span>
            `})}},S={filter:(e="")=>{$();let t=e.trim().toLowerCase();I.searchTerm=t,O();let i=document.getElementById("searchResults"),s=[];if(!i)return;if(!t){i.innerHTML="",i.classList.remove("visible");return}let c=t.normalize("NFD").replace(/[\u0300-\u036f]/g,"");if(C.forEach(h=>{if(!h)return;let g=[h.name,h.category,h.description,...(h.prices||[]).map(l=>`${l.duration} ${l.price}`)].filter(Boolean).join(" ").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");g.includes(c)&&s.push({id:h.id,product:h,score:g.indexOf(c)})}),s.sort((h,p)=>{let g=(p.product.rating||0)-(h.product.rating||0);if(g!==0)return g;let l=(p.product.reviews||0)-(h.product.reviews||0);return l!==0?l:h.score-p.score}),s.length===0){i.innerHTML='<div class="search-results-empty">Nenhum produto encontrado.</div>',i.classList.add("visible");return}let m=8;i.innerHTML=s.slice(0,m).map(h=>{let{id:p,product:g}=h,l=typeof g.price=="number"?`R$ ${g.price.toFixed(2).replace(".",",")}`:"",v=ee.buildSources(g.image),E=(g.description||"").split(".").slice(0,1).join(".").trim();return`
                <button type="button" class="search-results-item" data-product-id="${p}">
                    ${v?`
                        <picture>
                            <source type="image/avif" srcset="${v.avif}">
                            <source type="image/webp" srcset="${v.webp}">
                            <img src="${v.fallback}" alt="${g.name}" class="search-result-thumb" loading="lazy" decoding="async">
                        </picture>
                    `:""}
                    <div class="item-info">
                        <span class="item-name">${g.name}</span>
                        ${E?`<span class="item-desc">${E}</span>`:""}
                    </div>
                    <span class="item-price">${l}</span>
                </button>
            `}).join(""),i.classList.add("visible"),Array.from(i.querySelectorAll(".search-results-item")).forEach(h=>{h.addEventListener("click",()=>{let p=parseInt(h.dataset.productId,10);S.focusProduct(p),i.classList.remove("visible")})})},focusProduct:e=>{L&&typeof L.activate=="function"&&L.activate("all",{skipApply:!1});let t=document.querySelector(`.product-card[data-product-id="${e}"]`);t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),t.classList.add("search-highlight"),setTimeout(()=>{t.classList.remove("search-highlight")},1600))}},M={panel:null,form:null,categorySelect:null,priceSelect:null,stockSelect:null,toggleButton:null,resetButton:null,overlay:null,activeSummary:null,activeCountLabel:null,toggleCount:null,resizeHandler:null,init(){this.panel=document.getElementById("filtersPanel"),this.form=document.getElementById("filtersForm"),this.categorySelect=document.getElementById("filterCategory"),this.priceSelect=document.getElementById("filterPrice"),this.stockSelect=document.getElementById("filterStock"),this.toggleButton=document.getElementById("filtersToggle"),this.resetButton=document.getElementById("filtersReset"),this.overlay=document.getElementById("filtersOverlay"),this.activeSummary=document.getElementById("filtersActiveSummary"),this.activeCountLabel=document.getElementById("filtersActiveCount"),this.toggleCount=document.getElementById("filtersToggleCount"),this.populateCategories(),this.form&&this.form.addEventListener("change",()=>this.apply()),this.toggleButton&&this.panel&&this.toggleButton.addEventListener("click",()=>{let e=this.panel.classList.toggle("filters-panel--open");this.toggleButton.setAttribute("aria-expanded",e?"true":"false"),this.overlay&&(this.overlay.hidden=!e),e&&typeof this.panel.focus=="function"&&this.panel.focus(),this.updatePanelA11y()}),this.overlay&&this.overlay.addEventListener("click",()=>this.close()),this.resetButton&&this.resetButton.addEventListener("click",()=>this.clear()),this.apply({skipToast:!0,skipSyncCategory:!0}),this.updateActiveSummary(),this.updatePanelA11y(),typeof window!="undefined"&&(this.resizeHandler=()=>this.updatePanelA11y(),window.addEventListener("resize",this.resizeHandler))},populateCategories(){if(!this.categorySelect)return;let e=Array.from(new Set(C.map(i=>i.category).filter(Boolean))).sort(),t=['<option value="all">Todas</option>'].concat(e.map(i=>`<option value="${i}">${i.charAt(0).toUpperCase()}${i.slice(1)}</option>`));this.categorySelect.innerHTML=t.join(""),this.categorySelect.value=I.category||"all"},apply({skipToast:e=!1,skipSyncCategory:t=!1}={}){let i=N({},I);if(this.categorySelect){let c=this.categorySelect.value||"all";I.category!==c&&(I.category=c,!t&&L&&typeof L.activate=="function"&&L.activate(c,{skipApply:!0}))}this.priceSelect&&(I.priceRange=this.priceSelect.value||"all"),this.stockSelect&&(I.stock=this.stockSelect.value||"all"),O(),this.updateActiveSummary();let s=i.category!==I.category||i.priceRange!==I.priceRange||i.stock!==I.stock;!e&&s&&u.showToast("Filtros atualizados","info"),window.matchMedia("(max-width: 1024px)").matches&&this.close(),this.updatePanelA11y()},clear(){let e=this.getActiveCount()>0;this.categorySelect&&(this.categorySelect.value="all"),this.priceSelect&&(this.priceSelect.value="all"),this.stockSelect&&(this.stockSelect.value="all"),L&&typeof L.activate=="function"&&L.activate("all",{skipApply:!0}),this.apply({skipToast:!0,skipSyncCategory:!0}),e&&u.showToast("Filtros limpos","success"),this.close()},close(){this.panel&&this.panel.classList.remove("filters-panel--open"),this.toggleButton&&this.toggleButton.setAttribute("aria-expanded","false"),this.overlay&&(this.overlay.hidden=!0),this.updatePanelA11y()},syncCategory(e){this.categorySelect&&(this.categorySelect.value=e||"all"),this.updateActiveSummary()},updateActiveSummary(){let e=this.getActiveCount();this.activeSummary&&this.activeCountLabel&&(e===0?this.activeSummary.hidden=!0:(this.activeSummary.hidden=!1,this.activeCountLabel.textContent=e===1?"1 filtro ativo":`${e} filtros ativos`)),this.toggleCount&&(e===0?this.toggleCount.hidden=!0:(this.toggleCount.hidden=!1,this.toggleCount.textContent=e))},getActiveCount(){let e=0;return I.category!=="all"&&(e+=1),I.priceRange!=="all"&&(e+=1),I.stock!=="all"&&(e+=1),e},updatePanelA11y(){if(!this.panel)return;if(typeof window=="undefined"){this.panel.setAttribute("aria-hidden","false");return}let e=window.matchMedia("(max-width: 1024px)").matches,t=this.panel.classList.contains("filters-panel--open");this.panel.setAttribute("aria-hidden",e&&!t?"true":"false"),!e&&this.overlay&&(this.overlay.hidden=!0)}},_={toggle:()=>{f.theme=f.theme==="light"?"dark":"light",_.apply(),u.saveToStorage();let e=document.querySelector("#themeToggle i");e&&(e.className=f.theme==="dark"?"fas fa-sun":"fas fa-moon"),u.showToast(`Tema ${f.theme==="dark"?"escuro":"claro"} ativado`,"success")},apply:()=>{f.theme==="dark"?document.body.classList.add("dark-theme"):document.body.classList.remove("dark-theme")}},B={open:e=>{let t=document.getElementById(e);t&&t.classList.add("active")},close:e=>{let t=document.getElementById(e);t&&t.classList.remove("active")}},ye={init:()=>{let e=document.getElementById("backToTop");if(!e)return;let t=()=>{let s=window.pageYOffset>300;e.classList.toggle("visible",s)},i=!1;window.addEventListener("scroll",()=>{i||(window.requestAnimationFrame(()=>{t(),i=!1}),i=!0)},{passive:!0}),t(),e.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})})}};function be(e,t,i){let s=P.get(e);if(!s||!s.inStock){u.showToast("Produto indispon\xEDvel","error");return}if(!s.prices||!s.prices[t]){u.showToast("Op\xE7\xE3o de pre\xE7o inv\xE1lida","error");return}let c=s.prices[t];if(typeof c.stock=="number"&&c.stock<=0){u.showToast("Produto fora de estoque","error");return}if(!c.paymentUrl){u.showToast("Link de pagamento indispon\xEDvel para esta op\xE7\xE3o","error");return}let m=i||(typeof event!="undefined"?event.currentTarget||event.target:null),h=m?m.innerHTML:"";m&&(m.innerHTML='<i class="fas fa-spinner fa-spin"></i> Processando...',m.disabled=!0),u.showConfirmModal("IMPORTANTE - LEIA COM ATEN\xC7\xC3O","Ap\xF3s realizar o pagamento, voc\xEA DEVE enviar o comprovante para:",[{icon:"fab fa-whatsapp",text:"WhatsApp: (16) 99276-4211",color:"#25D366"},{icon:"fab fa-discord",text:"Discord: 9797x",color:"#5865F2"}],"Sem o comprovante, seu produto N\xC3O ser\xE1 entregue!",()=>{Ee(e,t,c,m,h)},()=>{m&&(m.innerHTML=h,m.disabled=!1),u.showToast("Compra cancelada","info")})}typeof window!="undefined"&&(window.addToCartWithOption=be);function Ee(e,t,i,s,c){let m=P.get(e);f.cart=[];let h=`${e}-${t}`;f.cart.push({id:m.id,key:h,name:`${m.name} (${i.duration})`,price:i.price,duration:i.duration,quantity:1,paymentUrl:i.paymentUrl}),A.updateUI(),u.saveToStorage(),s&&(s.innerHTML='<i class="fas fa-check"></i> Adicionado!',s.style.background="#10b981"),u.showToast(`${m.name} (${i.duration}) adicionado! Redirecionando para pagamento...`,"success"),setTimeout(()=>{i.paymentUrl?(window.open(i.paymentUrl,"_blank"),s&&setTimeout(()=>{s.innerHTML=c,s.disabled=!1,s.style.background=""},1e3)):s&&(u.showToast("Link de pagamento n\xE3o encontrado","error"),s.innerHTML=c,s.disabled=!1,s.style.background="")},2e3)}document.addEventListener("DOMContentLoaded",()=>{let e=()=>ie().then(n=>(n.initialize(),n));W(),M.init(),pe.init(),ge.init(),L.init(),ve.render(),O(),"requestIdleCallback"in window?requestIdleCallback(()=>{e().catch(()=>{})}):setTimeout(()=>{e().catch(()=>{})},1200);let t=document.getElementById("profileBtn");if(t){let n=!1,d=()=>{n||(n=!0,e().catch(()=>{}))},y=b=>{d();let w=te;if(w){if(b.preventDefault(),ae==="_self")window.location.href=w;else{let T=window.open(w,"_blank");T?T.opener=null:u.showToast("Permita pop-ups para abrir a area de conta.","warning")}return}e().then(({Auth:T})=>{!T.isAuthenticated()||!f.currentUser?T.show("loginForm"):T.show("accountForm")}).catch(()=>{u.showToast("Nao foi possivel carregar o modulo de conta. Tente novamente.","error")})};t.addEventListener("click",y),t.addEventListener("pointerenter",d,{once:!0}),t.addEventListener("mouseenter",d,{once:!0}),t.addEventListener("focus",d,{once:!0})}let i=document.getElementById("supportChatBtn");if(i){let n=!1,d=()=>{n||(n=!0,e().catch(()=>{}))};i.addEventListener("pointerenter",d,{once:!0}),i.addEventListener("mouseenter",d,{once:!0});let y=b=>{d(),b.preventDefault(),e().then(({ChatWidget:w})=>{w&&typeof w.open=="function"?w.open():u.openSupportChannel()}).catch(()=>u.openSupportChannel())};i.addEventListener("click",y,{once:!0})}W(),_.apply(),A.updateUI(),se.updateUI(),ye.init();let s=document.getElementById("searchInput"),c=document.getElementById("searchBtn"),m=document.getElementById("searchResults"),h=s?s.closest(".search-container"):null;if(s){let n;s.addEventListener("input",d=>{clearTimeout(n);let y=d.target.value;n=setTimeout(()=>S.filter(y),120)}),s.addEventListener("focus",()=>{m&&s.value.trim()&&S.filter(s.value)}),s.addEventListener("keydown",d=>{d.key==="Escape"&&m?(m.classList.remove("visible"),m.innerHTML=""):d.key==="Enter"&&(d.preventDefault(),S.filter(s.value))})}c&&c.addEventListener("click",()=>{s&&S.filter(s.value)}),m&&h&&document.addEventListener("click",n=>{h.contains(n.target)||m.classList.remove("visible")});let p=document.getElementById("themeToggle");p&&p.addEventListener("click",_.toggle);let g=document.getElementById("cartBtn"),l=document.getElementById("closeCartModal"),v=document.getElementById("clearCart");g&&g.addEventListener("click",()=>B.open("cartModal")),l&&l.addEventListener("click",()=>B.close("cartModal")),v&&v.addEventListener("click",A.clear);let E=document.getElementById("favoritesBtn"),a=document.getElementById("closeFavoritesModal");E&&E.addEventListener("click",()=>B.open("favoritesModal")),a&&a.addEventListener("click",()=>B.close("favoritesModal")),e().then(({Auth:n,Onboarding:d})=>{n.isAuthenticated()&&f.currentUser&&setTimeout(()=>{d.show(f.currentUser.name)},200)}).catch(()=>{});let o=document.getElementById("applyCoupon");o&&o.addEventListener("click",()=>{let n=document.getElementById("couponInput");n&&n.value&&A.applyCoupon(n.value)});let r=document.getElementById("checkoutBtn");r&&r.addEventListener("click",()=>{if(f.cart.length===0){u.showToast("Carrinho vazio","warning");return}let n=f.cart[0];if(!n||!n.paymentUrl){u.showToast("Link de pagamento n\xE3o encontrado","error");return}B.close("cartModal"),u.showConfirmModal("IMPORTANTE - LEIA COM ATEN\xC7\xC3O","Ap\xF3s realizar o pagamento, voc\xEA DEVE enviar o comprovante para:",[{icon:"fab fa-whatsapp",text:"WhatsApp: (16) 99276-4211",color:"#25D366"},{icon:"fab fa-discord",text:"Discord: 9797x",color:"#5865F2"}],"Sem o comprovante, seu produto N\xC3O ser\xE1 entregue!",()=>{u.showLoading(!0),setTimeout(()=>{u.showLoading(!1),u.showToast("Redirecionando para pagamento...","success"),setTimeout(()=>{window.open(n.paymentUrl,"_blank")},1e3)},1e3)},()=>{u.showToast("Compra cancelada","info")})}),document.querySelectorAll(".buy-btn:not(.disabled)").forEach((n,d)=>{n.addEventListener("click",()=>{let y=C[d];if(y&&y.inStock){let b=n.innerHTML;n.innerHTML='<i class="fas fa-spinner fa-spin"></i> Adicionando...',n.disabled=!0,setTimeout(()=>{A.add(y.id),n.innerHTML=b,n.disabled=!1},1e3)}})}),document.querySelectorAll(".modal").forEach(n=>{n.addEventListener("click",d=>{d.target===n&&n.classList.remove("active")})})});var x=[],Z=["ArrowUp","ArrowUp","ArrowDown","ArrowDown","ArrowLeft","ArrowRight","ArrowLeft","ArrowRight","KeyB","KeyA"];document.addEventListener("keydown",e=>{x.push(e.code),x.length>Z.length&&x.shift(),JSON.stringify(x)===JSON.stringify(Z)&&(console.log("\u{1F389} C\xF3digo Konami ativado!"),document.body.style.transform="rotate(360deg)",document.body.style.transition="transform 2s ease",setTimeout(()=>{document.body.style.transform="",u.showToast("\u{1F3AE} Easter Egg encontrado! Parab\xE9ns! \u{1F389}","success")},2e3),x=[])});var we=C.filter(e=>e.featured).length;console.log(`${we} produto(s) em destaque encontrado(s)`);document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();let i=document.querySelector(this.getAttribute("href"));i&&i.scrollIntoView({behavior:"smooth",block:"start"})})});var Ie={threshold:.1,rootMargin:"0px 0px -50px 0px"},oe=new IntersectionObserver(e=>{e.forEach(t=>{t.isIntersecting&&(t.target.style.opacity="1",t.target.style.transform="translateY(0)",oe.unobserve(t.target))})},Ie);$();k.cards.forEach(e=>{e.style.opacity="0",e.style.transform="translateY(30px)",e.style.transition="opacity 0.6s ease, transform 0.6s ease",oe.observe(e)});
//# sourceMappingURL=script.js.map
