{
  "version": 3,
  "sources": ["../../scripts/modules/account-suite.js", "../../script.js"],
  "sourcesContent": ["export function initAccountSuite({ AppState, Utils, Modal }, options = {}) {\n    const settings = {\n        autoShowAuth: options.autoShowAuth !== undefined ? options.autoShowAuth : true,\n        persistAuthOnLogin: options.persistAuthOnLogin === true,\n        profilePortalUrl: typeof options.profilePortalUrl === 'string' && options.profilePortalUrl.trim()\n            ? options.profilePortalUrl.trim()\n            : null,\n        profilePortalTarget: options.profilePortalTarget === '_self' ? '_self' : '_blank'\n    };\n\n    function openProfilePortal() {\n        if (!settings.profilePortalUrl) {\n            return false;\n        }\n\n        if (settings.profilePortalTarget === '_self') {\n            window.location.href = settings.profilePortalUrl;\n            return true;\n        }\n\n        const newWindow = window.open(settings.profilePortalUrl, '_blank');\n        if (newWindow) {\n            newWindow.opener = null;\n            return true;\n        }\n        return false;\n    }\n\n    const ChatWidget = {\n        window: null,\n        body: null,\n        form: null,\r\n        input: null,\r\n        closeBtn: null,\r\n        openBtn: null,\r\n        isOpen: false,\r\n        hasWelcomed: false,\r\n\r\n        init() {\r\n            this.window = document.getElementById('chatWindow');\r\n            this.body = document.getElementById('chatBody');\r\n            this.form = document.getElementById('chatForm');\r\n            this.input = document.getElementById('chatMessage');\r\n            this.closeBtn = document.getElementById('chatCloseBtn');\r\n            this.openBtn = document.getElementById('supportChatBtn');\r\n\r\n            if (!this.window || !this.body) {\r\n                return;\r\n            }\r\n\r\n            if (this.form) {\r\n                this.form.addEventListener('submit', (event) => {\r\n                    event.preventDefault();\r\n                    this.sendMessage();\r\n                });\r\n            }\r\n\r\n            if (this.closeBtn) {\r\n                this.closeBtn.addEventListener('click', () => this.close());\r\n            }\r\n\r\n            if (this.openBtn) {\r\n                this.openBtn.setAttribute('aria-expanded', 'false');\r\n                this.openBtn.addEventListener('click', () => this.toggle());\r\n            }\r\n\r\n            this.window.setAttribute('aria-hidden', 'true');\r\n            this.ensureGreeting();\r\n        },\r\n\r\n        ensureGreeting() {\r\n            if (this.hasWelcomed) {\r\n                return;\r\n            }\r\n            this.appendMessage('bot', 'Ol\u00E1! Sou da equipe Amex Store. Como posso ajudar voc\u00EA hoje?');\n            this.hasWelcomed = true;\r\n        },\r\n\r\n        open() {\r\n            if (!this.window) return;\r\n            this.window.classList.add('active');\r\n            this.window.setAttribute('aria-hidden', 'false');\r\n            this.isOpen = true;\r\n            if (this.openBtn) {\r\n                this.openBtn.classList.add('open');\r\n                this.openBtn.setAttribute('aria-expanded', 'true');\r\n                this.openBtn.setAttribute('aria-label', 'Fechar chat de suporte ao vivo');\r\n            }\r\n            this.ensureGreeting();\r\n            if (this.input) {\r\n                requestAnimationFrame(() => this.input.focus());\r\n            }\r\n            this.scrollToBottom();\r\n        },\r\n\r\n        close() {\r\n            if (!this.window) return;\r\n            this.window.classList.remove('active');\r\n            this.window.setAttribute('aria-hidden', 'true');\r\n            this.isOpen = false;\r\n            if (this.openBtn) {\r\n                this.openBtn.classList.remove('open');\r\n                this.openBtn.setAttribute('aria-expanded', 'false');\r\n                this.openBtn.setAttribute('aria-label', 'Abrir chat de suporte ao vivo');\r\n            }\r\n            if (this.input) {\r\n                this.input.blur();\r\n            }\r\n        },\r\n\r\n        toggle() {\r\n            if (this.isOpen) {\r\n                this.close();\r\n            } else {\r\n                this.open();\r\n            }\r\n        },\r\n\r\n        appendMessage(type, text) {\r\n            if (!this.body) {\r\n                return;\r\n            }\r\n            const wrapper = document.createElement('div');\r\n            wrapper.className = `chat-message ${type}`;\r\n            const content = document.createElement('span');\r\n            content.textContent = text;\r\n            wrapper.appendChild(content);\r\n            this.body.appendChild(wrapper);\r\n            this.scrollToBottom();\r\n        },\r\n\r\n        generateReply(message) {\r\n            const text = message.toLowerCase();\r\n            if (text.includes('prazo') || text.includes('entrega')) {\n                return 'Os produtos digitais s\u00E3o liberados automaticamente ap\u00F3s a confirma\u00E7\u00E3o do pagamento. Se tiver algum atraso, me envie o comprovante.';\n            }\r\n            if (text.includes('garantia') || text.includes('reembolso')) {\r\n                return 'Oferecemos garantia imediata durante o processo de entrega. Assim que receber seus dados, teste e fale conosco se notar algo fora do esperado.';\r\n            }\r\n            if (text.includes('pagamento') || text.includes('pix')) {\n                return 'Aceitamos Pix e alguns cart\u00F5es via parceiros. Ap\u00F3s pagar, envie o comprovante para agilizar a ativa\u00E7\u00E3o.';\n            }\r\n            if (text.includes('contato') || text.includes('whatsapp') || text.includes('discord')) {\r\n                return 'Pode chamar a gente pelo WhatsApp (16) 99276-4211 ou Discord 9797x. Estamos online na maior parte do dia.';\r\n            }\r\n            return 'Entendi! Se precisar de algo espec\u00EDfico, me conte com detalhes e eu te direciono para o melhor caminho.';\n        },\r\n\r\n        sendMessage() {\r\n            if (!this.input) {\r\n                return;\r\n            }\r\n            const message = this.input.value.trim();\r\n            if (!message) {\r\n                return;\r\n            }\r\n            this.appendMessage('user', message);\r\n            this.input.value = '';\r\n\r\n            setTimeout(() => {\r\n                this.appendMessage('bot', this.generateReply(message));\r\n            }, 600);\r\n        },\r\n\r\n        scrollToBottom() {\r\n            if (!this.body) {\r\n                return;\r\n            }\r\n            this.body.scrollTop = this.body.scrollHeight;\r\n        }\r\n    };\r\n\r\n    const Profile = {\r\n        button: null,\r\n        label: null,\r\n        avatar: null,\r\n        modal: null,\r\n        closeBtn: null,\r\n        form: null,\r\n        nameInput: null,\r\n        emailInput: null,\r\n        passwordInput: null,\r\n        summaryName: null,\r\n        summaryEmail: null,\r\n        summaryAvatar: null,\r\n        logoutBtn: null,\r\n        avatarInput: null,\r\n        avatarTrigger: null,\r\n        avatarReset: null,\r\n        historyList: null,\r\n        historyEmpty: null,\r\n        historyRefresh: null,\r\n\r\n        init() {\r\n            this.button = document.getElementById('profileBtn');\r\n            this.label = this.button ? this.button.querySelector('.profile-label') : null;\r\n            this.avatar = this.button ? this.button.querySelector('.profile-avatar') : null;\r\n            this.modal = document.getElementById('profileModal');\r\n            this.closeBtn = document.getElementById('closeProfileModal');\r\n            this.form = document.getElementById('profileForm');\r\n            this.nameInput = document.getElementById('profileName');\r\n            this.emailInput = document.getElementById('profileEmail');\r\n            this.passwordInput = document.getElementById('profilePassword');\r\n            this.summaryName = document.getElementById('profileSummaryName');\r\n            this.summaryEmail = document.getElementById('profileSummaryEmail');\r\n            this.summaryAvatar = document.getElementById('profileSummaryAvatar');\r\n            this.logoutBtn = document.getElementById('logoutBtn');\r\n            this.avatarInput = document.getElementById('profileAvatarInput');\r\n            this.avatarTrigger = document.getElementById('profileAvatarTrigger');\r\n            this.avatarReset = document.getElementById('profileAvatarReset');\r\n            this.historyList = document.getElementById('profileHistoryList');\r\n            this.historyEmpty = document.getElementById('profileHistoryEmpty');\r\n            this.historyRefresh = document.getElementById('profileHistoryRefresh');\r\n\r\n            if (this.button) {\n                if (settings.profilePortalUrl) {\n                    this.button.addEventListener('click', (event) => {\n                        event.preventDefault();\n                        openProfilePortal();\n                    });\n                } else {\n                    this.button.addEventListener('click', () => {\n                        if (!Auth.isAuthenticated() || !AppState.currentUser) {\n                            Auth.show('loginForm');\n                            return;\n                        }\n                        Auth.show('accountForm');\n                    });\n                }\n            }\n\n            if (this.closeBtn) {\n                this.closeBtn.addEventListener('click', () => {\n                    Modal.close('profileModal');\n                    if (settings.persistAuthOnLogin) {\n                        Auth.show('accountForm');\n                    }\n                });\n            }\n\n            if (this.form) {\n                this.form.addEventListener('submit', (event) => {\n                    event.preventDefault();\n                    this.saveProfile();\r\n                });\r\n            }\r\n\r\n            if (this.logoutBtn) {\r\n                this.logoutBtn.addEventListener('click', () => {\r\n                    Modal.close('profileModal');\r\n                    Auth.logout();\r\n                });\r\n            }\r\n\r\n            if (this.avatarTrigger && this.avatarInput) {\r\n                this.avatarTrigger.addEventListener('click', () => {\r\n                    if (!Auth.isAuthenticated() || !AppState.currentUser) {\r\n                        Auth.show('loginForm');\r\n                        return;\r\n                    }\r\n                    this.avatarInput.click();\r\n                });\r\n            }\r\n\r\n            if (this.avatarInput) {\r\n                this.avatarInput.addEventListener('change', (event) => {\r\n                    const file = event.target.files && event.target.files[0];\r\n                    if (!file) {\r\n                        return;\r\n                    }\r\n                    this.handleAvatarFile(file);\r\n                    event.target.value = '';\r\n                });\r\n            }\r\n\r\n            if (this.avatarReset) {\r\n                this.avatarReset.addEventListener('click', () => this.resetAvatar());\r\n            }\r\n\r\n            if (this.historyRefresh) {\r\n                this.historyRefresh.addEventListener('click', () => this.renderPurchases(true));\r\n            }\r\n\r\n            this.updateUI();\r\n            this.renderPurchases();\r\n            this.updateAvatarControls();\r\n        },\r\n\r\n        populateForm() {\r\n            if (!AppState.currentUser) {\r\n                return;\r\n            }\r\n\r\n            if (this.nameInput) {\r\n                this.nameInput.value = AppState.currentUser.name || '';\r\n            }\r\n            if (this.emailInput) {\r\n                this.emailInput.value = AppState.currentUser.email || '';\r\n            }\r\n            if (this.passwordInput) {\r\n                this.passwordInput.value = '';\r\n            }\r\n\r\n            this.updateSummary(AppState.currentUser);\n            this.updateAvatarControls();\n            this.renderPurchases();\r\n        },\r\n\r\n        openModal() {\r\n            if (!Auth.isAuthenticated() || !AppState.currentUser) {\r\n                Auth.show('loginForm');\r\n                return;\r\n            }\r\n            this.populateForm();\r\n            Auth.hide();\r\n            Modal.open('profileModal');\r\n        },\r\n\r\n        saveProfile() {\r\n            if (!AppState.currentUser) {\r\n                Utils.showToast('Faca login para editar o perfil.', 'warning');\r\n                return;\r\n            }\r\n\r\n            const name = (this.nameInput ? this.nameInput.value : '').trim();\r\n            const email = (this.emailInput ? this.emailInput.value : '').trim().toLowerCase();\r\n            const password = (this.passwordInput ? this.passwordInput.value : '').trim();\r\n\r\n            if (!name) {\r\n                Utils.showToast('Informe um nome valido.', 'warning');\r\n                return;\r\n            }\r\n\r\n            if (!email) {\r\n                Utils.showToast('Informe um e-mail valido.', 'warning');\r\n                return;\r\n            }\r\n\r\n            const previousEmail = AppState.currentUser.email;\r\n            if (email !== previousEmail && Auth.users.some(user => user.email === email)) {\r\n                Utils.showToast('Este e-mail ja esta em uso.', 'error');\r\n                return;\r\n            }\r\n\r\n            const userIndex = Auth.users.findIndex(user => user.email === previousEmail);\r\n            if (userIndex === -1) {\r\n                Utils.showToast('Conta nao encontrada. Faca login novamente.', 'error');\r\n                Auth.logout();\r\n                return;\r\n            }\r\n\r\n            Auth.users[userIndex].name = name;\r\n            Auth.users[userIndex].email = email;\r\n            if (password) {\r\n                Auth.users[userIndex].password = password;\r\n            }\r\n            localStorage.setItem('amexUsers', JSON.stringify(Auth.users));\r\n\r\n            AppState.currentUser = { name, email };\r\n            localStorage.setItem('amexCurrentUser', JSON.stringify(AppState.currentUser));\r\n\r\n            const loginEmailInput = document.getElementById('loginEmail');\r\n            if (loginEmailInput) {\r\n                loginEmailInput.value = email;\r\n            }\r\n            if (this.passwordInput) {\r\n                this.passwordInput.value = '';\r\n            }\r\n\r\n            this.updateSummary(AppState.currentUser);\n            this.updateAvatarControls();\n            this.renderPurchases();\r\n            this.updateUI();\r\n            Auth.updateAccountState();\r\n            Utils.showToast('Perfil atualizado com sucesso!', 'success');\r\n        },\r\n\r\n        updateSummary(user) {\n            if (!user) {\n                if (this.summaryName) this.summaryName.textContent = 'Visitante';\n                if (this.summaryEmail) this.summaryEmail.textContent = '---';\n                this.applyAvatarToElement(this.summaryAvatar, '', '?');\n                return;\n            }\n\n            if (this.summaryName) {\n                this.summaryName.textContent = user.name || 'Visitante';\n            }\n            if (this.summaryEmail) {\n                this.summaryEmail.textContent = user.email || '---';\n            }\n            this.applyAvatarToElement(this.summaryAvatar, user.name, '?');\n        },\r\n\r\n        updateUI() {\n            const isLogged = Auth.isAuthenticated() && !!AppState.currentUser;\n\n            if (this.button) {\n                this.button.classList.toggle('logged', isLogged);\n            }\n\n            const name = isLogged && AppState.currentUser ? AppState.currentUser.name : '';\n            if (this.label) {\n                this.label.textContent = isLogged ? this.getFirstName(name) : 'Entrar';\n            }\n\n            this.applyAvatarToElement(this.avatar, name, '?');\n            this.updateSummary(isLogged ? AppState.currentUser : null);\n            this.updateAvatarControls();\n        },\n\n        updateAvatarControls() {\n            if (this.avatarReset) {\n                const canReset = !!AppState.profileAvatar && Auth.isAuthenticated() && !!AppState.currentUser;\n                this.avatarReset.disabled = !canReset;\n            }\n        },\n\n        handleAvatarFile(file) {\n            if (!Auth.isAuthenticated() || !AppState.currentUser) {\n                Auth.show('loginForm');\n                return;\n            }\n\n            const maxSize = 2 * 1024 * 1024;\n            if (!file.type || !file.type.startsWith('image/')) {\n                Utils.showToast('Selecione uma imagem valida.', 'warning');\n                return;\n            }\n            if (file.size > maxSize) {\n                Utils.showToast('Escolha uma imagem menor que 2MB.', 'warning');\n                return;\n            }\n\n            const reader = new FileReader();\n            reader.onload = () => {\n                AppState.profileAvatar = reader.result;\n                Utils.saveToStorage();\n                this.updateUI();\n                Utils.showToast('Foto de perfil atualizada!', 'success');\n            };\n            reader.onerror = () => {\n                Utils.showToast('Nao foi possivel carregar a imagem.', 'error');\n            };\n            reader.readAsDataURL(file);\n        },\n\n        resetAvatar() {\n            if (!Auth.isAuthenticated() || !AppState.currentUser) {\n                Auth.show('loginForm');\n                return;\n            }\n            if (!AppState.profileAvatar) {\n                return;\n            }\n            AppState.profileAvatar = null;\n            Utils.saveToStorage();\n            this.updateUI();\n            Utils.showToast('Foto de perfil removida.', 'info');\n        },\n\n        applyAvatarToElement(element, name = '', fallback = '?') {\n            if (!element) {\n                return;\n            }\n            const hasPhoto = !!AppState.profileAvatar && Auth.isAuthenticated() && !!AppState.currentUser;\n            element.classList.toggle('has-photo', hasPhoto);\n            if (hasPhoto) {\n                element.style.backgroundImage = 'url(' + AppState.profileAvatar + ')';\n                element.style.backgroundSize = 'cover';\n                element.style.backgroundPosition = 'center';\n                element.style.backgroundRepeat = 'no-repeat';\n                element.style.backgroundColor = '#0f1e19';\n                element.textContent = '';\n            } else {\n                element.style.backgroundImage = '';\n                element.style.backgroundSize = '';\n                element.style.backgroundPosition = '';\n                element.style.backgroundRepeat = '';\n                element.style.backgroundColor = '';\n                const initial = this.getInitial(name) || fallback;\n                element.textContent = initial;\n            }\n        },\n\n        renderPurchases(showToast = false) {\n            if (!this.historyList || !this.historyEmpty) {\n                return;\n            }\n\n            const isLogged = Auth.isAuthenticated() && !!AppState.currentUser;\n            const purchases = Array.isArray(AppState.purchases) ? AppState.purchases : [];\n\n            this.historyList.innerHTML = '';\n\n            if (!isLogged) {\n                this.historyEmpty.textContent = 'Entre para visualizar suas compras.';\n                this.historyEmpty.hidden = false;\n                this.historyList.hidden = true;\n                return;\n            }\n\n            if (!purchases.length) {\n                this.historyEmpty.textContent = 'Voce ainda nao realizou nenhuma compra.';\n                this.historyEmpty.hidden = false;\n                this.historyList.hidden = true;\n                return;\n            }\n\n            this.historyEmpty.hidden = true;\n            this.historyList.hidden = false;\n\n            purchases.forEach((purchase) => {\n                const status = this.getPurchaseStatus(purchase);\n                const purchaseDate = this.formatDate(purchase.purchaseDate);\n                const expiresDate = purchase.expiresAt ? this.formatDate(purchase.expiresAt) : 'Sem data de expiracao';\n                const item = document.createElement('li');\n                item.className = 'profile-history-item';\n                const detailsWrapper = document.createElement('div');\n                const title = document.createElement('h5');\n                title.textContent = purchase.name;\n                detailsWrapper.appendChild(title);\n\n                const meta = document.createElement('div');\n                meta.className = 'profile-history-meta';\n\n                [\n                    { icon: 'fa-calendar-alt', text: purchaseDate },\n                    { icon: 'fa-stopwatch', text: purchase.duration || '---' },\n                    { icon: 'fa-wallet', text: Utils.formatPrice(purchase.price || 0) },\n                    { icon: 'fa-hourglass-half', text: expiresDate },\n                ].forEach(({ icon, text }) => {\n                    const span = document.createElement('span');\n                    const iconEl = document.createElement('i');\n                    iconEl.className = 'fas ' + icon;\n                    iconEl.setAttribute('aria-hidden', 'true');\n                    span.appendChild(iconEl);\n                    span.appendChild(document.createTextNode(' ' + text));\n                    meta.appendChild(span);\n                });\n\n                detailsWrapper.appendChild(meta);\n\n                const statusEl = document.createElement('div');\n                statusEl.className = 'profile-history-status ' + status.className;\n                const statusIcon = document.createElement('i');\n                statusIcon.className = 'fas ' + status.icon;\n                statusIcon.setAttribute('aria-hidden', 'true');\n                const statusText = document.createElement('span');\n                statusText.textContent = status.label;\n                statusEl.append(statusIcon, statusText);\n\n                item.append(detailsWrapper, statusEl);\n                this.historyList.appendChild(item);\n            });\n\n            if (showToast) {\n                Utils.showToast('Historico atualizado!', 'info');\n            }\n        },\n\n        getPurchaseStatus(purchase) {\n            if (!purchase || !purchase.expiresAt) {\n                return { label: 'Acesso vitalicio', className: 'permanent', icon: 'fa-infinity' };\n            }\n            const expires = new Date(purchase.expiresAt);\n            if (Number.isNaN(expires.getTime())) {\n                return { label: 'Validade indisponivel', className: 'permanent', icon: 'fa-question-circle' };\n            }\n            const now = new Date();\n            const diffMs = expires.getTime() - now.getTime();\n            if (diffMs <= 0) {\n                const overdueDays = Math.max(1, Math.floor(Math.abs(diffMs) / (1000 * 60 * 60 * 24)));\n                return { label: overdueDays <= 1 ? 'Expirado' : 'Expirado ha ' + overdueDays + ' dias', className: 'expired', icon: 'fa-exclamation-triangle' };\n            }\n            const remainingDays = Math.ceil(diffMs / (1000 * 60 * 60 * 24));\n            if (remainingDays <= 1) {\n                return { label: 'Expira em menos de 24h', className: 'valid', icon: 'fa-clock' };\n            }\n            return { label: 'Expira em ' + remainingDays + ' dias', className: 'valid', icon: 'fa-clock' };\n        },\n\n        formatDate(isoDate) {\n            if (!isoDate) {\n                return '--';\n            }\n            try {\n                return new Intl.DateTimeFormat('pt-BR', { dateStyle: 'short', timeStyle: 'short' }).format(new Date(isoDate));\n            } catch (error) {\n                return new Date(isoDate).toLocaleString('pt-BR');\n            }\n        },\n\n        getInitial(value = '') {\n            const trimmed = value.trim();\r\n            return trimmed ? trimmed.charAt(0).toUpperCase() : '?';\r\n        },\r\n\r\n        getFirstName(value = '') {\r\n            const trimmed = value.trim();\r\n            if (!trimmed) {\r\n                return 'Perfil';\r\n            }\r\n            const parts = trimmed.split(/\\s+/);\r\n            return parts.length ? parts[0] : trimmed;\r\n        },\r\n\r\n        onLogin() {\n            this.updateUI();\n            this.renderPurchases();\n            Auth.updateAccountState();\n        },\n\n        onLogout() {\n            if (this.modal) {\n                Modal.close('profileModal');\n            }\n            if (this.passwordInput) {\n                this.passwordInput.value = '';\n            }\n            this.renderPurchases();\n            this.updateUI();\n            Auth.updateAccountState();\n        },\n\n        onPurchaseRecorded() {\n            this.renderPurchases(true);\n        }\n    };\n\r\n    const Onboarding = {\r\n        element: null,\r\n        closeBtn: null,\r\n        message: null,\r\n        dismissed: false,\r\n\r\n        init() {\r\n            this.element = document.getElementById('onboardingTips');\r\n            if (!this.element) {\r\n                return;\r\n            }\r\n\r\n            this.closeBtn = document.getElementById('closeOnboardingTips');\r\n            this.message = document.getElementById('onboardingMessage');\r\n            this.dismissed = localStorage.getItem('amexOnboardingDismissed') === 'true';\r\n\r\n            if (this.closeBtn) {\r\n                this.closeBtn.addEventListener('click', () => this.hide(true));\r\n            }\r\n\r\n            this.element.querySelectorAll('[data-scroll-target]').forEach(card => {\r\n                const target = card.getAttribute('data-scroll-target');\r\n                if (!target) {\r\n                    return;\r\n                }\r\n\r\n                card.addEventListener('click', (event) => {\r\n                    if (event.target.closest('button')) {\r\n                        return;\r\n                    }\r\n                    this.scrollTo(target);\r\n                    this.hide(false);\r\n                });\r\n\r\n                const button = card.querySelector('button');\r\n                if (button) {\r\n                    button.addEventListener('click', (event) => {\r\n                        event.preventDefault();\r\n                        event.stopPropagation();\r\n                        this.scrollTo(target);\r\n                        this.hide(false);\r\n                    });\r\n                }\r\n            });\r\n\r\n            this.element.querySelectorAll('[data-open-support]').forEach(node => {\r\n                node.addEventListener('click', (event) => {\r\n                    event.preventDefault();\r\n                    event.stopPropagation();\r\n                    Utils.openSupportChannel();\r\n                    this.hide(false);\r\n                });\r\n\r\n                const button = node.querySelector('button');\r\n                if (button) {\r\n                    button.addEventListener('click', (event) => {\r\n                        event.preventDefault();\r\n                        event.stopPropagation();\r\n                        Utils.openSupportChannel();\r\n                        this.hide(false);\r\n                    });\r\n                }\r\n            });\r\n\r\n            const reopenBtn = document.getElementById('accountGuideBtn');\r\n            if (reopenBtn) {\r\n                reopenBtn.addEventListener('click', () => {\r\n                    this.dismissed = false;\r\n                    localStorage.removeItem('amexOnboardingDismissed');\r\n                    Auth.hide();\r\n                    this.show(AppState.currentUser ? AppState.currentUser.name : '', { force: true });\r\n                });\r\n            }\r\n        },\r\n\r\n        show(name = '', options = {}) {\r\n            if (!this.element) {\r\n                return;\r\n            }\r\n\r\n            const force = options.force === true;\r\n            if (force) {\r\n                this.dismissed = false;\r\n            }\r\n\r\n            if (this.dismissed && !force) {\r\n                return;\r\n            }\r\n\r\n            if (this.message) {\r\n                if (name) {\r\n                    const firstName = name.trim().split(/\\s+/)[0] || name;\r\n                    this.message.textContent = `Oi, ${firstName}! Comece com uma destas sugestoes.`;\r\n                } else {\r\n                    this.message.textContent = 'Comece com uma destas sugestoes para aproveitar melhor a loja.';\r\n                }\r\n            }\r\n\r\n            this.element.removeAttribute('hidden');\r\n            this.element.classList.add('visible');\r\n            this.element.setAttribute('aria-hidden', 'false');\r\n\r\n            requestAnimationFrame(() => {\r\n                this.element.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n            });\r\n        },\r\n\r\n        hide(saveState = false) {\r\n            if (!this.element) {\r\n                return;\r\n            }\r\n            this.element.classList.remove('visible');\r\n            this.element.setAttribute('hidden', '');\r\n            this.element.setAttribute('aria-hidden', 'true');\r\n            if (saveState) {\r\n                this.dismissed = true;\r\n                localStorage.setItem('amexOnboardingDismissed', 'true');\r\n            }\r\n        },\r\n\r\n        scrollTo(selector) {\r\n            if (!selector) {\r\n                return;\r\n            }\r\n            const target = document.querySelector(selector);\r\n            if (target) {\r\n                target.scrollIntoView({ behavior: 'smooth', block: 'start' });\r\n            }\r\n        }\r\n    };\r\n\r\n    const Auth = {\r\n        overlay: null,\r\n        tabContainer: null,\r\n        tabIndicator: null,\r\n        tabs: [],\r\n        forms: [],\r\n        users: [],\r\n        activeTabId: 'loginForm',\r\n        handleResize: null,\r\n        accountTab: null,\r\n        loginTab: null,\r\n        registerTab: null,\r\n        accountForm: null,\r\n        accountNameEl: null,\r\n        accountEmailEl: null,\r\n        accountAvatarEl: null,\r\n        accountProfileBtn: null,\r\n        accountLogoutBtn: null,\r\n\r\n        init() {\r\n            this.overlay = document.getElementById('authOverlay');\r\n            if (!this.overlay) return;\r\n\r\n            this.tabContainer = this.overlay.querySelector('.auth-tabs');\r\n            this.tabIndicator = this.overlay.querySelector('.auth-tab-indicator');\r\n            this.tabs = Array.from(this.overlay.querySelectorAll('.auth-tab'));\r\n            this.forms = Array.from(this.overlay.querySelectorAll('.auth-form'));\r\n            this.users = JSON.parse(localStorage.getItem('amexUsers') || '[]');\r\n            this.accountTab = this.overlay.querySelector('.auth-tab.account-tab');\r\n            this.loginTab = this.overlay.querySelector('.auth-tab[data-target=\\\"loginForm\\\"]');\r\n            this.registerTab = this.overlay.querySelector('.auth-tab[data-target=\\\"registerForm\\\"]');\r\n            this.accountForm = document.getElementById('accountForm');\r\n            this.accountNameEl = document.getElementById('accountUserName');\r\n            this.accountEmailEl = document.getElementById('accountUserEmail');\r\n            this.accountAvatarEl = document.getElementById('accountAvatar');\r\n            this.accountProfileBtn = document.getElementById('accountProfileBtn');\r\n            this.accountLogoutBtn = document.getElementById('accountLogoutBtn');\r\n            this.activeTabId = 'loginForm';\r\n            if (this.tabContainer) {\r\n                this.tabContainer.setAttribute('data-tab-count', '2');\r\n            }\r\n\r\n            if (this.handleResize) {\r\n                window.removeEventListener('resize', this.handleResize);\r\n            }\r\n            this.handleResize = () => this.moveIndicatorTo(this.activeTabId);\r\n            window.addEventListener('resize', this.handleResize);\r\n\r\n            this.bindTabEvents();\n            this.bindFormEvents();\n            this.bindPasswordToggle();\n            this.bindAccountActions();\n            this.updateAccountState();\n\n            const isLogged = this.isAuthenticated() && !!AppState.currentUser;\n            if (isLogged) {\n                Profile.onLogin();\n                this.activate('accountForm');\n                if (settings.persistAuthOnLogin) {\n                    this.show('accountForm');\n                } else {\n                    this.hide();\n                }\n            } else {\n                Profile.onLogout();\n                this.activate('loginForm');\n                if (settings.autoShowAuth || settings.persistAuthOnLogin) {\n                    this.show('loginForm');\n                } else {\n                    this.hide();\n                }\n            }\n        },\n\r\n        bindTabEvents() {\r\n            this.tabs.forEach(tab => {\r\n                tab.addEventListener('click', () => {\r\n                    const target = tab.dataset.target;\r\n                    if (target === 'accountForm' && !this.isAuthenticated()) {\r\n                        this.activate('loginForm');\r\n                        return;\r\n                    }\r\n                    this.activate(target);\r\n                });\r\n            });\r\n\r\n            this.overlay.querySelectorAll('.auth-switch a').forEach(link => {\r\n                link.addEventListener('click', (event) => {\r\n                    event.preventDefault();\r\n                    const target = link.dataset.target;\r\n                    if (target) {\r\n                        this.activate(target);\r\n                    }\r\n                });\r\n            });\r\n        },\r\n\r\n        moveIndicatorTo(targetId) {\r\n            if (!this.tabIndicator || !this.tabContainer) {\r\n                return;\r\n            }\r\n\r\n            const desiredTarget = targetId || this.activeTabId || 'loginForm';\r\n            const activeTab = this.tabContainer.querySelector(`.auth-tab[data-target=\\\"${desiredTarget}\\\"]`);\r\n\r\n            if (!activeTab || activeTab.offsetParent === null) {\r\n                this.tabIndicator.style.opacity = '0';\r\n                return;\r\n            }\r\n\r\n            window.requestAnimationFrame(() => {\r\n                const { offsetLeft, offsetWidth } = activeTab;\r\n                this.tabIndicator.style.opacity = '1';\r\n                this.tabIndicator.style.transform = `translateX(${offsetLeft}px)`;\r\n                this.tabIndicator.style.width = `${offsetWidth}px`;\r\n            });\r\n        },\r\n\r\n        bindPasswordToggle() {\r\n            this.overlay.querySelectorAll('.toggle-password').forEach(button => {\r\n                button.addEventListener('click', () => {\r\n                    const input = document.getElementById(button.dataset.target);\r\n                    if (!input) return;\r\n                    const isPassword = input.type === 'password';\r\n                    input.type = isPassword ? 'text' : 'password';\r\n                    button.innerHTML = isPassword\r\n                        ? '<i class=\\\"fas fa-eye-slash\\\"></i>'\r\n                        : '<i class=\\\"fas fa-eye\\\"></i>';\r\n                });\r\n            });\r\n        },\r\n\r\n        bindAccountActions() {\n            if (this.accountProfileBtn) {\n                this.accountProfileBtn.addEventListener('click', (event) => {\n                    if (settings.profilePortalUrl) {\n                        event.preventDefault();\n                        openProfilePortal();\n                        return;\n                    }\n                    Profile.openModal();\n                });\n            }\n\n            if (this.accountLogoutBtn) {\n                this.accountLogoutBtn.addEventListener('click', () => {\n                    this.logout();\n                });\r\n            }\r\n        },\r\n\r\n        bindFormEvents() {\r\n            const loginForm = document.getElementById('loginForm');\r\n            const registerForm = document.getElementById('registerForm');\r\n\r\n            if (loginForm) {\r\n                loginForm.addEventListener('submit', (event) => {\r\n                    event.preventDefault();\r\n                    const email = loginForm.querySelector('#loginEmail').value.trim().toLowerCase();\r\n                    const password = loginForm.querySelector('#loginPassword').value;\r\n                    const user = this.users.find(u => u.email === email && u.password === password);\r\n\r\n                    if (!user) {\r\n                        Utils.showToast('Credenciais invalidas. Verifique e tente novamente.', 'error');\r\n                        return;\r\n                    }\r\n\r\n                    localStorage.setItem('amexAuth', 'true');\r\n                    AppState.currentUser = { name: user.name, email: user.email };\n                    localStorage.setItem('amexCurrentUser', JSON.stringify(AppState.currentUser));\n\n                    Profile.onLogin();\n                    loginForm.reset();\n                    if (settings.persistAuthOnLogin) {\n                        this.activate('accountForm');\n                        this.show('accountForm');\n                    } else {\n                        this.hide();\n                    }\n\n                    setTimeout(() => {\n                        Utils.showWelcomeToast(user.name);\n                        const pending = sessionStorage.getItem('amexPendingOnboardingName');\n                        if (pending) {\n                            Onboarding.show(user.name, { force: true });\r\n                            sessionStorage.removeItem('amexPendingOnboardingName');\r\n                        } else {\r\n                            Onboarding.show(user.name);\r\n                        }\r\n                    }, 200);\r\n                });\r\n            }\r\n\r\n            if (registerForm) {\r\n                registerForm.addEventListener('submit', (event) => {\r\n                    event.preventDefault();\r\n                    const nickname = registerForm.querySelector('#registerName').value.trim();\r\n                    if (!nickname) {\r\n                        Utils.showToast('Informe um nome de usuario valido.', 'warning');\r\n                        return;\r\n                    }\r\n                    const email = registerForm.querySelector('#registerEmail').value.trim().toLowerCase();\r\n                    const password = registerForm.querySelector('#registerPassword').value;\r\n\r\n                    if (password.length < 6) {\r\n                        Utils.showToast('A senha deve ter pelo menos 6 caracteres.', 'warning');\r\n                        return;\r\n                    }\r\n\r\n                    if (this.users.some(u => u.email === email)) {\r\n                        Utils.showToast('Ja existe uma conta com este e-mail.', 'error');\r\n                        this.activate('loginForm');\r\n                        return;\r\n                    }\r\n\r\n                    const newUser = { name: nickname, email, password };\r\n                    this.users.push(newUser);\r\n                    localStorage.setItem('amexUsers', JSON.stringify(this.users));\r\n                    sessionStorage.setItem('amexPendingOnboardingName', nickname);\r\n                    localStorage.removeItem('amexOnboardingDismissed');\r\n                    Utils.showToast('Cadastro realizado com sucesso, ' + nickname + '! Agora faca login.', 'success');\r\n                    registerForm.reset();\r\n                    this.activate('loginForm');\r\n                    const loginEmailInput = document.getElementById('loginEmail');\r\n                    if (loginEmailInput) {\r\n                        loginEmailInput.value = email;\r\n                        loginEmailInput.focus();\r\n                    }\r\n                    const loginPasswordInput = document.getElementById('loginPassword');\r\n                    if (loginPasswordInput) {\r\n                        loginPasswordInput.value = '';\r\n                    }\r\n                });\r\n            }\r\n        },\r\n\r\n        activate(targetId = 'loginForm') {\r\n            const isLogged = this.isAuthenticated() && !!AppState.currentUser;\r\n            if (targetId === 'accountForm' && !isLogged) {\r\n                targetId = 'loginForm';\r\n            }\r\n            if (isLogged && (targetId === 'loginForm' || targetId === 'registerForm')) {\r\n                targetId = 'accountForm';\r\n            }\r\n\r\n            this.activeTabId = targetId;\r\n\r\n            this.forms.forEach(form => {\r\n                const isActive = form.id === targetId;\r\n                form.classList.toggle('active', isActive);\r\n                form.toggleAttribute('hidden', !isActive);\r\n                form.setAttribute('aria-hidden', isActive ? 'false' : 'true');\r\n            });\r\n            this.tabs.forEach(tab => {\r\n                const isActive = tab.dataset.target === targetId;\r\n                tab.classList.toggle('active', isActive);\r\n                tab.setAttribute('aria-selected', isActive ? 'true' : 'false');\r\n                tab.setAttribute('tabindex', isActive ? '0' : '-1');\r\n            });\r\n\r\n            this.moveIndicatorTo(targetId);\r\n        },\r\n\r\n        show(targetId = 'loginForm') {\r\n            const isLogged = this.isAuthenticated() && !!AppState.currentUser;\r\n            if (targetId === 'accountForm' && !isLogged) {\r\n                targetId = 'loginForm';\r\n            }\r\n            if (isLogged && (targetId === 'loginForm' || targetId === 'registerForm')) {\r\n                targetId = 'accountForm';\r\n            }\r\n            this.updateAccountState();\n            this.updateCloseButton();\n            this.activate(targetId);\n            if (document.body.classList.contains('account-standalone')) {\n                document.body.classList.remove('auth-locked');\n            } else {\n                document.body.classList.add('auth-locked');\n            }\n            this.overlay.classList.add('active');\n        },\n\r\n        hide() {\r\n            document.body.classList.remove('auth-locked');\r\n            this.overlay.classList.remove('active');\r\n        },\r\n\r\n        logout() {\r\n            localStorage.removeItem('amexAuth');\r\n            localStorage.removeItem('amexCurrentUser');\r\n            AppState.currentUser = null;\r\n            Profile.onLogout();\r\n            this.show('loginForm');\r\n            Utils.showToast('Sessao encerrada. Faca login para continuar.', 'info');\r\n        },\r\n\r\n        updateCloseButton() {\r\n            const closeBtn = document.getElementById('authModalClose');\r\n            if (!closeBtn) {\r\n                return;\r\n            }\r\n            const isLogged = this.isAuthenticated() && !!AppState.currentUser;\r\n            closeBtn.classList.toggle('visible', isLogged);\r\n            closeBtn.setAttribute('aria-hidden', isLogged ? 'false' : 'true');\r\n            closeBtn.removeEventListener('click', this.handleCloseClick);\r\n            if (isLogged) {\r\n                closeBtn.addEventListener('click', this.handleCloseClick);\r\n            }\r\n        },\r\n\r\n        handleCloseClick: () => {\r\n            Auth.hide();\r\n        },\r\n\r\n        updateAccountState() {\r\n            const isLogged = this.isAuthenticated() && !!AppState.currentUser;\r\n\r\n            if (this.accountTab) {\r\n                this.accountTab.classList.toggle('visible', isLogged);\r\n                this.accountTab.setAttribute('aria-hidden', isLogged ? 'false' : 'true');\r\n                this.accountTab.toggleAttribute('disabled', !isLogged);\r\n                this.accountTab.toggleAttribute('hidden', !isLogged);\r\n                this.accountTab.setAttribute('tabindex', isLogged && this.accountTab.classList.contains('active') ? '0' : '-1');\r\n                if (!isLogged) {\r\n                    this.accountTab.blur();\r\n                }\r\n            }\r\n            if (this.loginTab) {\r\n                this.loginTab.classList.toggle('hidden', isLogged);\r\n                this.loginTab.setAttribute('aria-hidden', isLogged ? 'true' : 'false');\r\n                this.loginTab.toggleAttribute('hidden', isLogged);\r\n            }\r\n            if (this.registerTab) {\r\n                this.registerTab.classList.toggle('hidden', isLogged);\r\n                this.registerTab.setAttribute('aria-hidden', isLogged ? 'true' : 'false');\r\n                this.registerTab.toggleAttribute('hidden', isLogged);\r\n            }\r\n\r\n            if (this.tabContainer) {\r\n                this.tabContainer.setAttribute('data-tab-count', isLogged ? '3' : '2');\r\n            }\r\n\r\n            if (this.accountForm) {\r\n                this.accountForm.classList.toggle('available', isLogged);\r\n                this.accountForm.setAttribute('aria-hidden', isLogged ? 'false' : 'true');\r\n                this.accountForm.toggleAttribute('hidden', !isLogged);\r\n                if (!isLogged && this.accountForm.classList.contains('active')) {\r\n                    this.activate('loginForm');\r\n                }\r\n            }\r\n\r\n            if (this.accountNameEl) {\r\n                this.accountNameEl.textContent = isLogged && AppState.currentUser\r\n                    ? AppState.currentUser.name\r\n                    : 'Visitante';\r\n            }\r\n\r\n            if (this.accountEmailEl) {\r\n                this.accountEmailEl.textContent = isLogged && AppState.currentUser\r\n                    ? AppState.currentUser.email\r\n                    : '---';\r\n            }\r\n\r\n            if (this.accountAvatarEl) {\r\n                const name = isLogged && AppState.currentUser ? AppState.currentUser.name : '';\r\n                const initial = name ? name.trim().charAt(0).toUpperCase() : '?';\r\n                this.accountAvatarEl.textContent = initial || '?';\r\n            }\r\n            this.updateCloseButton();\r\n            this.moveIndicatorTo(this.activeTabId);\r\n        },\r\n\r\n        isAuthenticated() {\r\n            return localStorage.getItem('amexAuth') === 'true';\r\n        }\r\n    };\r\n\r\n    let initialized = false;\r\n\r\n    function initialize() {\r\n        if (initialized) {\r\n            return;\r\n        }\r\n        initialized = true;\r\n        ChatWidget.init();\r\n        Onboarding.init();\r\n        Profile.init();\r\n        Auth.init();\r\n    }\r\n\r\n    return {\r\n        ChatWidget,\r\n        Profile,\r\n        Auth,\r\n        Onboarding,\r\n        initialize,\r\n        isInitialized: () => initialized\r\n    };\r\n}\r\n\r\n\r\n\r\n\r\n\r\n", "// Amex Store JavaScript - Sistema Completo de E-commerce\r\n\r\nconsole.log('Amex Store carregada com sucesso!');\r\nconsole.log('Dica: Tente o c\u00F3digo Konami para uma surpresa especial!');\r\n\r\n// Estado global da aplica\u00E7\u00E3o\r\nconst AppState = {\r\n    cart: JSON.parse(localStorage.getItem('amexCart')) || [],\r\n    favorites: JSON.parse(localStorage.getItem('amexFavorites')) || [],\r\n    theme: localStorage.getItem('amexTheme') || 'light',\r\n    currentUser: JSON.parse(localStorage.getItem('amexCurrentUser')) || null,\r\n    purchases: JSON.parse(localStorage.getItem('amexPurchases') || '[]'),\r\n    profileAvatar: localStorage.getItem('amexProfileAvatar') || null,\r\n    coupons: {\r\n        'DESCONTO10': { discount: 0.10, description: '10% de desconto' },\r\n        'WELCOME': { discount: 0.15, description: '15% de desconto para novos clientes' },\r\n        'AMEX2024': { discount: 0.20, description: '20% de desconto especial' }\r\n    },\r\n    appliedCoupon: null\r\n};\r\n\r\n// Dados dos produtos\r\n// Refer\u00EAncias em cache para evitar rec\u00E1lculos custosos\r\nconst DOMRefs = {\n    cards: [],\n    cardMap: new Map()\n};\n\nconst AssetUtils = {\n    buildSources(imagePath) {\n        if (!imagePath || typeof imagePath !== 'string') {\n            return null;\n        }\n        const base = imagePath.replace(/\\.[^/.]+$/, '');\n        return {\n            avif: encodeURI(`${base}.avif`),\n            webp: encodeURI(`${base}.webp`),\n            fallback: encodeURI(imagePath)\n        };\n    }\n};\n\nconst PriceRangeUtils = {\n    parse(range) {\n        if (!range || range === 'all') {\n            return { min: 0, max: Infinity };\n        }\n        if (/\\+$/.test(range)) {\n            const value = parseFloat(range.replace('+', ''));\n            return {\n                min: Number.isFinite(value) ? value : 0,\n                max: Infinity\n            };\n        }\n        const parts = range.split('-').map(value => parseFloat(value));\n        const min = Number.isFinite(parts[0]) ? parts[0] : 0;\n        const max = Number.isFinite(parts[1]) ? parts[1] : Infinity;\n        return { min, max };\n    }\n};\n\nconst PWAInstall = {\n    deferredPrompt: null,\n    container: null,\n    installButton: null,\n    dismissButton: null,\n    storageKey: 'amexInstallDismissed',\n\n    init() {\n        if (typeof window === 'undefined') {\n            return;\n        }\n        this.container = document.getElementById('installPrompt');\n        if (!this.container) {\n            return;\n        }\n\n        let dismissed = false;\n        try {\n            dismissed = localStorage.getItem(this.storageKey) === 'true';\n        } catch (error) {\n            console.warn('N\u00E3o foi poss\u00EDvel ler a prefer\u00EAncia de instala\u00E7\u00E3o.', error);\n        }\n        if (dismissed) {\n            return;\n        }\n\n        this.installButton = document.getElementById('installPromptAccept');\n        this.dismissButton = document.getElementById('installPromptDismiss');\n\n        window.addEventListener('beforeinstallprompt', (event) => {\n            event.preventDefault();\n            this.deferredPrompt = event;\n            this.show();\n        });\n\n        window.addEventListener('appinstalled', () => {\n            this.hide(true);\n            this.deferredPrompt = null;\n        });\n\n        if (this.installButton) {\n            this.installButton.addEventListener('click', () => this.install());\n        }\n\n        if (this.dismissButton) {\n            this.dismissButton.addEventListener('click', () => this.hide(true));\n        }\n    },\n\n    show() {\n        if (!this.container) {\n            return;\n        }\n        this.container.hidden = false;\n        this.container.classList.add('visible');\n    },\n\n    hide(permanent = false) {\n        if (this.container) {\n            this.container.classList.remove('visible');\n            this.container.hidden = true;\n        }\n        if (permanent) {\n            try {\n                localStorage.setItem(this.storageKey, 'true');\n            } catch (error) {\n                console.warn('N\u00E3o foi poss\u00EDvel salvar a prefer\u00EAncia de instala\u00E7\u00E3o.', error);\n            }\n        }\n    },\n\n    async install() {\n        if (!this.deferredPrompt) {\n            this.hide();\n            return;\n        }\n        if (this.installButton) {\n            this.installButton.disabled = true;\n        }\n\n        try {\n            this.deferredPrompt.prompt();\n            const choice = await this.deferredPrompt.userChoice;\n            if (choice.outcome === 'accepted') {\n                Utils.showToast('Instala\u00E7\u00E3o iniciada. Obrigado!', 'success');\n                this.hide(true);\n            } else {\n                Utils.showToast('Tudo bem! Voc\u00EA pode instalar mais tarde.', 'info');\n                this.hide(false);\n            }\n        } catch (error) {\n            console.warn('Falha ao iniciar instala\u00E7\u00E3o PWA.', error);\n            Utils.showToast('N\u00E3o foi poss\u00EDvel iniciar a instala\u00E7\u00E3o agora.', 'error');\n            this.hide(false);\n        } finally {\n            if (this.installButton) {\n                this.installButton.disabled = false;\n            }\n            this.deferredPrompt = null;\n        }\n    }\n};\n\nconst profileButtonInitial = typeof document !== 'undefined' ? document.getElementById('profileBtn') : null;\nconst profilePortalUrl = profileButtonInitial ? (profileButtonInitial.dataset.profileUrl || null) : null;\nconst profilePortalTarget = profileButtonInitial ? (profileButtonInitial.dataset.profileTarget || '_blank') : '_blank';\n\r\nconst products = [\r\n    {\r\n        id: 1,\r\n        name: 'VALORANT AIM COLOR',\r\n        description: 'Vers\u00E3o otimizada, super leve e f\u00E1cil de usar',\r\n        prices: [\r\n            { duration: '1 Dia', price: 20.00, stock: 15, paymentUrl: 'https://pag.ae/7_RdWGnKn' },\r\n            { duration: '7 Dias', price: 75.00, stock: 6, paymentUrl: 'https://pag.ae/7_RdWwvTH' },\r\n            { duration: '30 Dias', price: 150.00, stock: 10, paymentUrl: 'https://pag.ae/7_RdW5LS2' },\r\n            { duration: 'Lifetime', price: 375.00, stock: 5, paymentUrl: 'https://pag.ae/7_RdVct7H' }\r\n        ],\r\n        category: 'valorant',\r\n        featured: true,\r\n        inStock: true,\r\n        image: 'Pngs/valorant aim color.png',\r\n        rating: 4.9,\r\n        reviews: 234,\r\n        price: 20.00\r\n    },\r\n    {\r\n        id: 2,\r\n        name: 'VALORANT BYPASS',\r\n        description: 'Corrija de forma r\u00E1pida e pr\u00E1tica os erros do Valorant relacionados ao TPM, Secure Boot e HVCI!',\r\n        prices: [\r\n            { duration: '1 Dia', price: 17.00, stock: 6, paymentUrl: 'https://pag.ae/7_RdXuVGa' },\r\n            { duration: '7 Dias', price: 55.00, stock: 10, paymentUrl: 'https://pag.ae/7_RdXh6B2' },\r\n            { duration: '30 Dias', price: 80.00, stock: 10, paymentUrl: 'https://pag.ae/7_RdX3rps' }\r\n        ],\r\n        category: 'valorant',\r\n        featured: false,\r\n        inStock: true,\r\n        image: 'Pngs/VALORANT BYPASS.png',\r\n        rating: 4.8,\r\n        reviews: 187,\r\n        price: 17.00\r\n    },\r\n    {\r\n        id: 3,\r\n        name: 'VALORANT NFA',\r\n        description: 'Contas NFA verificadas e revisadas manualmente',\r\n        prices: [\r\n            { duration: 'Random 1-10 Skins', price: 7.00, stock: 15, paymentUrl: 'https://pag.ae/7_RqrwrsN' },\r\n            { duration: 'Random 11-20 Skins', price: 13.00, stock: 27, paymentUrl: 'https://pag.ae/7_RqrRuHH' },\r\n            { duration: 'Random 21-30 Skins', price: 17.00, stock: 11, paymentUrl: 'https://pag.ae/7_Rqs5Yba' },\r\n            { duration: 'Random 31-40 Skins', price: 25.00, stock: 0, paymentUrl: null },\r\n            { duration: 'Random 41-50 Skins', price: 30.00, stock: 2, paymentUrl: 'https://pag.ae/7_RqsMzTR' },\r\n            { duration: 'Random 51-80 Skins', price: 35.00, stock: 2, paymentUrl: 'https://pag.ae/7_RqtiT9s' },\r\n            { duration: 'Random 81-100 Skins', price: 40.00, stock: 0, paymentUrl: null },\r\n            { duration: 'Random 100-150 Skins', price: 45.00, stock: 1, paymentUrl: 'https://pag.ae/7_RqtNSm9' },\r\n            { duration: 'Random 150-200 Skins', price: 60.00, stock: 0, paymentUrl: null },\r\n            { duration: '200+ Skins', price: 75.00, stock: 0, paymentUrl: null }\r\n        ],\r\n        category: 'valorant',\r\n        featured: false,\r\n        inStock: true,\r\n        image: 'Pngs/VALORANT NFA.png',\r\n        rating: 4.7,\r\n        reviews: 412,\r\n        price: 7.00\r\n    },\r\n    {\r\n        id: 4,\r\n        name: 'LEAGUEOF',\r\n        description: 'Ferramentas avan\u00E7adas para League of Legends',\r\n        prices: [\r\n            { duration: '7 Dias', price: 75.00, stock: Infinity, paymentUrl: 'https://pag.ae/7_RWGq_B9' },\r\n            { duration: '30 Dias', price: 100.00, stock: Infinity, paymentUrl: 'https://pag.ae/7_RWGUnHP' }\r\n        ],\r\n        category: 'league',\r\n        featured: false,\r\n        inStock: true,\r\n        image: 'Pngs/LEAGUEOFMENU.png',\r\n        rating: 4.6,\r\n        reviews: 158,\r\n        price: 75.00\r\n    },\r\n    {\r\n        id: 5,\r\n        name: 'VALORANT NFA ALEAT\u00D3RIA',\r\n        description: 'Conta Valorant NFA com conte\u00FAdo aleat\u00F3rio',\r\n        prices: [\r\n            { duration: 'Conta Aleat\u00F3ria', price: 5.00, stock: 175, paymentUrl: 'https://pag.ae/7_RWNVFNP' }\r\n        ],\r\n        category: 'valorant',\r\n        featured: false,\r\n        inStock: true,\r\n        image: 'Pngs/VAVAALE.png',\r\n        rating: 4.5,\r\n        reviews: 289,\r\n        price: 5.00\r\n    }\r\n];\r\n\r\nconst productMap = new Map(products.map(product => [product.id, product]));\r\n\r\nfunction cacheProductCards() {\r\n    const cards = Array.from(document.querySelectorAll('.product-card'));\r\n    DOMRefs.cards = cards;\r\n    DOMRefs.cardMap.clear();\r\n\r\n    cards.forEach(card => {\n        const id = parseInt(card.dataset.productId, 10);\n        const product = productMap.get(id);\n        if (!product) {\n            return;\n        }\n\n        DOMRefs.cardMap.set(id, { card, product });\n        card.dataset.searchText = `${product.name} ${product.description} ${product.category}`.toLowerCase();\n        card.dataset.category = product.category || 'uncategorized';\n\n        const basePrice = typeof product.price === 'number'\n            ? product.price\n            : (Array.isArray(product.prices) && product.prices.length ? product.prices[0].price : 0);\n        const hasStock = (() => {\n            if (product.inStock === false) {\n                return false;\n            }\n            if (Array.isArray(product.prices)) {\n                return product.prices.some(option => typeof option.stock !== 'number' || option.stock > 0);\n            }\n            return true;\n        })();\n\n        card.dataset.price = Number.isFinite(basePrice) ? String(basePrice) : '';\n        card.dataset.stock = hasStock ? 'available' : 'out';\n    });\n}\n\r\nfunction ensureProductCache() {\r\n    if (DOMRefs.cards.length === 0) {\r\n        cacheProductCards();\r\n    }\r\n}\r\n\r\n// Utilit\u00E1rios\r\nconst Utils = {\n    formatPrice: (price) => `R$ ${price.toFixed(2).replace('.', ',')}`,\r\n\r\n    openSupportChannel: () => {\r\n        const fallback = () => {\r\n            console.warn('ChatWidget indisponivel, usando fallback para WhatsApp.');\r\n            window.open('https://wa.me/5516992764211?text=Ola%2C%20preciso%20de%20ajuda%20com%20minha%20compra.', '_blank');\r\n        };\r\n\r\n        loadAccountSuite()\r\n            .then((suite) => {\r\n                try {\r\n                    suite.initialize();\r\n                    if (suite.ChatWidget && typeof suite.ChatWidget.open === 'function') {\r\n                        suite.ChatWidget.open();\r\n                    } else {\r\n                        fallback();\r\n                    }\r\n                } catch (error) {\r\n                    console.warn('Falha ao abrir ChatWidget, usando fallback.', error);\r\n                    fallback();\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                console.warn('Nao foi possivel carregar modulo de suporte.', error);\r\n                fallback();\r\n            });\r\n    },\r\n    \r\n    showToast: (message, type = 'info') => {\r\n        const toast = document.createElement('div');\r\n        toast.className = `toast ${type}`;\r\n        toast.innerHTML = `\r\n            <i class=\"toast-icon fas ${type === 'success' ? 'fa-check-circle' : \r\n                                    type === 'error' ? 'fa-exclamation-circle' : \r\n                                    type === 'warning' ? 'fa-exclamation-triangle' : 'fa-info-circle'}\"></i>\r\n            <span class=\"toast-message\">${message}</span>\r\n            <button class=\"toast-close\">&times;</button>\r\n        `;\r\n        \r\n        const container = document.getElementById('toastContainer');\r\n        if (container) {\r\n            while (container.children.length >= 4) {\r\n                container.removeChild(container.firstElementChild);\r\n            }\r\n            container.appendChild(toast);\r\n            \r\n            // Auto remove after 5 seconds\r\n            setTimeout(() => {\r\n                if (toast.parentNode) {\r\n                    toast.remove();\r\n                }\r\n            }, 5000);\r\n            \r\n            // Manual close\r\n            toast.querySelector('.toast-close').addEventListener('click', () => {\r\n                toast.remove();\r\n            });\r\n        }\r\n    },\r\n\r\n    showWelcomeToast: (fullName = '') => {\r\n        const container = document.getElementById('toastContainer');\r\n        if (!container) {\r\n            return;\r\n        }\r\n\r\n        while (container.children.length >= 4) {\r\n            container.removeChild(container.firstElementChild);\r\n        }\r\n\r\n        const toast = document.createElement('div');\r\n        toast.className = 'toast success welcome-toast';\r\n\r\n        const main = document.createElement('div');\r\n        main.className = 'toast-main';\r\n\r\n        const icon = document.createElement('i');\r\n        icon.className = 'toast-icon fas fa-hand-peace';\r\n\r\n        const message = document.createElement('span');\r\n        message.className = 'toast-message';\r\n        const firstName = fullName.trim().split(/\\s+/)[0] || 'amigo';\r\n        message.innerHTML = `<strong>Que bom te ver, ${firstName}!</strong><small>Escolha um atalho para continuar agora mesmo.</small>`;\r\n\r\n        const close = document.createElement('button');\r\n        close.className = 'toast-close';\r\n        close.setAttribute('aria-label', 'Fechar notificacao');\r\n        close.innerHTML = '&times;';\r\n\r\n        main.append(icon, message);\r\n\r\n        const actions = document.createElement('div');\r\n        actions.className = 'toast-actions';\r\n\r\n        const recommendedBtn = document.createElement('button');\r\n        recommendedBtn.className = 'toast-action primary';\r\n        recommendedBtn.innerHTML = '<i class=\"fas fa-star\"></i> Produtos';\r\n\r\n        const cartBtn = document.createElement('button');\r\n        cartBtn.className = 'toast-action secondary';\r\n        cartBtn.innerHTML = '<i class=\"fas fa-shopping-cart\"></i> Carrinho';\r\n\r\n        actions.append(recommendedBtn, cartBtn);\r\n        toast.append(main, actions, close);\r\n        container.appendChild(toast);\r\n\r\n        const removeToast = () => {\r\n            if (toast.parentNode) {\r\n                toast.remove();\r\n            }\r\n        };\r\n\r\n        close.addEventListener('click', removeToast);\r\n\r\n        recommendedBtn.addEventListener('click', () => {\r\n            const productsSection = document.getElementById('produtos');\r\n            if (productsSection) {\r\n                productsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });\r\n            }\r\n            removeToast();\r\n        });\r\n\r\n        cartBtn.addEventListener('click', () => {\r\n            const cartModal = document.getElementById('cartModal');\r\n            if (cartModal) {\r\n                Modal.open('cartModal');\r\n            } else {\r\n                Utils.showToast('Carrinho em breve!', 'info');\r\n            }\r\n            removeToast();\r\n        });\r\n\r\n        setTimeout(removeToast, 8000);\r\n    },\r\n    \r\n    showLoading: (show = true) => {\r\n        const overlay = document.getElementById('loadingOverlay');\r\n        if (overlay) {\r\n            if (show) {\r\n                overlay.classList.add('active');\r\n            } else {\r\n                overlay.classList.remove('active');\r\n            }\r\n        }\r\n    },\r\n    \r\n    saveToStorage: () => {\r\n        localStorage.setItem('amexCart', JSON.stringify(AppState.cart));\r\n        localStorage.setItem('amexFavorites', JSON.stringify(AppState.favorites));\r\n        localStorage.setItem('amexTheme', AppState.theme);\r\n        localStorage.setItem('amexPurchases', JSON.stringify(AppState.purchases || []));\r\n        if (AppState.profileAvatar) {\r\n            localStorage.setItem('amexProfileAvatar', AppState.profileAvatar);\r\n        } else {\r\n            localStorage.removeItem('amexProfileAvatar');\r\n        }\r\n    },\r\n    \r\n    showConfirmModal: (title, message, contacts, warning, onConfirm, onCancel) => {\r\n        // Remover modal existente se houver\r\n        const existingModal = document.getElementById('confirmModal');\r\n        if (existingModal) {\r\n            existingModal.remove();\r\n        }\r\n        \r\n        // Criar modal personalizado\r\n        const modal = document.createElement('div');\r\n        modal.id = 'confirmModal';\r\n        modal.className = 'modal confirm-modal active';\r\n        modal.innerHTML = `\r\n            <div class=\"modal-content confirm-modal-content\">\r\n                <div class=\"confirm-header\">\r\n                    <i class=\"fas fa-exclamation-triangle warning-icon\"></i>\r\n                    <h3>${title}</h3>\r\n                </div>\r\n                \r\n                <div class=\"confirm-body\">\r\n                    <p class=\"confirm-message\">${message}</p>\r\n                    \r\n                    <div class=\"contact-list\">\r\n                        ${contacts.map(contact => `\r\n                            <div class=\"contact-item\">\r\n                                <i class=\"${contact.icon}\" style=\"color: ${contact.color}\"></i>\r\n                                <span>${contact.text}</span>\r\n                            </div>\r\n                        `).join('')}\r\n                    </div>\r\n                    \r\n                    <div class=\"warning-message\">\r\n                        <i class=\"fas fa-exclamation-circle\"></i>\r\n                        <strong>${warning}</strong>\r\n                    </div>\r\n                    \r\n                    <p class=\"confirm-question\">Deseja continuar com a compra?</p>\r\n                </div>\r\n                \r\n                <div class=\"confirm-actions\">\r\n                    <button class=\"btn-cancel\" id=\"confirmCancel\">\r\n                        <i class=\"fas fa-times\"></i>\r\n                        Cancelar\r\n                    </button>\r\n                    <button class=\"btn-confirm\" id=\"confirmOk\">\r\n                        <i class=\"fas fa-check\"></i>\r\n                        Continuar\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        `;\r\n        \r\n        document.body.appendChild(modal);\r\n        \r\n        // Event listeners\r\n        document.getElementById('confirmOk').addEventListener('click', () => {\r\n            modal.remove();\r\n            onConfirm();\r\n        });\r\n        \r\n        document.getElementById('confirmCancel').addEventListener('click', () => {\r\n            modal.remove();\r\n            onCancel();\r\n        });\r\n        \r\n        // Fechar clicando fora\r\n        modal.addEventListener('click', (e) => {\r\n            if (e.target === modal) {\r\n                modal.remove();\r\n                onCancel();\r\n            }\r\n        });\r\n        \r\n        // Fechar com ESC\r\n        const escHandler = (e) => {\r\n            if (e.key === 'Escape') {\r\n                modal.remove();\r\n                onCancel();\r\n                document.removeEventListener('keydown', escHandler);\r\n            }\r\n        };\r\n        document.addEventListener('keydown', escHandler);\r\n    }\r\n};\r\n\r\nlet accountSuitePromise = null;\r\nconst baseAccountSuiteOptions = {\n    autoShowAuth: true,\n    persistAuthOnLogin: false,\r\n    profilePortalUrl,\r\n    profilePortalTarget\r\n};\r\nconst accountSuiteOptions = typeof window !== 'undefined' && window.AmexAccountConfig\r\n    ? { ...baseAccountSuiteOptions, ...window.AmexAccountConfig }\r\n    : baseAccountSuiteOptions;\r\n\r\nfunction loadAccountSuite() {\r\n    if (!accountSuitePromise) {\r\n        accountSuitePromise = import('./scripts/modules/account-suite.js')\r\n            .then(({ initAccountSuite }) => initAccountSuite({ AppState, Utils, Modal }, accountSuiteOptions))\r\n            .catch((error) => {\r\n                accountSuitePromise = null;\r\n                throw error;\r\n            });\r\n    }\r\n    return accountSuitePromise;\r\n}\r\n\r\nfunction parseDurationToDays(label = '') {\r\n    if (!label) {\r\n        return null;\r\n    }\r\n    const normalized = label.toLowerCase();\r\n    const plain = normalized.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\r\n    if (/lifetime|vitalicio|permanente|sem validade/.test(plain)) {\r\n        return null;\r\n    }\r\n    const dayMatch = plain.match(/(\\d+)\\s*(dia|dias)/);\r\n    if (dayMatch) {\r\n        return Number.parseInt(dayMatch[1], 10);\r\n    }\r\n    const weekMatch = plain.match(/(\\d+)\\s*(semana|semanas)/);\r\n    if (weekMatch) {\r\n        return Number.parseInt(weekMatch[1], 10) * 7;\r\n    }\r\n    const monthMatch = plain.match(/(\\d+)\\s*(mes|meses)/);\r\n    if (monthMatch) {\r\n        return Number.parseInt(monthMatch[1], 10) * 30;\r\n    }\r\n    const yearMatch = plain.match(/(\\d+)\\s*(ano|anos)/);\r\n    if (yearMatch) {\r\n        return Number.parseInt(yearMatch[1], 10) * 365;\r\n    }\r\n    return null;\r\n}\r\n\r\nfunction recordPurchase(product, selectedPrice) {\r\n    if (!product || !selectedPrice) {\r\n        return null;\r\n    }\r\n    const now = new Date();\r\n    const days = parseDurationToDays(selectedPrice.duration);\r\n    const expiresAt = days ? new Date(now.getTime() + days * 24 * 60 * 60 * 1000) : null;\r\n\r\n    const useCrypto = typeof crypto !== 'undefined' && typeof crypto.randomUUID === 'function';\r\n    const purchase = {\r\n        id: useCrypto ? crypto.randomUUID() : `${product.id}-${Date.now()}`,\r\n        productId: product.id,\r\n        name: product.name,\r\n        duration: selectedPrice.duration,\r\n        price: selectedPrice.price,\r\n        purchaseDate: now.toISOString(),\r\n        expiresAt: expiresAt ? expiresAt.toISOString() : null\r\n    };\r\n\r\n    if (!Array.isArray(AppState.purchases)) {\r\n        AppState.purchases = [];\r\n    }\r\n    AppState.purchases.unshift(purchase);\r\n    if (AppState.purchases.length > 50) {\r\n        AppState.purchases.length = 50;\r\n    }\r\n    Utils.saveToStorage();\r\n\r\n    loadAccountSuite()\r\n        .then(({ Profile }) => {\r\n            if (Profile && typeof Profile.onPurchaseRecorded === 'function') {\r\n                Profile.onPurchaseRecorded();\r\n            }\r\n        })\r\n        .catch(() => {});\r\n\r\n    return purchase;\r\n}\r\n\r\n// Sistema de Carrinho\r\nconst Cart = {\r\n    add: (productId, priceOption = null) => {\r\n        const product = productMap.get(productId);\r\n        if (!product || !product.inStock) {\r\n            Utils.showToast('Produto indispon\u00EDvel', 'error');\r\n            return;\r\n        }\r\n        \r\n        // Para produtos com m\u00FAltiplas op\u00E7\u00F5es de pre\u00E7o, usar a primeira op\u00E7\u00E3o como padr\u00E3o\r\n        let selectedPrice = priceOption;\r\n        if (!selectedPrice && product.prices && product.prices.length > 0) {\r\n            selectedPrice = product.prices[0];\r\n        }\r\n        \r\n        const itemKey = `${productId}-${selectedPrice ? selectedPrice.duration : 'default'}`;\r\n        const existingItem = AppState.cart.find(item => item.key === itemKey);\r\n        if (existingItem) {\r\n            Utils.showToast('Produto j\u00E1 est\u00E1 no carrinho', 'warning');\r\n            return;\r\n        }\r\n        \r\n        AppState.cart.push({\r\n            id: product.id,\r\n            key: itemKey,\r\n            name: product.name,\r\n            duration: selectedPrice ? selectedPrice.duration : null,\r\n            price: selectedPrice ? selectedPrice.price : (product.price || 0),\r\n            quantity: 1\r\n        });\r\n        \r\n        Cart.updateUI();\r\n        Utils.saveToStorage();\r\n        Utils.showToast('Produto adicionado ao carrinho!', 'success');\r\n    },\r\n    \r\n    remove: (productId) => {\r\n        AppState.cart = AppState.cart.filter(item => item.id !== productId);\r\n        Cart.updateUI();\r\n        Utils.saveToStorage();\r\n        Utils.showToast('Produto removido do carrinho', 'info');\r\n    },\r\n    \r\n    clear: () => {\r\n        AppState.cart = [];\r\n        AppState.appliedCoupon = null;\r\n        Cart.updateUI();\r\n        Utils.saveToStorage();\r\n        Utils.showToast('Carrinho limpo', 'info');\r\n    },\r\n    \r\n    updateUI: () => {\r\n        const cartCount = document.querySelector('.cart-count');\r\n        const cartItems = document.getElementById('cartItems');\r\n        const cartTotal = document.getElementById('cartTotal');\r\n        \r\n        if (cartCount) {\r\n            cartCount.textContent = AppState.cart.length;\r\n        }\r\n        \r\n        if (cartItems) {\r\n            if (AppState.cart.length === 0) {\r\n                cartItems.innerHTML = '<p class=\"empty-cart\">Seu carrinho est\u00E1 vazio</p>';\r\n                if (cartTotal) cartTotal.style.display = 'none';\r\n            } else {\r\n                cartItems.innerHTML = AppState.cart.map(item => `\r\n                    <div class=\"cart-item\">\r\n                        <div class=\"cart-item-info\">\r\n                            <div class=\"cart-item-name\">${item.name}</div>\r\n                            <div class=\"cart-item-price\">${Utils.formatPrice(item.price)}</div>\r\n                        </div>\r\n                        <button class=\"cart-item-remove\" onclick=\"Cart.remove(${item.id})\">\r\n                            <i class=\"fas fa-trash\"></i>\r\n                        </button>\r\n                    </div>\r\n                `).join('');\r\n                \r\n                Cart.updateTotal();\r\n                if (cartTotal) cartTotal.style.display = 'block';\r\n            }\r\n        }\r\n    },\r\n    \r\n    updateTotal: () => {\r\n        const subtotal = AppState.cart.reduce((sum, item) => sum + item.price, 0);\r\n        let discount = 0;\r\n        \r\n        if (AppState.appliedCoupon) {\r\n            discount = subtotal * AppState.appliedCoupon.discount;\r\n        }\r\n        \r\n        const total = subtotal - discount;\r\n        \r\n        const subtotalEl = document.getElementById('subtotal');\r\n        const finalTotalEl = document.getElementById('finalTotal');\r\n        const discountLine = document.getElementById('discountLine');\r\n        const discountAmount = document.getElementById('discountAmount');\r\n        \r\n        if (subtotalEl) subtotalEl.textContent = Utils.formatPrice(subtotal);\r\n        if (finalTotalEl) finalTotalEl.textContent = Utils.formatPrice(total);\r\n        \r\n        if (discountLine && discountAmount) {\r\n            if (discount > 0) {\r\n                discountAmount.textContent = `-${Utils.formatPrice(discount)}`;\r\n                discountLine.style.display = 'flex';\r\n            } else {\r\n                discountLine.style.display = 'none';\r\n            }\r\n        }\r\n    },\r\n    \r\n    applyCoupon: (code) => {\r\n        const coupon = AppState.coupons[code.toUpperCase()];\r\n        if (!coupon) {\r\n            Utils.showToast('Cupom inv\u00E1lido', 'error');\r\n            return;\r\n        }\r\n        \r\n        if (AppState.cart.length === 0) {\r\n            Utils.showToast('Adicione produtos ao carrinho primeiro', 'warning');\r\n            return;\r\n        }\r\n        \r\n        AppState.appliedCoupon = coupon;\r\n        Cart.updateTotal();\r\n        Utils.showToast(`Cupom aplicado: ${coupon.description}`, 'success');\r\n        const couponInput = document.getElementById('couponInput');\r\n        if (couponInput) couponInput.value = '';\r\n    }\r\n};\r\n\r\n// Sistema de Favoritos\r\nconst Favorites = {\r\n    toggle: (productId) => {\r\n        const index = AppState.favorites.indexOf(productId);\r\n        if (index === -1) {\r\n            AppState.favorites.push(productId);\r\n            Utils.showToast('Produto adicionado aos favoritos!', 'success');\r\n        } else {\r\n            AppState.favorites.splice(index, 1);\r\n            Utils.showToast('Produto removido dos favoritos', 'info');\r\n        }\r\n        \r\n        Favorites.updateUI();\r\n        Utils.saveToStorage();\r\n    },\r\n    \r\n    updateUI: () => {\r\n        const favoritesCount = document.querySelector('.favorites-count');\r\n        const favoritesItems = document.getElementById('favoritesItems');\r\n        \r\n        if (favoritesCount) {\r\n            favoritesCount.textContent = AppState.favorites.length;\r\n        }\r\n        \r\n        if (favoritesItems) {\r\n            if (AppState.favorites.length === 0) {\r\n                favoritesItems.innerHTML = '<p class=\"empty-favorites\">Nenhum produto favoritado</p>';\r\n            } else {\r\n                const favoriteProducts = AppState.favorites\r\n                    .map(id => productMap.get(id))\r\n                    .filter(Boolean);\r\n                favoritesItems.innerHTML = favoriteProducts.map(product => {\r\n                    const displayPrice = typeof product.price === 'number'\r\n                        ? product.price\r\n                        : (product.prices && product.prices.length ? product.prices[0].price : 0);\r\n                    return `\r\n                    <div class=\"cart-item\">\r\n                        <div class=\"cart-item-info\">\r\n                            <div class=\"cart-item-name\">${product.name}</div>\r\n                            <div class=\"cart-item-price\">${Utils.formatPrice(displayPrice)}</div>\r\n                        </div>\r\n                        <button class=\"cart-item-remove\" onclick=\"Favorites.toggle(${product.id})\">\r\n                            <i class=\"fas fa-heart-broken\"></i>\r\n                        </button>\r\n                    </div>\r\n                `;\r\n                }).join('');\r\n            }\r\n        }\r\n    }\r\n};\n\nconst FilterState = {\r\n    searchTerm: '',\r\n    category: 'all',\r\n    priceRange: 'all',\r\n    stock: 'all'\r\n};\n\nfunction applyProductVisibility() {\n    ensureProductCache();\n    const {\n        searchTerm,\n        category,\n        priceRange,\n        stock\n    } = FilterState;\n\n    DOMRefs.cards.forEach(card => {\n        const text = card.dataset.searchText || '';\n        const matchesSearch = !searchTerm || text.includes(searchTerm);\n        const matchesCategory = category === 'all' || card.dataset.category === category;\n\n        const id = parseInt(card.dataset.productId, 10);\n        const entry = DOMRefs.cardMap.get(id);\n        const product = entry ? entry.product : null;\n\n        let matchesPrice = true;\n        if (priceRange !== 'all' && product) {\n            const basePrice = typeof product.price === 'number'\n                ? product.price\n                : (Array.isArray(product.prices) && product.prices.length ? product.prices[0].price : 0);\n            const { min, max } = PriceRangeUtils.parse(priceRange);\n            matchesPrice = basePrice >= min && basePrice <= max;\n        }\n\n        let matchesStock = true;\n        if (stock !== 'all' && product) {\n            const hasStock = product.inStock !== false && (\n                !Array.isArray(product.prices) ||\n                product.prices.some(option => typeof option.stock !== 'number' || option.stock > 0)\n            );\n            matchesStock = stock === 'available' ? hasStock : !hasStock;\n        }\n\n        const isVisible = matchesSearch && matchesCategory && matchesPrice && matchesStock;\n        card.style.display = isVisible ? '' : 'none';\n    });\n}\n\n// Sistema de Busca\nconst Highlights = {\n    container: null,\n    init() {\n        this.container = document.getElementById('highlightsGrid');\n        if (!this.container) {\n            return;\n        }\n\n        const ranked = [...products]\n            .filter(product => typeof product.rating === 'number')\n            .sort((a, b) => {\n                if (b.rating === a.rating) {\n                    return (b.reviews || 0) - (a.reviews || 0);\n                }\n                return b.rating - a.rating;\n            })\n            .slice(0, 3);\n\n        this.container.innerHTML = ranked.map(product => {\n            const sources = AssetUtils.buildSources(product.image);\n            const badge = product.rating >= 4.8 ? 'Mais vendidos' : 'Novidade';\n            const description = (product.description || '').split('.').slice(0, 1).join('.').trim();\n            const priceLabel = typeof product.price === 'number'\n                ? `R$ ${product.price.toFixed(2).replace('.', ',')}`\n                : '';\n            return `\n                <article class=\"highlight-card\" data-product-id=\"${product.id}\">\n                    <div class=\"highlight-badge\">${badge}</div>\n                    ${sources ? `\n                        <picture>\n                            <source type=\"image/avif\" srcset=\"${sources.avif}\">\n                            <source type=\"image/webp\" srcset=\"${sources.webp}\">\n                            <img src=\"${sources.fallback}\" alt=\"${product.name}\" class=\"highlight-image\" loading=\"lazy\" decoding=\"async\">\n                        </picture>\n                    ` : ''}\n                    <div class=\"highlight-body\">\n                        <h3>${product.name}</h3>\n                        <div class=\"highlight-meta\">\n                            <span class=\"highlight-rating\"><i class=\"fas fa-star\"></i> ${product.rating.toFixed(1)}</span>\n                            <span class=\"highlight-reviews\">${product.reviews || 0} avalia\u00E7\u00F5es</span>\n                        </div>\n                        ${description ? `<p>${description}</p>` : ''}\n                        <div class=\"highlight-footer\">\n                            ${priceLabel ? `<span class=\"highlight-price\">${priceLabel}</span>` : ''}\n                            <button type=\"button\" class=\"highlight-cta\" data-product-id=\"${product.id}\">\n                                Ver detalhes\n                            </button>\n                        </div>\n                    </div>\n                </article>\n            `;\n        }).join('');\n\n        this.container.querySelectorAll('.highlight-card, .highlight-cta').forEach(element => {\n            const item = element.closest('[data-product-id]');\n            if (!item) {\n                return;\n            }\n            element.addEventListener('click', () => {\n                const id = parseInt(item.dataset.productId, 10);\n                Search.focusProduct(id);\n            });\n        });\n    }\n};\n\nconst CategoryTabs = {\n    container: null,\n    buttons: [],\n    init() {\n        this.container = document.getElementById('categoryTabs');\n        if (!this.container) {\n            return;\n        }\n\n        const categories = Array.from(new Set(products.map(product => product.category))).filter(Boolean).sort();\n        const items = [{ id: 'all', label: 'Todos' }].concat(categories.map(category => ({\n            id: category,\n            label: category.charAt(0).toUpperCase() + category.slice(1)\n        })));\n\n        this.container.innerHTML = items.map(item => `\n            <button type=\"button\" class=\"category-tab\" data-category=\"${item.id}\" aria-pressed=\"false\">${item.label}</button>\n        `).join('');\n\n        this.buttons = Array.from(this.container.querySelectorAll('.category-tab'));\n        this.buttons.forEach(button => {\n            button.addEventListener('click', () => {\n                this.activate(button.dataset.category);\n            });\n        });\n\n        this.activate('all', { skipApply: false });\n    },\n    activate(category, { skipApply = false } = {}) {\n        FilterState.category = category;\n        this.buttons.forEach(button => {\n            const isActive = button.dataset.category === category;\n            button.classList.toggle('active', isActive);\n            button.setAttribute('aria-pressed', isActive ? 'true' : 'false');\n        });\n        if (Filters && typeof Filters.syncCategory === 'function') {\n            Filters.syncCategory(category);\n        }\n        if (!skipApply) {\n            applyProductVisibility();\n        }\n    }\n};\n\nconst Ratings = {\n    render() {\n        ensureProductCache();\n        DOMRefs.cardMap.forEach(({ card, product }) => {\n            if (typeof product.rating !== 'number') {\n                return;\n            }\n\n            const info = card.querySelector('.product-info');\n            if (!info) {\n                return;\n            }\n\n            let ratingContainer = card.querySelector('.product-rating');\n            if (!ratingContainer) {\n                ratingContainer = document.createElement('div');\n                ratingContainer.className = 'product-rating';\n                const heading = info.querySelector('h3');\n                if (heading) {\n                    heading.insertAdjacentElement('afterend', ratingContainer);\n                } else {\n                    info.insertBefore(ratingContainer, info.firstChild);\n                }\n            }\n\n            const reviewsTotal = product.reviews || 0;\n            const badgeLabel = `Avalia\u00E7\u00E3o ${product.rating.toFixed(1)} de ${reviewsTotal} avalia\u00E7\u00F5es`;\n            ratingContainer.innerHTML = `\n                <span class=\"rating-badge\" aria-label=\"${badgeLabel}\">\n                    <i class=\"fas fa-star\"></i> ${product.rating.toFixed(1)}\n                </span>\n                <span class=\"rating-reviews\">${reviewsTotal.toLocaleString('pt-BR')} avalia\u00E7\u00F5es</span>\n            `;\n        });\n    }\n};\nconst Search = {\n    filter: (query = '') => {\n        ensureProductCache();\n        const searchTerm = query.trim().toLowerCase();\n        FilterState.searchTerm = searchTerm;\n        applyProductVisibility();\n\n        const resultsContainer = document.getElementById('searchResults');\n        const matchesFound = [];\n\n        if (!resultsContainer) {\n            return;\n        }\n\n        if (!searchTerm) {\n            resultsContainer.innerHTML = '';\n            resultsContainer.classList.remove('visible');\n            return;\n        }\n\n        const normalizedTerm = searchTerm.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n        products.forEach(product => {\n            if (!product) {\n                return;\n            }\n            const tokens = [\n                product.name,\n                product.category,\n                product.description,\n                ...(product.prices || []).map(price => `${price.duration} ${price.price}`)\n            ]\n                .filter(Boolean)\n                .join(' ')\n                .toLowerCase();\n            const normalizedTokens = tokens.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n            if (normalizedTokens.includes(normalizedTerm)) {\n                matchesFound.push({\n                    id: product.id,\n                    product,\n                    score: normalizedTokens.indexOf(normalizedTerm)\n                });\n            }\n        });\n\n        matchesFound.sort((a, b) => {\n            const ratingDiff = (b.product.rating || 0) - (a.product.rating || 0);\n            if (ratingDiff !== 0) {\n                return ratingDiff;\n            }\n            const reviewsDiff = (b.product.reviews || 0) - (a.product.reviews || 0);\n            if (reviewsDiff !== 0) {\n                return reviewsDiff;\n            }\n            return a.score - b.score;\n        });\n\n        if (matchesFound.length === 0) {\n            resultsContainer.innerHTML = '<div class=\"search-results-empty\">Nenhum produto encontrado.</div>';\n            resultsContainer.classList.add('visible');\n            return;\n        }\n\n        const maxItems = 8;\n        resultsContainer.innerHTML = matchesFound.slice(0, maxItems).map(match => {\n            const { id, product } = match;\n            const priceLabel = typeof product.price === 'number'\n                ? `R$ ${product.price.toFixed(2).replace('.', ',')}`\n                : '';\n            const sources = AssetUtils.buildSources(product.image);\n            const description = (product.description || '').split('.').slice(0, 1).join('.').trim();\n            return `\n                <button type=\"button\" class=\"search-results-item\" data-product-id=\"${id}\">\n                    ${sources ? `\n                        <picture>\n                            <source type=\"image/avif\" srcset=\"${sources.avif}\">\n                            <source type=\"image/webp\" srcset=\"${sources.webp}\">\n                            <img src=\"${sources.fallback}\" alt=\"${product.name}\" class=\"search-result-thumb\" loading=\"lazy\" decoding=\"async\">\n                        </picture>\n                    ` : ''}\n                    <div class=\"item-info\">\n                        <span class=\"item-name\">${product.name}</span>\n                        ${description ? `<span class=\"item-desc\">${description}</span>` : ''}\n                    </div>\n                    <span class=\"item-price\">${priceLabel}</span>\n                </button>\n            `;\n        }).join('');\n\n        resultsContainer.classList.add('visible');\n\n        Array.from(resultsContainer.querySelectorAll('.search-results-item')).forEach(item => {\n            item.addEventListener('click', () => {\n                const productId = parseInt(item.dataset.productId, 10);\n                Search.focusProduct(productId);\n                resultsContainer.classList.remove('visible');\n            });\n        });\n    },\n\n    focusProduct: (productId) => {\n        if (CategoryTabs && typeof CategoryTabs.activate === 'function') {\n            CategoryTabs.activate('all', { skipApply: false });\n        }\n        const card = document.querySelector(`.product-card[data-product-id=\"${productId}\"]`);\n        if (!card) {\n            return;\n        }\n\n        card.scrollIntoView({ behavior: 'smooth', block: 'center' });\n        card.classList.add('search-highlight');\n\n        setTimeout(() => {\n            card.classList.remove('search-highlight');\n        }, 1600);\n    }\n};\n\r\n// Sistema de Filtros\nconst Filters = {\n    panel: null,\n    form: null,\n    categorySelect: null,\n    priceSelect: null,\n    stockSelect: null,\n    toggleButton: null,\n    resetButton: null,\n    overlay: null,\n    activeSummary: null,\n    activeCountLabel: null,\n    toggleCount: null,\n    resizeHandler: null,\n\n    init() {\n        this.panel = document.getElementById('filtersPanel');\n        this.form = document.getElementById('filtersForm');\n        this.categorySelect = document.getElementById('filterCategory');\n        this.priceSelect = document.getElementById('filterPrice');\n        this.stockSelect = document.getElementById('filterStock');\n        this.toggleButton = document.getElementById('filtersToggle');\n        this.resetButton = document.getElementById('filtersReset');\n        this.overlay = document.getElementById('filtersOverlay');\n        this.activeSummary = document.getElementById('filtersActiveSummary');\n        this.activeCountLabel = document.getElementById('filtersActiveCount');\n        this.toggleCount = document.getElementById('filtersToggleCount');\n\n        this.populateCategories();\n\n        if (this.form) {\n            this.form.addEventListener('change', () => this.apply());\n        }\n\n        if (this.toggleButton && this.panel) {\n            this.toggleButton.addEventListener('click', () => {\n                const isOpen = this.panel.classList.toggle('filters-panel--open');\n                this.toggleButton.setAttribute('aria-expanded', isOpen ? 'true' : 'false');\n                if (this.overlay) {\n                    this.overlay.hidden = !isOpen;\n                }\n                if (isOpen && typeof this.panel.focus === 'function') {\n                    this.panel.focus();\n                }\n                this.updatePanelA11y();\n            });\n        }\n\n        if (this.overlay) {\n            this.overlay.addEventListener('click', () => this.close());\n        }\n\n        if (this.resetButton) {\n            this.resetButton.addEventListener('click', () => this.clear());\n        }\n\n        this.apply({ skipToast: true, skipSyncCategory: true });\n        this.updateActiveSummary();\n        this.updatePanelA11y();\n\n        if (typeof window !== 'undefined') {\n            this.resizeHandler = () => this.updatePanelA11y();\n            window.addEventListener('resize', this.resizeHandler);\n        }\n    },\n\n    populateCategories() {\n        if (!this.categorySelect) {\n            return;\n        }\n\n        const categories = Array.from(new Set(\n            products.map(product => product.category).filter(Boolean)\n        )).sort();\n\n        const options = ['<option value=\"all\">Todas</option>'].concat(\n            categories.map(category => `<option value=\"${category}\">${category.charAt(0).toUpperCase()}${category.slice(1)}</option>`)\n        );\n\n        this.categorySelect.innerHTML = options.join('');\n        this.categorySelect.value = FilterState.category || 'all';\n    },\n\n    apply({ skipToast = false, skipSyncCategory = false } = {}) {\n        const previousState = { ...FilterState };\n\n        if (this.categorySelect) {\n            const categoryValue = this.categorySelect.value || 'all';\n            if (FilterState.category !== categoryValue) {\n                FilterState.category = categoryValue;\n                if (!skipSyncCategory && CategoryTabs && typeof CategoryTabs.activate === 'function') {\n                    CategoryTabs.activate(categoryValue, { skipApply: true });\n                }\n            }\n        }\n\n        if (this.priceSelect) {\n            FilterState.priceRange = this.priceSelect.value || 'all';\n        }\n\n        if (this.stockSelect) {\n            FilterState.stock = this.stockSelect.value || 'all';\n        }\n\n        applyProductVisibility();\n        this.updateActiveSummary();\n\n        const hasChanged = previousState.category !== FilterState.category ||\n            previousState.priceRange !== FilterState.priceRange ||\n            previousState.stock !== FilterState.stock;\n\n        if (!skipToast && hasChanged) {\n            Utils.showToast('Filtros atualizados', 'info');\n        }\n\n        if (window.matchMedia('(max-width: 1024px)').matches) {\n            this.close();\n        }\n\n        this.updatePanelA11y();\n    },\n\n    clear() {\n        const hadActive = this.getActiveCount() > 0;\n\n        if (this.categorySelect) {\n            this.categorySelect.value = 'all';\n        }\n        if (this.priceSelect) {\n            this.priceSelect.value = 'all';\n        }\n        if (this.stockSelect) {\n            this.stockSelect.value = 'all';\n        }\n\n        if (CategoryTabs && typeof CategoryTabs.activate === 'function') {\n            CategoryTabs.activate('all', { skipApply: true });\n        }\n\n        this.apply({ skipToast: true, skipSyncCategory: true });\n        if (hadActive) {\n            Utils.showToast('Filtros limpos', 'success');\n        }\n        this.close();\n    },\n\n    close() {\n        if (this.panel) {\n            this.panel.classList.remove('filters-panel--open');\n        }\n        if (this.toggleButton) {\n            this.toggleButton.setAttribute('aria-expanded', 'false');\n        }\n        if (this.overlay) {\n            this.overlay.hidden = true;\n        }\n        this.updatePanelA11y();\n    },\n\n    syncCategory(category) {\n        if (this.categorySelect) {\n            this.categorySelect.value = category || 'all';\n        }\n        this.updateActiveSummary();\n    },\n\n    updateActiveSummary() {\n        const activeCount = this.getActiveCount();\n        if (this.activeSummary && this.activeCountLabel) {\n            if (activeCount === 0) {\n                this.activeSummary.hidden = true;\n            } else {\n                this.activeSummary.hidden = false;\n                this.activeCountLabel.textContent = activeCount === 1\n                    ? '1 filtro ativo'\n                    : `${activeCount} filtros ativos`;\n            }\n        }\n\n        if (this.toggleCount) {\n            if (activeCount === 0) {\n                this.toggleCount.hidden = true;\n            } else {\n                this.toggleCount.hidden = false;\n                this.toggleCount.textContent = activeCount;\n            }\n        }\n    },\n\n    getActiveCount() {\n        let count = 0;\n        if (FilterState.category !== 'all') count += 1;\n        if (FilterState.priceRange !== 'all') count += 1;\n        if (FilterState.stock !== 'all') count += 1;\n        return count;\n    },\n\n    updatePanelA11y() {\n        if (!this.panel) {\n            return;\n        }\n        if (typeof window === 'undefined') {\n            this.panel.setAttribute('aria-hidden', 'false');\n            return;\n        }\n        const isMobile = window.matchMedia('(max-width: 1024px)').matches;\n        const isOpen = this.panel.classList.contains('filters-panel--open');\n        this.panel.setAttribute('aria-hidden', isMobile && !isOpen ? 'true' : 'false');\n        if (!isMobile && this.overlay) {\n            this.overlay.hidden = true;\n        }\n    }\n};\n\r\n// Sistema de Tema\r\nconst Theme = {\r\n    toggle: () => {\r\n        AppState.theme = AppState.theme === 'light' ? 'dark' : 'light';\r\n        Theme.apply();\r\n        Utils.saveToStorage();\r\n        \r\n        const icon = document.querySelector('#themeToggle i');\r\n        if (icon) {\r\n            icon.className = AppState.theme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';\r\n        }\r\n        \r\n        Utils.showToast(`Tema ${AppState.theme === 'dark' ? 'escuro' : 'claro'} ativado`, 'success');\r\n    },\r\n    \r\n    apply: () => {\r\n        if (AppState.theme === 'dark') {\r\n            document.body.classList.add('dark-theme');\r\n        } else {\r\n            document.body.classList.remove('dark-theme');\r\n        }\r\n    }\r\n};\r\n\r\n// Sistema de Modais\r\nconst Modal = {\r\n    open: (modalId) => {\r\n        const modal = document.getElementById(modalId);\r\n        if (modal) {\r\n            modal.classList.add('active');\r\n        }\r\n    },\r\n    \r\n    close: (modalId) => {\r\n        const modal = document.getElementById(modalId);\r\n        if (modal) {\r\n            modal.classList.remove('active');\r\n        }\r\n    }\r\n};\r\n// Bot\u00E3o Voltar ao Topo\r\nconst BackToTop = {\r\n    init: () => {\r\n        const button = document.getElementById('backToTop');\r\n        if (!button) return;\r\n        \r\n        const updateVisibility = () => {\r\n            const shouldShow = window.pageYOffset > 300;\r\n            button.classList.toggle('visible', shouldShow);\r\n        };\r\n\r\n        let ticking = false;\r\n        window.addEventListener('scroll', () => {\r\n            if (!ticking) {\r\n                window.requestAnimationFrame(() => {\r\n                    updateVisibility();\r\n                    ticking = false;\r\n                });\r\n                ticking = true;\r\n            }\r\n        }, { passive: true });\r\n        updateVisibility();\r\n        \r\n        button.addEventListener('click', () => {\r\n            window.scrollTo({\r\n                top: 0,\r\n                behavior: 'smooth'\r\n            });\r\n        });\r\n    }\r\n};\r\n\r\n// Fun\u00E7\u00E3o para adicionar ao carrinho com op\u00E7\u00E3o espec\u00EDfica\r\nfunction addToCartWithOption(productId, priceIndex, buttonElement) {\r\n    const product = productMap.get(productId);\r\n    if (!product || !product.inStock) {\r\n        Utils.showToast('Produto indispon\u00EDvel', 'error');\r\n        return;\r\n    }\r\n    \r\n    if (!product.prices || !product.prices[priceIndex]) {\r\n        Utils.showToast('Op\u00E7\u00E3o de pre\u00E7o inv\u00E1lida', 'error');\r\n        return;\r\n    }\r\n    \r\n    const selectedPrice = product.prices[priceIndex];\r\n    \r\n    // Verificar estoque\r\n    if (typeof selectedPrice.stock === 'number' && selectedPrice.stock <= 0) {\r\n        Utils.showToast('Produto fora de estoque', 'error');\r\n        return;\r\n    }\r\n    \r\n    if (!selectedPrice.paymentUrl) {\r\n        Utils.showToast('Link de pagamento indispon\u00EDvel para esta op\u00E7\u00E3o', 'error');\r\n        return;\r\n    }\r\n    \r\n    // Adicionar loading ao bot\u00E3o\r\n    const button = buttonElement || (typeof event !== 'undefined' ? (event.currentTarget || event.target) : null);\r\n    const originalText = button ? button.innerHTML : '';\r\n    \r\n    if (button) {\r\n        button.innerHTML = '<i class=\"fas fa-spinner fa-spin\"></i> Processando...';\r\n        button.disabled = true;\r\n    }\r\n    \r\n    // Mostrar modal personalizado de confirma\u00E7\u00E3o\r\n    Utils.showConfirmModal(\r\n        'IMPORTANTE - LEIA COM ATEN\u00C7\u00C3O',\r\n        `Ap\u00F3s realizar o pagamento, voc\u00EA DEVE enviar o comprovante para:`,\r\n        [\r\n            { icon: 'fab fa-whatsapp', text: 'WhatsApp: (16) 99276-4211', color: '#25D366' },\r\n            { icon: 'fab fa-discord', text: 'Discord: 9797x', color: '#5865F2' }\r\n        ],\r\n        'Sem o comprovante, seu produto N\u00C3O ser\u00E1 entregue!',\r\n        () => {\r\n            // Callback de confirma\u00E7\u00E3o\r\n            proceedWithPurchase(productId, priceIndex, selectedPrice, button, originalText);\r\n        },\r\n        () => {\r\n            // Callback de cancelamento\r\n            if (button) {\r\n                button.innerHTML = originalText;\r\n                button.disabled = false;\r\n            }\r\n            Utils.showToast('Compra cancelada', 'info');\r\n        }\r\n    );\r\n}\r\n\r\n\r\nif (typeof window !== 'undefined') {\r\n    window.addToCartWithOption = addToCartWithOption;\r\n}\r\n\r\nfunction proceedWithPurchase(productId, priceIndex, selectedPrice, button, originalText) {\r\n    const product = productMap.get(productId);\r\n    \r\n    // Limpar carrinho (apenas 1 produto por compra)\r\n    AppState.cart = [];\r\n    \r\n    // Adicionar produto ao carrinho\r\n    const itemKey = `${productId}-${priceIndex}`;\r\n    AppState.cart.push({\r\n        id: product.id,\r\n        key: itemKey,\r\n        name: `${product.name} (${selectedPrice.duration})`,\r\n        price: selectedPrice.price,\r\n        duration: selectedPrice.duration,\r\n        quantity: 1,\r\n        paymentUrl: selectedPrice.paymentUrl\r\n    });\r\n    \r\n    Cart.updateUI();\r\n    Utils.saveToStorage();\r\n    \r\n    // Mostrar feedback visual melhorado\r\n    if (button) {\r\n        button.innerHTML = '<i class=\"fas fa-check\"></i> Adicionado!';\r\n        button.style.background = '#10b981';\r\n    }\r\n    \r\n    // Mostrar toast e redirecionar automaticamente\r\n    Utils.showToast(`${product.name} (${selectedPrice.duration}) adicionado! Redirecionando para pagamento...`, 'success');\r\n    \r\n    // Redirecionar para a p\u00E1gina de pagamento ap\u00F3s 2 segundos\r\n    setTimeout(() => {\r\n        if (selectedPrice.paymentUrl) {\r\n            window.open(selectedPrice.paymentUrl, '_blank');\r\n            // Restaurar bot\u00E3o ap\u00F3s redirecionamento\r\n            if (button) {\r\n                setTimeout(() => {\r\n                    button.innerHTML = originalText;\r\n                    button.disabled = false;\r\n                    button.style.background = '';\r\n                }, 1000);\r\n            }\r\n        } else if (button) {\r\n            Utils.showToast('Link de pagamento n\u00E3o encontrado', 'error');\r\n            button.innerHTML = originalText;\r\n            button.disabled = false;\r\n            button.style.background = '';\r\n        }\r\n    }, 2000);\r\n}\r\n\r\n// Inicializa\u00E7\u00E3o\r\ndocument.addEventListener('DOMContentLoaded', () => {\n    const ensureAccountSuite = () => loadAccountSuite().then((suite) => {\n        suite.initialize();\n        return suite;\n    });\n\n    cacheProductCards();\n    Filters.init();\n    PWAInstall.init();\n    Highlights.init();\n    CategoryTabs.init();\n    Ratings.render();\n    applyProductVisibility();\n\r\n    if ('requestIdleCallback' in window) {\r\n        requestIdleCallback(() => {\r\n            ensureAccountSuite().catch(() => {});\r\n        });\r\n    } else {\r\n        setTimeout(() => {\r\n            ensureAccountSuite().catch(() => {});\r\n        }, 1200);\r\n    }\r\n\r\n    const profileButton = document.getElementById('profileBtn');\r\n    if (profileButton) {\r\n        let profileWarmed = false;\r\n        const warmupProfile = () => {\r\n            if (profileWarmed) {\r\n                return;\r\n            }\r\n            profileWarmed = true;\r\n            ensureAccountSuite().catch(() => {});\r\n        };\r\n\r\n        const openProfileArea = (event) => {\r\n            warmupProfile();\r\n            const targetUrl = profilePortalUrl;\r\n            if (targetUrl) {\r\n                event.preventDefault();\r\n                if (profilePortalTarget === '_self') {\r\n                    window.location.href = targetUrl;\r\n                } else {\r\n                    const newWindow = window.open(targetUrl, '_blank');\r\n                    if (newWindow) {\r\n                        newWindow.opener = null;\r\n                    } else {\r\n                        Utils.showToast('Permita pop-ups para abrir a area de conta.', 'warning');\r\n                    }\r\n                }\r\n                return;\r\n            }\r\n\r\n            ensureAccountSuite()\r\n                .then(({ Auth }) => {\r\n                    if (!Auth.isAuthenticated() || !AppState.currentUser) {\r\n                        Auth.show('loginForm');\r\n                    } else {\r\n                        Auth.show('accountForm');\r\n                    }\r\n                })\r\n                .catch(() => {\r\n                    Utils.showToast('Nao foi possivel carregar o modulo de conta. Tente novamente.', 'error');\r\n                });\r\n        };\r\n\r\n        profileButton.addEventListener('click', openProfileArea);\r\n        profileButton.addEventListener('pointerenter', warmupProfile, { once: true });\r\n        profileButton.addEventListener('mouseenter', warmupProfile, { once: true });\r\n        profileButton.addEventListener('focus', warmupProfile, { once: true });\r\n    }\r\n\r\n    const supportButton = document.getElementById('supportChatBtn');\r\n    if (supportButton) {\r\n        let chatWarmed = false;\r\n        const warmupChat = () => {\r\n            if (chatWarmed) {\r\n                return;\r\n            }\r\n            chatWarmed = true;\r\n            ensureAccountSuite().catch(() => {});\r\n        };\r\n\r\n        supportButton.addEventListener('pointerenter', warmupChat, { once: true });\r\n        supportButton.addEventListener('mouseenter', warmupChat, { once: true });\r\n\r\n        const preloadChat = (event) => {\r\n            warmupChat();\r\n            event.preventDefault();\r\n            ensureAccountSuite()\r\n                .then(({ ChatWidget }) => {\r\n                    if (ChatWidget && typeof ChatWidget.open === 'function') {\r\n                        ChatWidget.open();\r\n                    } else {\r\n                        Utils.openSupportChannel();\r\n                    }\r\n                })\r\n                .catch(() => Utils.openSupportChannel());\r\n        };\r\n        supportButton.addEventListener('click', preloadChat, { once: true });\r\n    }\r\n    cacheProductCards();\r\n\r\n    // Aplicar tema salvo\r\n    Theme.apply();\r\n    \r\n    // Atualizar UIs\r\n    Cart.updateUI();\r\n    Favorites.updateUI();\r\n    \r\n    // Inicializar bot\u00E3o voltar ao topo\r\n    BackToTop.init();\r\n    \r\n    // Event Listeners\r\n    \r\n    // Busca\r\n    const searchInput = document.getElementById('searchInput');\n    const searchBtn = document.getElementById('searchBtn');\n    const searchResults = document.getElementById('searchResults');\n    const searchContainer = searchInput ? searchInput.closest('.search-container') : null;\n    \n    if (searchInput) {\n        let searchTimeout;\n        searchInput.addEventListener('input', (e) => {\n            clearTimeout(searchTimeout);\n            const value = e.target.value;\n            searchTimeout = setTimeout(() => Search.filter(value), 120);\n        });\n\n        searchInput.addEventListener('focus', () => {\n            if (searchResults && searchInput.value.trim()) {\n                Search.filter(searchInput.value);\n            }\n        });\n\n        searchInput.addEventListener('keydown', (event) => {\n            if (event.key === 'Escape' && searchResults) {\n                searchResults.classList.remove('visible');\n                searchResults.innerHTML = '';\n            } else if (event.key === 'Enter') {\n                event.preventDefault();\n                Search.filter(searchInput.value);\n            }\n        });\n    }\n    \n    if (searchBtn) {\n        searchBtn.addEventListener('click', () => {\n            if (searchInput) {\n                Search.filter(searchInput.value);\n            }\n        });\n    }\n\n    if (searchResults && searchContainer) {\n        document.addEventListener('click', (event) => {\n            if (!searchContainer.contains(event.target)) {\n                searchResults.classList.remove('visible');\n            }\n        });\n    }\n    \r\n    // Tema\r\n    const themeToggle = document.getElementById('themeToggle');\r\n    if (themeToggle) {\r\n        themeToggle.addEventListener('click', Theme.toggle);\r\n    }\r\n    \r\n    // Carrinho\r\n    const cartBtn = document.getElementById('cartBtn');\r\n    const closeCartModal = document.getElementById('closeCartModal');\r\n    const clearCart = document.getElementById('clearCart');\r\n    \r\n    if (cartBtn) cartBtn.addEventListener('click', () => Modal.open('cartModal'));\r\n    if (closeCartModal) closeCartModal.addEventListener('click', () => Modal.close('cartModal'));\r\n    if (clearCart) clearCart.addEventListener('click', Cart.clear);\r\n    \r\n    // Favoritos\r\n    const favoritesBtn = document.getElementById('favoritesBtn');\r\n    const closeFavoritesModal = document.getElementById('closeFavoritesModal');\r\n    \r\n    if (favoritesBtn) favoritesBtn.addEventListener('click', () => Modal.open('favoritesModal'));\r\n    if (closeFavoritesModal) closeFavoritesModal.addEventListener('click', () => Modal.close('favoritesModal'));\r\n\r\n    ensureAccountSuite()\r\n        .then(({ Auth, Onboarding }) => {\r\n            if (Auth.isAuthenticated() && AppState.currentUser) {\r\n                setTimeout(() => {\r\n                    Onboarding.show(AppState.currentUser.name);\r\n                }, 200);\r\n            }\r\n        })\r\n        .catch(() => {});\r\n    \r\n    // Cupons\r\n    const applyCoupon = document.getElementById('applyCoupon');\r\n    if (applyCoupon) {\r\n        applyCoupon.addEventListener('click', () => {\r\n            const couponInput = document.getElementById('couponInput');\r\n            if (couponInput && couponInput.value) {\r\n                Cart.applyCoupon(couponInput.value);\r\n            }\r\n        });\r\n    }\r\n    \r\n    // Checkout\r\n    const checkoutBtn = document.getElementById('checkoutBtn');\r\n    if (checkoutBtn) {\r\n        checkoutBtn.addEventListener('click', () => {\r\n            if (AppState.cart.length === 0) {\r\n                Utils.showToast('Carrinho vazio', 'warning');\r\n                return;\r\n            }\r\n            \r\n            // Pegar o primeiro item do carrinho (s\u00F3 pode ter 1)\r\n            const cartItem = AppState.cart[0];\r\n            if (!cartItem || !cartItem.paymentUrl) {\r\n                Utils.showToast('Link de pagamento n\u00E3o encontrado', 'error');\r\n                return;\r\n            }\r\n            \r\n            // Fechar modal do carrinho primeiro\r\n            Modal.close('cartModal');\r\n            \r\n            // Mostrar modal personalizado de confirma\u00E7\u00E3o\r\n            Utils.showConfirmModal(\r\n                'IMPORTANTE - LEIA COM ATEN\u00C7\u00C3O',\r\n                `Ap\u00F3s realizar o pagamento, voc\u00EA DEVE enviar o comprovante para:`,\r\n                [\r\n                    { icon: 'fab fa-whatsapp', text: 'WhatsApp: (16) 99276-4211', color: '#25D366' },\r\n                    { icon: 'fab fa-discord', text: 'Discord: 9797x', color: '#5865F2' }\r\n                ],\r\n                'Sem o comprovante, seu produto N\u00C3O ser\u00E1 entregue!',\r\n                () => {\r\n                    // Callback de confirma\u00E7\u00E3o\r\n                    Utils.showLoading(true);\r\n                    \r\n                    setTimeout(() => {\r\n                        Utils.showLoading(false);\r\n                        Utils.showToast('Redirecionando para pagamento...', 'success');\r\n                        \r\n                        // Redirecionar para o link de pagamento espec\u00EDfico\r\n                        setTimeout(() => {\r\n                            window.open(cartItem.paymentUrl, '_blank');\r\n                        }, 1000);\r\n                    }, 1000);\r\n                },\r\n                () => {\r\n                    // Callback de cancelamento\r\n                    Utils.showToast('Compra cancelada', 'info');\r\n                }\r\n            );\r\n        });\r\n    }\r\n    \r\n    // Bot\u00F5es de compra\r\n    document.querySelectorAll('.buy-btn:not(.disabled)').forEach((button, index) => {\r\n        button.addEventListener('click', () => {\r\n            const product = products[index];\r\n            if (product && product.inStock) {\r\n                // Adicionar loading state\r\n                const originalText = button.innerHTML;\r\n                button.innerHTML = '<i class=\"fas fa-spinner fa-spin\"></i> Adicionando...';\r\n                button.disabled = true;\r\n                \r\n                setTimeout(() => {\r\n                    Cart.add(product.id);\r\n                    button.innerHTML = originalText;\r\n                    button.disabled = false;\r\n                }, 1000);\r\n            }\r\n        });\r\n    });\r\n    \r\n    // Fechar modais clicando fora\r\n    document.querySelectorAll('.modal').forEach(modal => {\r\n        modal.addEventListener('click', (e) => {\r\n            if (e.target === modal) {\r\n                modal.classList.remove('active');\r\n            }\r\n        });\r\n    });\r\n});\r\n\r\n// C\u00F3digo Konami (Easter Egg)\r\nlet konamiCode = [];\r\nconst konamiSequence = [\r\n    'ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown',\r\n    'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight',\r\n    'KeyB', 'KeyA'\r\n];\r\n\r\ndocument.addEventListener('keydown', (e) => {\r\n    konamiCode.push(e.code);\r\n    \r\n    if (konamiCode.length > konamiSequence.length) {\r\n        konamiCode.shift();\r\n    }\r\n    \r\n    if (JSON.stringify(konamiCode) === JSON.stringify(konamiSequence)) {\r\n        console.log('\uD83C\uDF89 C\u00F3digo Konami ativado!');\r\n        document.body.style.transform = 'rotate(360deg)';\r\n        document.body.style.transition = 'transform 2s ease';\r\n        \r\n        setTimeout(() => {\r\n            document.body.style.transform = '';\r\n            Utils.showToast('\uD83C\uDFAE Easter Egg encontrado! Parab\u00E9ns! \uD83C\uDF89', 'success');\r\n        }, 2000);\r\n        \r\n        konamiCode = [];\r\n    }\r\n});\r\n\r\n// Contar produtos em destaque\r\nconst featuredCount = products.filter(product => product.featured).length;\r\nconsole.log(`${featuredCount} produto(s) em destaque encontrado(s)`);\r\n\r\n// Smooth scroll para links internos\r\ndocument.querySelectorAll('a[href^=\"#\"]').forEach(anchor => {\r\n    anchor.addEventListener('click', function (e) {\r\n        e.preventDefault();\r\n        const target = document.querySelector(this.getAttribute('href'));\r\n        if (target) {\r\n            target.scrollIntoView({\r\n                behavior: 'smooth',\r\n                block: 'start'\r\n            });\r\n        }\r\n    });\r\n});\r\n\r\n// Anima\u00E7\u00E3o de entrada dos cards\r\nconst observerOptions = {\r\n    threshold: 0.1,\r\n    rootMargin: '0px 0px -50px 0px'\r\n};\r\n\r\nconst observer = new IntersectionObserver((entries) => {\r\n    entries.forEach(entry => {\r\n        if (entry.isIntersecting) {\r\n            entry.target.style.opacity = '1';\r\n            entry.target.style.transform = 'translateY(0)';\r\n            observer.unobserve(entry.target);\r\n        }\r\n    });\r\n}, observerOptions);\r\n\r\n// Observar cards de produtos\r\nensureProductCache();\r\nDOMRefs.cards.forEach(card => {\r\n    card.style.opacity = '0';\r\n    card.style.transform = 'translateY(30px)';\r\n    card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';\r\n    observer.observe(card);\r\n});\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],
  "mappings": "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",
  "names": ["account_suite_exports", "__export", "initAccountSuite", "AppState", "Utils", "Modal", "options", "settings", "openProfilePortal", "newWindow", "ChatWidget", "event", "type", "text", "wrapper", "content", "message", "Profile", "Auth", "file", "name", "email", "password", "previousEmail", "user", "userIndex", "loginEmailInput", "isLogged", "canReset", "maxSize", "reader", "element", "fallback", "hasPhoto", "initial", "showToast", "purchases", "purchase", "status", "purchaseDate", "expiresDate", "item", "detailsWrapper", "title", "meta", "icon", "span", "iconEl", "statusEl", "statusIcon", "statusText", "expires", "now", "diffMs", "overdueDays", "remainingDays", "isoDate", "error", "value", "trimmed", "parts", "Onboarding", "card", "target", "button", "node", "reopenBtn", "force", "firstName", "saveState", "selector", "tab", "link", "targetId", "desiredTarget", "activeTab", "offsetLeft", "offsetWidth", "input", "isPassword", "loginForm", "registerForm", "u", "nickname", "newUser", "loginPasswordInput", "form", "isActive", "closeBtn", "initialized", "initialize", "init_account_suite", "__esmMin", "AppState", "DOMRefs", "AssetUtils", "imagePath", "base", "PriceRangeUtils", "range", "value", "parts", "min", "max", "PWAInstall", "dismissed", "error", "event", "permanent", "Utils", "profileButtonInitial", "profilePortalUrl", "profilePortalTarget", "products", "productMap", "product", "cacheProductCards", "cards", "card", "id", "basePrice", "hasStock", "option", "ensureProductCache", "price", "fallback", "loadAccountSuite", "suite", "message", "type", "toast", "container", "fullName", "main", "icon", "firstName", "close", "actions", "recommendedBtn", "cartBtn", "removeToast", "productsSection", "Modal", "show", "overlay", "title", "contacts", "warning", "onConfirm", "onCancel", "existingModal", "modal", "contact", "e", "escHandler", "accountSuitePromise", "baseAccountSuiteOptions", "accountSuiteOptions", "__spreadValues", "initAccountSuite", "Cart", "productId", "priceOption", "product", "productMap", "Utils", "selectedPrice", "itemKey", "AppState", "item", "cartCount", "cartItems", "cartTotal", "subtotal", "sum", "discount", "total", "subtotalEl", "finalTotalEl", "discountLine", "discountAmount", "code", "coupon", "couponInput", "Favorites", "index", "favoritesCount", "favoritesItems", "favoriteProducts", "id", "displayPrice", "FilterState", "applyProductVisibility", "ensureProductCache", "searchTerm", "category", "priceRange", "stock", "DOMRefs", "card", "text", "matchesSearch", "matchesCategory", "entry", "matchesPrice", "basePrice", "min", "max", "PriceRangeUtils", "matchesStock", "hasStock", "option", "isVisible", "Highlights", "ranked", "products", "a", "b", "sources", "AssetUtils", "badge", "description", "priceLabel", "element", "Search", "CategoryTabs", "categories", "items", "button", "skipApply", "isActive", "Filters", "Ratings", "info", "ratingContainer", "heading", "reviewsTotal", "badgeLabel", "query", "resultsContainer", "matchesFound", "normalizedTerm", "normalizedTokens", "price", "ratingDiff", "reviewsDiff", "maxItems", "match", "isOpen", "options", "skipToast", "skipSyncCategory", "previousState", "__spreadValues", "categoryValue", "hasChanged", "hadActive", "activeCount", "count", "isMobile", "Theme", "icon", "Modal", "modalId", "modal", "BackToTop", "updateVisibility", "shouldShow", "ticking", "addToCartWithOption", "priceIndex", "buttonElement", "originalText", "proceedWithPurchase", "ensureAccountSuite", "loadAccountSuite", "suite", "cacheProductCards", "PWAInstall", "profileButton", "profileWarmed", "warmupProfile", "openProfileArea", "event", "targetUrl", "profilePortalUrl", "profilePortalTarget", "newWindow", "Auth", "supportButton", "chatWarmed", "warmupChat", "preloadChat", "ChatWidget", "searchInput", "searchBtn", "searchResults", "searchContainer", "searchTimeout", "e", "value", "themeToggle", "cartBtn", "closeCartModal", "clearCart", "favoritesBtn", "closeFavoritesModal", "Onboarding", "applyCoupon", "checkoutBtn", "cartItem", "konamiCode", "konamiSequence", "featuredCount", "anchor", "target", "observerOptions", "observer", "entries"]
}
