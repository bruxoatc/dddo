{
  "version": 3,
  "sources": ["../../scripts/modules/account-suite.js", "../../scripts/account-page.js"],
  "sourcesContent": ["export function initAccountSuite({ AppState, Utils, Modal }, options = {}) {\n    const settings = {\n        autoShowAuth: options.autoShowAuth !== undefined ? options.autoShowAuth : true,\n        persistAuthOnLogin: options.persistAuthOnLogin === true,\n        profilePortalUrl: typeof options.profilePortalUrl === 'string' && options.profilePortalUrl.trim()\n            ? options.profilePortalUrl.trim()\n            : null,\n        profilePortalTarget: options.profilePortalTarget === '_self' ? '_self' : '_blank'\n    };\n\n    function openProfilePortal() {\n        if (!settings.profilePortalUrl) {\n            return false;\n        }\n\n        if (settings.profilePortalTarget === '_self') {\n            window.location.href = settings.profilePortalUrl;\n            return true;\n        }\n\n        const newWindow = window.open(settings.profilePortalUrl, '_blank');\n        if (newWindow) {\n            newWindow.opener = null;\n            return true;\n        }\n        return false;\n    }\n\n    const ChatWidget = {\n        window: null,\n        body: null,\n        form: null,\r\n        input: null,\r\n        closeBtn: null,\r\n        openBtn: null,\r\n        isOpen: false,\r\n        hasWelcomed: false,\r\n\r\n        init() {\r\n            this.window = document.getElementById('chatWindow');\r\n            this.body = document.getElementById('chatBody');\r\n            this.form = document.getElementById('chatForm');\r\n            this.input = document.getElementById('chatMessage');\r\n            this.closeBtn = document.getElementById('chatCloseBtn');\r\n            this.openBtn = document.getElementById('supportChatBtn');\r\n\r\n            if (!this.window || !this.body) {\r\n                return;\r\n            }\r\n\r\n            if (this.form) {\r\n                this.form.addEventListener('submit', (event) => {\r\n                    event.preventDefault();\r\n                    this.sendMessage();\r\n                });\r\n            }\r\n\r\n            if (this.closeBtn) {\r\n                this.closeBtn.addEventListener('click', () => this.close());\r\n            }\r\n\r\n            if (this.openBtn) {\r\n                this.openBtn.setAttribute('aria-expanded', 'false');\r\n                this.openBtn.addEventListener('click', () => this.toggle());\r\n            }\r\n\r\n            this.window.setAttribute('aria-hidden', 'true');\r\n            this.ensureGreeting();\r\n        },\r\n\r\n        ensureGreeting() {\r\n            if (this.hasWelcomed) {\r\n                return;\r\n            }\r\n            this.appendMessage('bot', 'Ol\u00E1! Sou da equipe Amex Store. Como posso ajudar voc\u00EA hoje?');\n            this.hasWelcomed = true;\r\n        },\r\n\r\n        open() {\r\n            if (!this.window) return;\r\n            this.window.classList.add('active');\r\n            this.window.setAttribute('aria-hidden', 'false');\r\n            this.isOpen = true;\r\n            if (this.openBtn) {\r\n                this.openBtn.classList.add('open');\r\n                this.openBtn.setAttribute('aria-expanded', 'true');\r\n                this.openBtn.setAttribute('aria-label', 'Fechar chat de suporte ao vivo');\r\n            }\r\n            this.ensureGreeting();\r\n            if (this.input) {\r\n                requestAnimationFrame(() => this.input.focus());\r\n            }\r\n            this.scrollToBottom();\r\n        },\r\n\r\n        close() {\r\n            if (!this.window) return;\r\n            this.window.classList.remove('active');\r\n            this.window.setAttribute('aria-hidden', 'true');\r\n            this.isOpen = false;\r\n            if (this.openBtn) {\r\n                this.openBtn.classList.remove('open');\r\n                this.openBtn.setAttribute('aria-expanded', 'false');\r\n                this.openBtn.setAttribute('aria-label', 'Abrir chat de suporte ao vivo');\r\n            }\r\n            if (this.input) {\r\n                this.input.blur();\r\n            }\r\n        },\r\n\r\n        toggle() {\r\n            if (this.isOpen) {\r\n                this.close();\r\n            } else {\r\n                this.open();\r\n            }\r\n        },\r\n\r\n        appendMessage(type, text) {\r\n            if (!this.body) {\r\n                return;\r\n            }\r\n            const wrapper = document.createElement('div');\r\n            wrapper.className = `chat-message ${type}`;\r\n            const content = document.createElement('span');\r\n            content.textContent = text;\r\n            wrapper.appendChild(content);\r\n            this.body.appendChild(wrapper);\r\n            this.scrollToBottom();\r\n        },\r\n\r\n        generateReply(message) {\r\n            const text = message.toLowerCase();\r\n            if (text.includes('prazo') || text.includes('entrega')) {\n                return 'Os produtos digitais s\u00E3o liberados automaticamente ap\u00F3s a confirma\u00E7\u00E3o do pagamento. Se tiver algum atraso, me envie o comprovante.';\n            }\r\n            if (text.includes('garantia') || text.includes('reembolso')) {\r\n                return 'Oferecemos garantia imediata durante o processo de entrega. Assim que receber seus dados, teste e fale conosco se notar algo fora do esperado.';\r\n            }\r\n            if (text.includes('pagamento') || text.includes('pix')) {\n                return 'Aceitamos Pix e alguns cart\u00F5es via parceiros. Ap\u00F3s pagar, envie o comprovante para agilizar a ativa\u00E7\u00E3o.';\n            }\r\n            if (text.includes('contato') || text.includes('whatsapp') || text.includes('discord')) {\r\n                return 'Pode chamar a gente pelo WhatsApp (16) 99276-4211 ou Discord 9797x. Estamos online na maior parte do dia.';\r\n            }\r\n            return 'Entendi! Se precisar de algo espec\u00EDfico, me conte com detalhes e eu te direciono para o melhor caminho.';\n        },\r\n\r\n        sendMessage() {\r\n            if (!this.input) {\r\n                return;\r\n            }\r\n            const message = this.input.value.trim();\r\n            if (!message) {\r\n                return;\r\n            }\r\n            this.appendMessage('user', message);\r\n            this.input.value = '';\r\n\r\n            setTimeout(() => {\r\n                this.appendMessage('bot', this.generateReply(message));\r\n            }, 600);\r\n        },\r\n\r\n        scrollToBottom() {\r\n            if (!this.body) {\r\n                return;\r\n            }\r\n            this.body.scrollTop = this.body.scrollHeight;\r\n        }\r\n    };\r\n\r\n    const Profile = {\r\n        button: null,\r\n        label: null,\r\n        avatar: null,\r\n        modal: null,\r\n        closeBtn: null,\r\n        form: null,\r\n        nameInput: null,\r\n        emailInput: null,\r\n        passwordInput: null,\r\n        summaryName: null,\r\n        summaryEmail: null,\r\n        summaryAvatar: null,\r\n        logoutBtn: null,\r\n        avatarInput: null,\r\n        avatarTrigger: null,\r\n        avatarReset: null,\r\n        historyList: null,\r\n        historyEmpty: null,\r\n        historyRefresh: null,\r\n\r\n        init() {\r\n            this.button = document.getElementById('profileBtn');\r\n            this.label = this.button ? this.button.querySelector('.profile-label') : null;\r\n            this.avatar = this.button ? this.button.querySelector('.profile-avatar') : null;\r\n            this.modal = document.getElementById('profileModal');\r\n            this.closeBtn = document.getElementById('closeProfileModal');\r\n            this.form = document.getElementById('profileForm');\r\n            this.nameInput = document.getElementById('profileName');\r\n            this.emailInput = document.getElementById('profileEmail');\r\n            this.passwordInput = document.getElementById('profilePassword');\r\n            this.summaryName = document.getElementById('profileSummaryName');\r\n            this.summaryEmail = document.getElementById('profileSummaryEmail');\r\n            this.summaryAvatar = document.getElementById('profileSummaryAvatar');\r\n            this.logoutBtn = document.getElementById('logoutBtn');\r\n            this.avatarInput = document.getElementById('profileAvatarInput');\r\n            this.avatarTrigger = document.getElementById('profileAvatarTrigger');\r\n            this.avatarReset = document.getElementById('profileAvatarReset');\r\n            this.historyList = document.getElementById('profileHistoryList');\r\n            this.historyEmpty = document.getElementById('profileHistoryEmpty');\r\n            this.historyRefresh = document.getElementById('profileHistoryRefresh');\r\n\r\n            if (this.button) {\n                if (settings.profilePortalUrl) {\n                    this.button.addEventListener('click', (event) => {\n                        event.preventDefault();\n                        openProfilePortal();\n                    });\n                } else {\n                    this.button.addEventListener('click', () => {\n                        if (!Auth.isAuthenticated() || !AppState.currentUser) {\n                            Auth.show('loginForm');\n                            return;\n                        }\n                        Auth.show('accountForm');\n                    });\n                }\n            }\n\n            if (this.closeBtn) {\n                this.closeBtn.addEventListener('click', () => {\n                    Modal.close('profileModal');\n                    if (settings.persistAuthOnLogin) {\n                        Auth.show('accountForm');\n                    }\n                });\n            }\n\n            if (this.form) {\n                this.form.addEventListener('submit', (event) => {\n                    event.preventDefault();\n                    this.saveProfile();\r\n                });\r\n            }\r\n\r\n            if (this.logoutBtn) {\r\n                this.logoutBtn.addEventListener('click', () => {\r\n                    Modal.close('profileModal');\r\n                    Auth.logout();\r\n                });\r\n            }\r\n\r\n            if (this.avatarTrigger && this.avatarInput) {\r\n                this.avatarTrigger.addEventListener('click', () => {\r\n                    if (!Auth.isAuthenticated() || !AppState.currentUser) {\r\n                        Auth.show('loginForm');\r\n                        return;\r\n                    }\r\n                    this.avatarInput.click();\r\n                });\r\n            }\r\n\r\n            if (this.avatarInput) {\r\n                this.avatarInput.addEventListener('change', (event) => {\r\n                    const file = event.target.files && event.target.files[0];\r\n                    if (!file) {\r\n                        return;\r\n                    }\r\n                    this.handleAvatarFile(file);\r\n                    event.target.value = '';\r\n                });\r\n            }\r\n\r\n            if (this.avatarReset) {\r\n                this.avatarReset.addEventListener('click', () => this.resetAvatar());\r\n            }\r\n\r\n            if (this.historyRefresh) {\r\n                this.historyRefresh.addEventListener('click', () => this.renderPurchases(true));\r\n            }\r\n\r\n            this.updateUI();\r\n            this.renderPurchases();\r\n            this.updateAvatarControls();\r\n        },\r\n\r\n        populateForm() {\r\n            if (!AppState.currentUser) {\r\n                return;\r\n            }\r\n\r\n            if (this.nameInput) {\r\n                this.nameInput.value = AppState.currentUser.name || '';\r\n            }\r\n            if (this.emailInput) {\r\n                this.emailInput.value = AppState.currentUser.email || '';\r\n            }\r\n            if (this.passwordInput) {\r\n                this.passwordInput.value = '';\r\n            }\r\n\r\n            this.updateSummary(AppState.currentUser);\n            this.updateAvatarControls();\n            this.renderPurchases();\r\n        },\r\n\r\n        openModal() {\r\n            if (!Auth.isAuthenticated() || !AppState.currentUser) {\r\n                Auth.show('loginForm');\r\n                return;\r\n            }\r\n            this.populateForm();\r\n            Auth.hide();\r\n            Modal.open('profileModal');\r\n        },\r\n\r\n        saveProfile() {\r\n            if (!AppState.currentUser) {\r\n                Utils.showToast('Faca login para editar o perfil.', 'warning');\r\n                return;\r\n            }\r\n\r\n            const name = (this.nameInput ? this.nameInput.value : '').trim();\r\n            const email = (this.emailInput ? this.emailInput.value : '').trim().toLowerCase();\r\n            const password = (this.passwordInput ? this.passwordInput.value : '').trim();\r\n\r\n            if (!name) {\r\n                Utils.showToast('Informe um nome valido.', 'warning');\r\n                return;\r\n            }\r\n\r\n            if (!email) {\r\n                Utils.showToast('Informe um e-mail valido.', 'warning');\r\n                return;\r\n            }\r\n\r\n            const previousEmail = AppState.currentUser.email;\r\n            if (email !== previousEmail && Auth.users.some(user => user.email === email)) {\r\n                Utils.showToast('Este e-mail ja esta em uso.', 'error');\r\n                return;\r\n            }\r\n\r\n            const userIndex = Auth.users.findIndex(user => user.email === previousEmail);\r\n            if (userIndex === -1) {\r\n                Utils.showToast('Conta nao encontrada. Faca login novamente.', 'error');\r\n                Auth.logout();\r\n                return;\r\n            }\r\n\r\n            Auth.users[userIndex].name = name;\r\n            Auth.users[userIndex].email = email;\r\n            if (password) {\r\n                Auth.users[userIndex].password = password;\r\n            }\r\n            localStorage.setItem('amexUsers', JSON.stringify(Auth.users));\r\n\r\n            AppState.currentUser = { name, email };\r\n            localStorage.setItem('amexCurrentUser', JSON.stringify(AppState.currentUser));\r\n\r\n            const loginEmailInput = document.getElementById('loginEmail');\r\n            if (loginEmailInput) {\r\n                loginEmailInput.value = email;\r\n            }\r\n            if (this.passwordInput) {\r\n                this.passwordInput.value = '';\r\n            }\r\n\r\n            this.updateSummary(AppState.currentUser);\n            this.updateAvatarControls();\n            this.renderPurchases();\r\n            this.updateUI();\r\n            Auth.updateAccountState();\r\n            Utils.showToast('Perfil atualizado com sucesso!', 'success');\r\n        },\r\n\r\n        updateSummary(user) {\n            if (!user) {\n                if (this.summaryName) this.summaryName.textContent = 'Visitante';\n                if (this.summaryEmail) this.summaryEmail.textContent = '---';\n                this.applyAvatarToElement(this.summaryAvatar, '', '?');\n                return;\n            }\n\n            if (this.summaryName) {\n                this.summaryName.textContent = user.name || 'Visitante';\n            }\n            if (this.summaryEmail) {\n                this.summaryEmail.textContent = user.email || '---';\n            }\n            this.applyAvatarToElement(this.summaryAvatar, user.name, '?');\n        },\r\n\r\n        updateUI() {\n            const isLogged = Auth.isAuthenticated() && !!AppState.currentUser;\n\n            if (this.button) {\n                this.button.classList.toggle('logged', isLogged);\n            }\n\n            const name = isLogged && AppState.currentUser ? AppState.currentUser.name : '';\n            if (this.label) {\n                this.label.textContent = isLogged ? this.getFirstName(name) : 'Entrar';\n            }\n\n            this.applyAvatarToElement(this.avatar, name, '?');\n            this.updateSummary(isLogged ? AppState.currentUser : null);\n            this.updateAvatarControls();\n        },\n\n        updateAvatarControls() {\n            if (this.avatarReset) {\n                const canReset = !!AppState.profileAvatar && Auth.isAuthenticated() && !!AppState.currentUser;\n                this.avatarReset.disabled = !canReset;\n            }\n        },\n\n        handleAvatarFile(file) {\n            if (!Auth.isAuthenticated() || !AppState.currentUser) {\n                Auth.show('loginForm');\n                return;\n            }\n\n            const maxSize = 2 * 1024 * 1024;\n            if (!file.type || !file.type.startsWith('image/')) {\n                Utils.showToast('Selecione uma imagem valida.', 'warning');\n                return;\n            }\n            if (file.size > maxSize) {\n                Utils.showToast('Escolha uma imagem menor que 2MB.', 'warning');\n                return;\n            }\n\n            const reader = new FileReader();\n            reader.onload = () => {\n                AppState.profileAvatar = reader.result;\n                Utils.saveToStorage();\n                this.updateUI();\n                Utils.showToast('Foto de perfil atualizada!', 'success');\n            };\n            reader.onerror = () => {\n                Utils.showToast('Nao foi possivel carregar a imagem.', 'error');\n            };\n            reader.readAsDataURL(file);\n        },\n\n        resetAvatar() {\n            if (!Auth.isAuthenticated() || !AppState.currentUser) {\n                Auth.show('loginForm');\n                return;\n            }\n            if (!AppState.profileAvatar) {\n                return;\n            }\n            AppState.profileAvatar = null;\n            Utils.saveToStorage();\n            this.updateUI();\n            Utils.showToast('Foto de perfil removida.', 'info');\n        },\n\n        applyAvatarToElement(element, name = '', fallback = '?') {\n            if (!element) {\n                return;\n            }\n            const hasPhoto = !!AppState.profileAvatar && Auth.isAuthenticated() && !!AppState.currentUser;\n            element.classList.toggle('has-photo', hasPhoto);\n            if (hasPhoto) {\n                element.style.backgroundImage = 'url(' + AppState.profileAvatar + ')';\n                element.style.backgroundSize = 'cover';\n                element.style.backgroundPosition = 'center';\n                element.style.backgroundRepeat = 'no-repeat';\n                element.style.backgroundColor = '#0f1e19';\n                element.textContent = '';\n            } else {\n                element.style.backgroundImage = '';\n                element.style.backgroundSize = '';\n                element.style.backgroundPosition = '';\n                element.style.backgroundRepeat = '';\n                element.style.backgroundColor = '';\n                const initial = this.getInitial(name) || fallback;\n                element.textContent = initial;\n            }\n        },\n\n        renderPurchases(showToast = false) {\n            if (!this.historyList || !this.historyEmpty) {\n                return;\n            }\n\n            const isLogged = Auth.isAuthenticated() && !!AppState.currentUser;\n            const purchases = Array.isArray(AppState.purchases) ? AppState.purchases : [];\n\n            this.historyList.innerHTML = '';\n\n            if (!isLogged) {\n                this.historyEmpty.textContent = 'Entre para visualizar suas compras.';\n                this.historyEmpty.hidden = false;\n                this.historyList.hidden = true;\n                return;\n            }\n\n            if (!purchases.length) {\n                this.historyEmpty.textContent = 'Voce ainda nao realizou nenhuma compra.';\n                this.historyEmpty.hidden = false;\n                this.historyList.hidden = true;\n                return;\n            }\n\n            this.historyEmpty.hidden = true;\n            this.historyList.hidden = false;\n\n            purchases.forEach((purchase) => {\n                const status = this.getPurchaseStatus(purchase);\n                const purchaseDate = this.formatDate(purchase.purchaseDate);\n                const expiresDate = purchase.expiresAt ? this.formatDate(purchase.expiresAt) : 'Sem data de expiracao';\n                const item = document.createElement('li');\n                item.className = 'profile-history-item';\n                const detailsWrapper = document.createElement('div');\n                const title = document.createElement('h5');\n                title.textContent = purchase.name;\n                detailsWrapper.appendChild(title);\n\n                const meta = document.createElement('div');\n                meta.className = 'profile-history-meta';\n\n                [\n                    { icon: 'fa-calendar-alt', text: purchaseDate },\n                    { icon: 'fa-stopwatch', text: purchase.duration || '---' },\n                    { icon: 'fa-wallet', text: Utils.formatPrice(purchase.price || 0) },\n                    { icon: 'fa-hourglass-half', text: expiresDate },\n                ].forEach(({ icon, text }) => {\n                    const span = document.createElement('span');\n                    const iconEl = document.createElement('i');\n                    iconEl.className = 'fas ' + icon;\n                    iconEl.setAttribute('aria-hidden', 'true');\n                    span.appendChild(iconEl);\n                    span.appendChild(document.createTextNode(' ' + text));\n                    meta.appendChild(span);\n                });\n\n                detailsWrapper.appendChild(meta);\n\n                const statusEl = document.createElement('div');\n                statusEl.className = 'profile-history-status ' + status.className;\n                const statusIcon = document.createElement('i');\n                statusIcon.className = 'fas ' + status.icon;\n                statusIcon.setAttribute('aria-hidden', 'true');\n                const statusText = document.createElement('span');\n                statusText.textContent = status.label;\n                statusEl.append(statusIcon, statusText);\n\n                item.append(detailsWrapper, statusEl);\n                this.historyList.appendChild(item);\n            });\n\n            if (showToast) {\n                Utils.showToast('Historico atualizado!', 'info');\n            }\n        },\n\n        getPurchaseStatus(purchase) {\n            if (!purchase || !purchase.expiresAt) {\n                return { label: 'Acesso vitalicio', className: 'permanent', icon: 'fa-infinity' };\n            }\n            const expires = new Date(purchase.expiresAt);\n            if (Number.isNaN(expires.getTime())) {\n                return { label: 'Validade indisponivel', className: 'permanent', icon: 'fa-question-circle' };\n            }\n            const now = new Date();\n            const diffMs = expires.getTime() - now.getTime();\n            if (diffMs <= 0) {\n                const overdueDays = Math.max(1, Math.floor(Math.abs(diffMs) / (1000 * 60 * 60 * 24)));\n                return { label: overdueDays <= 1 ? 'Expirado' : 'Expirado ha ' + overdueDays + ' dias', className: 'expired', icon: 'fa-exclamation-triangle' };\n            }\n            const remainingDays = Math.ceil(diffMs / (1000 * 60 * 60 * 24));\n            if (remainingDays <= 1) {\n                return { label: 'Expira em menos de 24h', className: 'valid', icon: 'fa-clock' };\n            }\n            return { label: 'Expira em ' + remainingDays + ' dias', className: 'valid', icon: 'fa-clock' };\n        },\n\n        formatDate(isoDate) {\n            if (!isoDate) {\n                return '--';\n            }\n            try {\n                return new Intl.DateTimeFormat('pt-BR', { dateStyle: 'short', timeStyle: 'short' }).format(new Date(isoDate));\n            } catch (error) {\n                return new Date(isoDate).toLocaleString('pt-BR');\n            }\n        },\n\n        getInitial(value = '') {\n            const trimmed = value.trim();\r\n            return trimmed ? trimmed.charAt(0).toUpperCase() : '?';\r\n        },\r\n\r\n        getFirstName(value = '') {\r\n            const trimmed = value.trim();\r\n            if (!trimmed) {\r\n                return 'Perfil';\r\n            }\r\n            const parts = trimmed.split(/\\s+/);\r\n            return parts.length ? parts[0] : trimmed;\r\n        },\r\n\r\n        onLogin() {\n            this.updateUI();\n            this.renderPurchases();\n            Auth.updateAccountState();\n        },\n\n        onLogout() {\n            if (this.modal) {\n                Modal.close('profileModal');\n            }\n            if (this.passwordInput) {\n                this.passwordInput.value = '';\n            }\n            this.renderPurchases();\n            this.updateUI();\n            Auth.updateAccountState();\n        },\n\n        onPurchaseRecorded() {\n            this.renderPurchases(true);\n        }\n    };\n\r\n    const Onboarding = {\r\n        element: null,\r\n        closeBtn: null,\r\n        message: null,\r\n        dismissed: false,\r\n\r\n        init() {\r\n            this.element = document.getElementById('onboardingTips');\r\n            if (!this.element) {\r\n                return;\r\n            }\r\n\r\n            this.closeBtn = document.getElementById('closeOnboardingTips');\r\n            this.message = document.getElementById('onboardingMessage');\r\n            this.dismissed = localStorage.getItem('amexOnboardingDismissed') === 'true';\r\n\r\n            if (this.closeBtn) {\r\n                this.closeBtn.addEventListener('click', () => this.hide(true));\r\n            }\r\n\r\n            this.element.querySelectorAll('[data-scroll-target]').forEach(card => {\r\n                const target = card.getAttribute('data-scroll-target');\r\n                if (!target) {\r\n                    return;\r\n                }\r\n\r\n                card.addEventListener('click', (event) => {\r\n                    if (event.target.closest('button')) {\r\n                        return;\r\n                    }\r\n                    this.scrollTo(target);\r\n                    this.hide(false);\r\n                });\r\n\r\n                const button = card.querySelector('button');\r\n                if (button) {\r\n                    button.addEventListener('click', (event) => {\r\n                        event.preventDefault();\r\n                        event.stopPropagation();\r\n                        this.scrollTo(target);\r\n                        this.hide(false);\r\n                    });\r\n                }\r\n            });\r\n\r\n            this.element.querySelectorAll('[data-open-support]').forEach(node => {\r\n                node.addEventListener('click', (event) => {\r\n                    event.preventDefault();\r\n                    event.stopPropagation();\r\n                    Utils.openSupportChannel();\r\n                    this.hide(false);\r\n                });\r\n\r\n                const button = node.querySelector('button');\r\n                if (button) {\r\n                    button.addEventListener('click', (event) => {\r\n                        event.preventDefault();\r\n                        event.stopPropagation();\r\n                        Utils.openSupportChannel();\r\n                        this.hide(false);\r\n                    });\r\n                }\r\n            });\r\n\r\n            const reopenBtn = document.getElementById('accountGuideBtn');\r\n            if (reopenBtn) {\r\n                reopenBtn.addEventListener('click', () => {\r\n                    this.dismissed = false;\r\n                    localStorage.removeItem('amexOnboardingDismissed');\r\n                    Auth.hide();\r\n                    this.show(AppState.currentUser ? AppState.currentUser.name : '', { force: true });\r\n                });\r\n            }\r\n        },\r\n\r\n        show(name = '', options = {}) {\r\n            if (!this.element) {\r\n                return;\r\n            }\r\n\r\n            const force = options.force === true;\r\n            if (force) {\r\n                this.dismissed = false;\r\n            }\r\n\r\n            if (this.dismissed && !force) {\r\n                return;\r\n            }\r\n\r\n            if (this.message) {\r\n                if (name) {\r\n                    const firstName = name.trim().split(/\\s+/)[0] || name;\r\n                    this.message.textContent = `Oi, ${firstName}! Comece com uma destas sugestoes.`;\r\n                } else {\r\n                    this.message.textContent = 'Comece com uma destas sugestoes para aproveitar melhor a loja.';\r\n                }\r\n            }\r\n\r\n            this.element.removeAttribute('hidden');\r\n            this.element.classList.add('visible');\r\n            this.element.setAttribute('aria-hidden', 'false');\r\n\r\n            requestAnimationFrame(() => {\r\n                this.element.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n            });\r\n        },\r\n\r\n        hide(saveState = false) {\r\n            if (!this.element) {\r\n                return;\r\n            }\r\n            this.element.classList.remove('visible');\r\n            this.element.setAttribute('hidden', '');\r\n            this.element.setAttribute('aria-hidden', 'true');\r\n            if (saveState) {\r\n                this.dismissed = true;\r\n                localStorage.setItem('amexOnboardingDismissed', 'true');\r\n            }\r\n        },\r\n\r\n        scrollTo(selector) {\r\n            if (!selector) {\r\n                return;\r\n            }\r\n            const target = document.querySelector(selector);\r\n            if (target) {\r\n                target.scrollIntoView({ behavior: 'smooth', block: 'start' });\r\n            }\r\n        }\r\n    };\r\n\r\n    const Auth = {\r\n        overlay: null,\r\n        tabContainer: null,\r\n        tabIndicator: null,\r\n        tabs: [],\r\n        forms: [],\r\n        users: [],\r\n        activeTabId: 'loginForm',\r\n        handleResize: null,\r\n        accountTab: null,\r\n        loginTab: null,\r\n        registerTab: null,\r\n        accountForm: null,\r\n        accountNameEl: null,\r\n        accountEmailEl: null,\r\n        accountAvatarEl: null,\r\n        accountProfileBtn: null,\r\n        accountLogoutBtn: null,\r\n\r\n        init() {\r\n            this.overlay = document.getElementById('authOverlay');\r\n            if (!this.overlay) return;\r\n\r\n            this.tabContainer = this.overlay.querySelector('.auth-tabs');\r\n            this.tabIndicator = this.overlay.querySelector('.auth-tab-indicator');\r\n            this.tabs = Array.from(this.overlay.querySelectorAll('.auth-tab'));\r\n            this.forms = Array.from(this.overlay.querySelectorAll('.auth-form'));\r\n            this.users = JSON.parse(localStorage.getItem('amexUsers') || '[]');\r\n            this.accountTab = this.overlay.querySelector('.auth-tab.account-tab');\r\n            this.loginTab = this.overlay.querySelector('.auth-tab[data-target=\\\"loginForm\\\"]');\r\n            this.registerTab = this.overlay.querySelector('.auth-tab[data-target=\\\"registerForm\\\"]');\r\n            this.accountForm = document.getElementById('accountForm');\r\n            this.accountNameEl = document.getElementById('accountUserName');\r\n            this.accountEmailEl = document.getElementById('accountUserEmail');\r\n            this.accountAvatarEl = document.getElementById('accountAvatar');\r\n            this.accountProfileBtn = document.getElementById('accountProfileBtn');\r\n            this.accountLogoutBtn = document.getElementById('accountLogoutBtn');\r\n            this.activeTabId = 'loginForm';\r\n            if (this.tabContainer) {\r\n                this.tabContainer.setAttribute('data-tab-count', '2');\r\n            }\r\n\r\n            if (this.handleResize) {\r\n                window.removeEventListener('resize', this.handleResize);\r\n            }\r\n            this.handleResize = () => this.moveIndicatorTo(this.activeTabId);\r\n            window.addEventListener('resize', this.handleResize);\r\n\r\n            this.bindTabEvents();\n            this.bindFormEvents();\n            this.bindPasswordToggle();\n            this.bindAccountActions();\n            this.updateAccountState();\n\n            const isLogged = this.isAuthenticated() && !!AppState.currentUser;\n            if (isLogged) {\n                Profile.onLogin();\n                this.activate('accountForm');\n                if (settings.persistAuthOnLogin) {\n                    this.show('accountForm');\n                } else {\n                    this.hide();\n                }\n            } else {\n                Profile.onLogout();\n                this.activate('loginForm');\n                if (settings.autoShowAuth || settings.persistAuthOnLogin) {\n                    this.show('loginForm');\n                } else {\n                    this.hide();\n                }\n            }\n        },\n\r\n        bindTabEvents() {\r\n            this.tabs.forEach(tab => {\r\n                tab.addEventListener('click', () => {\r\n                    const target = tab.dataset.target;\r\n                    if (target === 'accountForm' && !this.isAuthenticated()) {\r\n                        this.activate('loginForm');\r\n                        return;\r\n                    }\r\n                    this.activate(target);\r\n                });\r\n            });\r\n\r\n            this.overlay.querySelectorAll('.auth-switch a').forEach(link => {\r\n                link.addEventListener('click', (event) => {\r\n                    event.preventDefault();\r\n                    const target = link.dataset.target;\r\n                    if (target) {\r\n                        this.activate(target);\r\n                    }\r\n                });\r\n            });\r\n        },\r\n\r\n        moveIndicatorTo(targetId) {\r\n            if (!this.tabIndicator || !this.tabContainer) {\r\n                return;\r\n            }\r\n\r\n            const desiredTarget = targetId || this.activeTabId || 'loginForm';\r\n            const activeTab = this.tabContainer.querySelector(`.auth-tab[data-target=\\\"${desiredTarget}\\\"]`);\r\n\r\n            if (!activeTab || activeTab.offsetParent === null) {\r\n                this.tabIndicator.style.opacity = '0';\r\n                return;\r\n            }\r\n\r\n            window.requestAnimationFrame(() => {\r\n                const { offsetLeft, offsetWidth } = activeTab;\r\n                this.tabIndicator.style.opacity = '1';\r\n                this.tabIndicator.style.transform = `translateX(${offsetLeft}px)`;\r\n                this.tabIndicator.style.width = `${offsetWidth}px`;\r\n            });\r\n        },\r\n\r\n        bindPasswordToggle() {\r\n            this.overlay.querySelectorAll('.toggle-password').forEach(button => {\r\n                button.addEventListener('click', () => {\r\n                    const input = document.getElementById(button.dataset.target);\r\n                    if (!input) return;\r\n                    const isPassword = input.type === 'password';\r\n                    input.type = isPassword ? 'text' : 'password';\r\n                    button.innerHTML = isPassword\r\n                        ? '<i class=\\\"fas fa-eye-slash\\\"></i>'\r\n                        : '<i class=\\\"fas fa-eye\\\"></i>';\r\n                });\r\n            });\r\n        },\r\n\r\n        bindAccountActions() {\n            if (this.accountProfileBtn) {\n                this.accountProfileBtn.addEventListener('click', (event) => {\n                    if (settings.profilePortalUrl) {\n                        event.preventDefault();\n                        openProfilePortal();\n                        return;\n                    }\n                    Profile.openModal();\n                });\n            }\n\n            if (this.accountLogoutBtn) {\n                this.accountLogoutBtn.addEventListener('click', () => {\n                    this.logout();\n                });\r\n            }\r\n        },\r\n\r\n        bindFormEvents() {\r\n            const loginForm = document.getElementById('loginForm');\r\n            const registerForm = document.getElementById('registerForm');\r\n\r\n            if (loginForm) {\r\n                loginForm.addEventListener('submit', (event) => {\r\n                    event.preventDefault();\r\n                    const email = loginForm.querySelector('#loginEmail').value.trim().toLowerCase();\r\n                    const password = loginForm.querySelector('#loginPassword').value;\r\n                    const user = this.users.find(u => u.email === email && u.password === password);\r\n\r\n                    if (!user) {\r\n                        Utils.showToast('Credenciais invalidas. Verifique e tente novamente.', 'error');\r\n                        return;\r\n                    }\r\n\r\n                    localStorage.setItem('amexAuth', 'true');\r\n                    AppState.currentUser = { name: user.name, email: user.email };\n                    localStorage.setItem('amexCurrentUser', JSON.stringify(AppState.currentUser));\n\n                    Profile.onLogin();\n                    loginForm.reset();\n                    if (settings.persistAuthOnLogin) {\n                        this.activate('accountForm');\n                        this.show('accountForm');\n                    } else {\n                        this.hide();\n                    }\n\n                    setTimeout(() => {\n                        Utils.showWelcomeToast(user.name);\n                        const pending = sessionStorage.getItem('amexPendingOnboardingName');\n                        if (pending) {\n                            Onboarding.show(user.name, { force: true });\r\n                            sessionStorage.removeItem('amexPendingOnboardingName');\r\n                        } else {\r\n                            Onboarding.show(user.name);\r\n                        }\r\n                    }, 200);\r\n                });\r\n            }\r\n\r\n            if (registerForm) {\r\n                registerForm.addEventListener('submit', (event) => {\r\n                    event.preventDefault();\r\n                    const nickname = registerForm.querySelector('#registerName').value.trim();\r\n                    if (!nickname) {\r\n                        Utils.showToast('Informe um nome de usuario valido.', 'warning');\r\n                        return;\r\n                    }\r\n                    const email = registerForm.querySelector('#registerEmail').value.trim().toLowerCase();\r\n                    const password = registerForm.querySelector('#registerPassword').value;\r\n\r\n                    if (password.length < 6) {\r\n                        Utils.showToast('A senha deve ter pelo menos 6 caracteres.', 'warning');\r\n                        return;\r\n                    }\r\n\r\n                    if (this.users.some(u => u.email === email)) {\r\n                        Utils.showToast('Ja existe uma conta com este e-mail.', 'error');\r\n                        this.activate('loginForm');\r\n                        return;\r\n                    }\r\n\r\n                    const newUser = { name: nickname, email, password };\r\n                    this.users.push(newUser);\r\n                    localStorage.setItem('amexUsers', JSON.stringify(this.users));\r\n                    sessionStorage.setItem('amexPendingOnboardingName', nickname);\r\n                    localStorage.removeItem('amexOnboardingDismissed');\r\n                    Utils.showToast('Cadastro realizado com sucesso, ' + nickname + '! Agora faca login.', 'success');\r\n                    registerForm.reset();\r\n                    this.activate('loginForm');\r\n                    const loginEmailInput = document.getElementById('loginEmail');\r\n                    if (loginEmailInput) {\r\n                        loginEmailInput.value = email;\r\n                        loginEmailInput.focus();\r\n                    }\r\n                    const loginPasswordInput = document.getElementById('loginPassword');\r\n                    if (loginPasswordInput) {\r\n                        loginPasswordInput.value = '';\r\n                    }\r\n                });\r\n            }\r\n        },\r\n\r\n        activate(targetId = 'loginForm') {\r\n            const isLogged = this.isAuthenticated() && !!AppState.currentUser;\r\n            if (targetId === 'accountForm' && !isLogged) {\r\n                targetId = 'loginForm';\r\n            }\r\n            if (isLogged && (targetId === 'loginForm' || targetId === 'registerForm')) {\r\n                targetId = 'accountForm';\r\n            }\r\n\r\n            this.activeTabId = targetId;\r\n\r\n            this.forms.forEach(form => {\r\n                const isActive = form.id === targetId;\r\n                form.classList.toggle('active', isActive);\r\n                form.toggleAttribute('hidden', !isActive);\r\n                form.setAttribute('aria-hidden', isActive ? 'false' : 'true');\r\n            });\r\n            this.tabs.forEach(tab => {\r\n                const isActive = tab.dataset.target === targetId;\r\n                tab.classList.toggle('active', isActive);\r\n                tab.setAttribute('aria-selected', isActive ? 'true' : 'false');\r\n                tab.setAttribute('tabindex', isActive ? '0' : '-1');\r\n            });\r\n\r\n            this.moveIndicatorTo(targetId);\r\n        },\r\n\r\n        show(targetId = 'loginForm') {\r\n            const isLogged = this.isAuthenticated() && !!AppState.currentUser;\r\n            if (targetId === 'accountForm' && !isLogged) {\r\n                targetId = 'loginForm';\r\n            }\r\n            if (isLogged && (targetId === 'loginForm' || targetId === 'registerForm')) {\r\n                targetId = 'accountForm';\r\n            }\r\n            this.updateAccountState();\n            this.updateCloseButton();\n            this.activate(targetId);\n            if (document.body.classList.contains('account-standalone')) {\n                document.body.classList.remove('auth-locked');\n            } else {\n                document.body.classList.add('auth-locked');\n            }\n            this.overlay.classList.add('active');\n        },\n\r\n        hide() {\r\n            document.body.classList.remove('auth-locked');\r\n            this.overlay.classList.remove('active');\r\n        },\r\n\r\n        logout() {\r\n            localStorage.removeItem('amexAuth');\r\n            localStorage.removeItem('amexCurrentUser');\r\n            AppState.currentUser = null;\r\n            Profile.onLogout();\r\n            this.show('loginForm');\r\n            Utils.showToast('Sessao encerrada. Faca login para continuar.', 'info');\r\n        },\r\n\r\n        updateCloseButton() {\r\n            const closeBtn = document.getElementById('authModalClose');\r\n            if (!closeBtn) {\r\n                return;\r\n            }\r\n            const isLogged = this.isAuthenticated() && !!AppState.currentUser;\r\n            closeBtn.classList.toggle('visible', isLogged);\r\n            closeBtn.setAttribute('aria-hidden', isLogged ? 'false' : 'true');\r\n            closeBtn.removeEventListener('click', this.handleCloseClick);\r\n            if (isLogged) {\r\n                closeBtn.addEventListener('click', this.handleCloseClick);\r\n            }\r\n        },\r\n\r\n        handleCloseClick: () => {\r\n            Auth.hide();\r\n        },\r\n\r\n        updateAccountState() {\r\n            const isLogged = this.isAuthenticated() && !!AppState.currentUser;\r\n\r\n            if (this.accountTab) {\r\n                this.accountTab.classList.toggle('visible', isLogged);\r\n                this.accountTab.setAttribute('aria-hidden', isLogged ? 'false' : 'true');\r\n                this.accountTab.toggleAttribute('disabled', !isLogged);\r\n                this.accountTab.toggleAttribute('hidden', !isLogged);\r\n                this.accountTab.setAttribute('tabindex', isLogged && this.accountTab.classList.contains('active') ? '0' : '-1');\r\n                if (!isLogged) {\r\n                    this.accountTab.blur();\r\n                }\r\n            }\r\n            if (this.loginTab) {\r\n                this.loginTab.classList.toggle('hidden', isLogged);\r\n                this.loginTab.setAttribute('aria-hidden', isLogged ? 'true' : 'false');\r\n                this.loginTab.toggleAttribute('hidden', isLogged);\r\n            }\r\n            if (this.registerTab) {\r\n                this.registerTab.classList.toggle('hidden', isLogged);\r\n                this.registerTab.setAttribute('aria-hidden', isLogged ? 'true' : 'false');\r\n                this.registerTab.toggleAttribute('hidden', isLogged);\r\n            }\r\n\r\n            if (this.tabContainer) {\r\n                this.tabContainer.setAttribute('data-tab-count', isLogged ? '3' : '2');\r\n            }\r\n\r\n            if (this.accountForm) {\r\n                this.accountForm.classList.toggle('available', isLogged);\r\n                this.accountForm.setAttribute('aria-hidden', isLogged ? 'false' : 'true');\r\n                this.accountForm.toggleAttribute('hidden', !isLogged);\r\n                if (!isLogged && this.accountForm.classList.contains('active')) {\r\n                    this.activate('loginForm');\r\n                }\r\n            }\r\n\r\n            if (this.accountNameEl) {\r\n                this.accountNameEl.textContent = isLogged && AppState.currentUser\r\n                    ? AppState.currentUser.name\r\n                    : 'Visitante';\r\n            }\r\n\r\n            if (this.accountEmailEl) {\r\n                this.accountEmailEl.textContent = isLogged && AppState.currentUser\r\n                    ? AppState.currentUser.email\r\n                    : '---';\r\n            }\r\n\r\n            if (this.accountAvatarEl) {\r\n                const name = isLogged && AppState.currentUser ? AppState.currentUser.name : '';\r\n                const initial = name ? name.trim().charAt(0).toUpperCase() : '?';\r\n                this.accountAvatarEl.textContent = initial || '?';\r\n            }\r\n            this.updateCloseButton();\r\n            this.moveIndicatorTo(this.activeTabId);\r\n        },\r\n\r\n        isAuthenticated() {\r\n            return localStorage.getItem('amexAuth') === 'true';\r\n        }\r\n    };\r\n\r\n    let initialized = false;\r\n\r\n    function initialize() {\r\n        if (initialized) {\r\n            return;\r\n        }\r\n        initialized = true;\r\n        ChatWidget.init();\r\n        Onboarding.init();\r\n        Profile.init();\r\n        Auth.init();\r\n    }\r\n\r\n    return {\r\n        ChatWidget,\r\n        Profile,\r\n        Auth,\r\n        Onboarding,\r\n        initialize,\r\n        isInitialized: () => initialized\r\n    };\r\n}\r\n\r\n\r\n\r\n\r\n\r\n", "import { initAccountSuite } from './modules/account-suite.js';\n\nconst AppState = {\n    cart: JSON.parse(localStorage.getItem('amexCart')) || [],\n    favorites: JSON.parse(localStorage.getItem('amexFavorites')) || [],\n    theme: localStorage.getItem('amexTheme') || 'light',\n    currentUser: JSON.parse(localStorage.getItem('amexCurrentUser')) || null,\n    purchases: JSON.parse(localStorage.getItem('amexPurchases') || '[]'),\n    profileAvatar: localStorage.getItem('amexProfileAvatar') || null\n};\n\nconst Utils = {\n    formatPrice: (price) => {\n        const value = Number.parseFloat(price || 0);\n        return `R$ ${value.toFixed(2).replace('.', ',')}`;\n    },\n\n    openSupportChannel: () => {\n        window.open('https://wa.me/5516992764211?text=Ola%2C%20preciso%20de%20ajuda%20com%20minha%20conta.', '_blank');\n    },\n\n    showToast: (message, type = 'info') => {\n        const toast = document.createElement('div');\n        toast.className = `toast ${type}`;\n        toast.innerHTML = `\n            <i class=\"toast-icon fas ${type === 'success' ? 'fa-check-circle' :\n            type === 'error' ? 'fa-exclamation-circle' :\n            type === 'warning' ? 'fa-exclamation-triangle' : 'fa-info-circle'}\"></i>\n            <span class=\"toast-message\">${message}</span>\n            <button class=\"toast-close\" type=\"button\" aria-label=\"Fechar notifica&ccedil;&atilde;o\">&times;</button>\n        `;\n\n        const container = document.getElementById('toastContainer');\n        if (!container) {\n            return;\n        }\n\n        while (container.children.length >= 4) {\n            container.removeChild(container.firstElementChild);\n        }\n        container.appendChild(toast);\n\n        const removeToast = () => {\n            if (toast.parentNode) {\n                toast.remove();\n            }\n        };\n\n        toast.querySelector('.toast-close')?.addEventListener('click', removeToast);\n        setTimeout(removeToast, 6000);\n    },\n\n    showWelcomeToast: (fullName = '') => {\n        const firstName = (fullName || '').trim().split(/\\s+/)[0] || 'Amigo';\n        Utils.showToast(`Bem-vindo de volta, ${firstName}!`, 'success');\n    },\n\n    saveToStorage: () => {\n        localStorage.setItem('amexCart', JSON.stringify(AppState.cart || []));\n        localStorage.setItem('amexFavorites', JSON.stringify(AppState.favorites || []));\n        localStorage.setItem('amexTheme', AppState.theme || 'light');\n        localStorage.setItem('amexPurchases', JSON.stringify(AppState.purchases || []));\n        if (AppState.profileAvatar) {\n            localStorage.setItem('amexProfileAvatar', AppState.profileAvatar);\n        } else {\n            localStorage.removeItem('amexProfileAvatar');\n        }\n    }\n};\n\nconst Modal = {\n    open: (modalId) => {\n        const modal = document.getElementById(modalId);\n        if (modal) {\n            modal.classList.add('active');\n            modal.hidden = false;\n        }\n    },\n    close: (modalId) => {\n        const modal = document.getElementById(modalId);\n        if (modal) {\n            modal.classList.remove('active');\n            modal.hidden = true;\n        }\n    }\n};\n\nconst applyTheme = () => {\n    if (AppState.theme === 'dark') {\n        document.body.classList.add('dark-theme');\n    } else {\n        document.body.classList.remove('dark-theme');\n    }\n};\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    applyTheme();\n\n    const suite = initAccountSuite({ AppState, Utils, Modal }, {\n        autoShowAuth: false,\n        persistAuthOnLogin: false,\n        profilePortalUrl: null,\n        profilePortalTarget: '_self'\n    });\n    suite.initialize();\n\n    const { Profile, Auth } = suite;\n\n    if (Auth?.hide) {\n        Auth.hide();\n    }\n\n    const guards = Array.from(document.querySelectorAll('[data-auth-guard]'));\n    const actionButtons = Array.from(document.querySelectorAll('[data-action]'));\n\n    const getFirstName = (name = '') => {\n        const trimmed = name.trim();\n        if (!trimmed) return '';\n        return trimmed.split(/\\s+/)[0];\n    };\n\n    const applyGuards = (logged) => {\n        guards.forEach((element) => {\n            const guard = element.dataset.authGuard;\n            const shouldShow = guard === 'auth' ? logged : !logged;\n            element.classList.toggle('guard-hidden', !shouldShow);\n            element.setAttribute('aria-hidden', shouldShow ? 'false' : 'true');\n        });\n    };\n\n    const updateChecklist = ({ logged = false, hasPurchases = false, hasActive = false } = {}) => {\n        const container = document.getElementById('postPurchaseChecklist');\n        if (!container) {\n            return;\n        }\n\n        const setState = (step, completed) => {\n            const item = container.querySelector(`[data-step=\"${step}\"]`);\n            if (!item) {\n                return;\n            }\n            item.dataset.state = completed ? 'complete' : 'pending';\n            const status = item.querySelector('[data-status]');\n            if (status) {\n                status.textContent = completed ? 'Conclu\u00EDdo' : 'Pendente';\n            }\n        };\n\n        setState('login', logged);\n        setState('download', hasPurchases);\n        setState('activate', hasActive);\n        setState('support', false);\n    };\n\n    const updateDashboardStats = (logged = false) => {\n        const totalEl = document.getElementById('dashboardStatTotal');\n        const activeEl = document.getElementById('dashboardStatActive');\n        const nextEl = document.getElementById('dashboardStatNext');\n        const nextLabelEl = document.getElementById('dashboardStatNextLabel');\n        const favoritesEl = document.getElementById('dashboardStatFavorites');\n        const statusEl = document.getElementById('dashboardStatus');\n\n        if (!Profile) {\n            return;\n        }\n\n        const purchases = Array.isArray(AppState.purchases) ? [...AppState.purchases] : [];\n        const now = Date.now();\n        const dayMs = 1000 * 60 * 60 * 24;\n\n        const statuses = purchases.map((purchase) => Profile.getPurchaseStatus\n            ? Profile.getPurchaseStatus(purchase)\n            : { className: 'valid' });\n\n        const activePurchases = purchases.filter((purchase, index) => statuses[index]?.className !== 'expired');\n        const upcomingExpirations = purchases\n            .filter((purchase) => purchase.expiresAt)\n            .map((purchase) => {\n                const expiresAt = new Date(purchase.expiresAt);\n                return {\n                    purchase,\n                    diffMs: expiresAt.getTime() - now\n                };\n            })\n            .filter(({ diffMs }) => diffMs > 0)\n            .sort((a, b) => a.diffMs - b.diffMs);\n\n        const nextExpiration = upcomingExpirations[0] || null;\n        let nextValue = '--';\n        let nextLabel = 'Nenhuma expiracao proxima.';\n        if (nextExpiration) {\n            const days = Math.ceil(nextExpiration.diffMs / dayMs);\n            nextValue = days <= 1 ? '<24h' : `${days}d`;\n            nextLabel = days <= 1\n                ? 'Expira em menos de 24 horas.'\n                : `Renove em ate ${days} dias.`;\n        }\n\n        if (totalEl) totalEl.textContent = purchases.length.toString();\n        if (activeEl) activeEl.textContent = activePurchases.length.toString();\n        if (nextEl) nextEl.textContent = nextValue;\n        if (nextLabelEl) nextLabelEl.textContent = nextLabel;\n\n        const favoritesCount = Array.isArray(AppState.favorites) ? AppState.favorites.length : 0;\n        if (favoritesEl) favoritesEl.textContent = favoritesCount.toString();\n\n        if (statusEl) {\n            if (purchases.length === 0) {\n                statusEl.textContent = activePurchases.length ? 'Cliente ativo' : (logged ? 'Conta cadastrada' : 'Conta convidada');\n            } else if (activePurchases.length > 0) {\n                statusEl.textContent = 'Cliente ativo';\n            } else {\n                statusEl.textContent = 'Ultimas compras expiradas';\n            }\n        }\n\n        updateChecklist({\n            logged,\n            hasPurchases: purchases.length > 0,\n            hasActive: activePurchases.length > 0\n        });\n    };\n\n    const applyDashboardState = () => {\n        const logged = Auth?.isAuthenticated() && !!AppState.currentUser;\n        applyGuards(!!logged);\n\n        const nameEl = document.getElementById('dashboardUserName');\n        const emailEl = document.getElementById('dashboardUserEmail');\n        const avatarEl = document.getElementById('dashboardAvatar');\n        const statusChip = document.getElementById('dashboardStatus');\n\n        if (!logged) {\n            if (nameEl) nameEl.textContent = 'Ola, visitante';\n            if (emailEl) emailEl.textContent = 'Entre para visualizar suas informacoes e beneficios.';\n            if (avatarEl) {\n                avatarEl.classList.remove('has-photo');\n                avatarEl.style.backgroundImage = '';\n                avatarEl.textContent = '?';\n            }\n            updateDashboardStats(false);\n            if (statusChip) {\n                statusChip.textContent = 'Conta convidada';\n            }\n            return;\n        }\n\n        const fullName = AppState.currentUser?.name || 'Cliente Amex';\n        const firstName = getFirstName(fullName) || 'Cliente';\n        if (nameEl) {\n            nameEl.textContent = `Ola, ${firstName}`;\n        }\n        if (emailEl) {\n            emailEl.textContent = `Voce esta autenticado como ${AppState.currentUser.email}`;\n        }\n        if (avatarEl && Profile?.applyAvatarToElement) {\n            Profile.applyAvatarToElement(avatarEl, fullName, firstName.charAt(0).toUpperCase());\n        }\n\n        updateDashboardStats(true);\n    };\n\n    const wrapProfileMethod = (methodName) => {\n        if (!Profile || typeof Profile[methodName] !== 'function') {\n            return;\n        }\n        const original = Profile[methodName].bind(Profile);\n        Profile[methodName] = (...args) => {\n            const result = original(...args);\n            applyDashboardState();\n            return result;\n        };\n    };\n\n    ['updateUI', 'renderPurchases', 'onLogin', 'onLogout', 'onPurchaseRecorded'].forEach(wrapProfileMethod);\n    applyDashboardState();\n\n    const focusHistorySection = () => {\n        const historySection = document.getElementById('dashboardHistory');\n        if (!historySection) {\n            return;\n        }\n        Profile?.renderPurchases();\n        historySection.scrollIntoView({ behavior: 'smooth', block: 'start' });\n    };\n\n    const handleAction = (action) => {\n        if (!action) {\n            return;\n        }\n        const logged = Auth?.isAuthenticated() && !!AppState.currentUser;\n        switch (action) {\n            case 'edit-profile':\n                if (!logged) {\n                    Auth?.show('loginForm');\n                    return;\n                }\n                Modal.open('profileModal');\n                requestAnimationFrame(() => {\n                    document.getElementById('profileModal')?.scrollIntoView({ behavior: 'smooth', block: 'start' });\n                    document.getElementById('profileName')?.focus();\n                });\n                break;\n            case 'view-history':\n            case 'open-history':\n                if (!logged) {\n                    Auth?.show('loginForm');\n                    return;\n                }\n                focusHistorySection();\n                break;\n            case 'open-support':\n                Utils.openSupportChannel();\n                break;\n            case 'open-login':\n                Auth?.show('loginForm');\n                break;\n            case 'open-register':\n                Auth?.show('registerForm');\n                break;\n            case 'manage-avatar':\n                if (!logged) {\n                    Auth?.show('loginForm');\n                    return;\n                }\n                Modal.open('profileModal');\n                requestAnimationFrame(() => {\n                    document.getElementById('profileModal')?.scrollIntoView({ behavior: 'smooth', block: 'start' });\n                    document.getElementById('profileAvatarTrigger')?.focus();\n                });\n                break;\n            case 'open-faq':\n                window.open('amexstore.html#faq', '_blank');\n                break;\n            case 'open-preferences':\n                Utils.showToast('Em breve: central de preferencias personalizadas.', 'info');\n                break;\n            default:\n                break;\n        }\n    };\n\n    actionButtons.forEach((button) => {\n        button.addEventListener('click', (event) => {\n            event.preventDefault();\n            handleAction(button.dataset.action);\n        });\n    });\n\n    const closeProfileModalBtn = document.getElementById('closeProfileModal');\n    if (closeProfileModalBtn) {\n        closeProfileModalBtn.addEventListener('click', () => {\n            Modal.close('profileModal');\n        });\n    }\n\n    const logoTrigger = document.querySelector('.account-brand');\n    if (logoTrigger) {\n        logoTrigger.addEventListener('click', () => {\n            window.location.href = 'amexstore.html';\n        });\n    }\n\n    window.addEventListener('storage', (event) => {\n        if (event.key === 'amexTheme') {\n            AppState.theme = event.newValue || 'light';\n            applyTheme();\n        } else if (event.key === 'amexPurchases') {\n            try {\n                AppState.purchases = JSON.parse(event.newValue || '[]');\n            } catch {\n                AppState.purchases = [];\n            }\n            applyDashboardState();\n        } else if (event.key === 'amexFavorites') {\n            try {\n                AppState.favorites = JSON.parse(event.newValue || '[]');\n            } catch {\n                AppState.favorites = [];\n            }\n            applyDashboardState();\n        } else if (event.key === 'amexProfileAvatar') {\n            AppState.profileAvatar = event.newValue || null;\n            applyDashboardState();\n        }\n    });\n});\n"],
  "mappings": "AAAO,SAASA,EAAiB,CAAE,SAAAC,EAAU,MAAAC,EAAO,MAAAC,CAAM,EAAGC,EAAU,CAAC,EAAG,CACvE,IAAMC,EAAW,CACb,aAAcD,EAAQ,eAAiB,OAAYA,EAAQ,aAAe,GAC1E,mBAAoBA,EAAQ,qBAAuB,GACnD,iBAAkB,OAAOA,EAAQ,kBAAqB,UAAYA,EAAQ,iBAAiB,KAAK,EAC1FA,EAAQ,iBAAiB,KAAK,EAC9B,KACN,oBAAqBA,EAAQ,sBAAwB,QAAU,QAAU,QAC7E,EAEA,SAASE,GAAoB,CACzB,GAAI,CAACD,EAAS,iBACV,MAAO,GAGX,GAAIA,EAAS,sBAAwB,QACjC,cAAO,SAAS,KAAOA,EAAS,iBACzB,GAGX,IAAME,EAAY,OAAO,KAAKF,EAAS,iBAAkB,QAAQ,EACjE,OAAIE,GACAA,EAAU,OAAS,KACZ,IAEJ,EACX,CAEA,IAAMC,EAAa,CACf,OAAQ,KACR,KAAM,KACN,KAAM,KACN,MAAO,KACP,SAAU,KACV,QAAS,KACT,OAAQ,GACR,YAAa,GAEb,MAAO,CACH,KAAK,OAAS,SAAS,eAAe,YAAY,EAClD,KAAK,KAAO,SAAS,eAAe,UAAU,EAC9C,KAAK,KAAO,SAAS,eAAe,UAAU,EAC9C,KAAK,MAAQ,SAAS,eAAe,aAAa,EAClD,KAAK,SAAW,SAAS,eAAe,cAAc,EACtD,KAAK,QAAU,SAAS,eAAe,gBAAgB,EAEnD,GAAC,KAAK,QAAU,CAAC,KAAK,QAItB,KAAK,MACL,KAAK,KAAK,iBAAiB,SAAWC,GAAU,CAC5CA,EAAM,eAAe,EACrB,KAAK,YAAY,CACrB,CAAC,EAGD,KAAK,UACL,KAAK,SAAS,iBAAiB,QAAS,IAAM,KAAK,MAAM,CAAC,EAG1D,KAAK,UACL,KAAK,QAAQ,aAAa,gBAAiB,OAAO,EAClD,KAAK,QAAQ,iBAAiB,QAAS,IAAM,KAAK,OAAO,CAAC,GAG9D,KAAK,OAAO,aAAa,cAAe,MAAM,EAC9C,KAAK,eAAe,EACxB,EAEA,gBAAiB,CACT,KAAK,cAGT,KAAK,cAAc,MAAO,mEAA6D,EACvF,KAAK,YAAc,GACvB,EAEA,MAAO,CACE,KAAK,SACV,KAAK,OAAO,UAAU,IAAI,QAAQ,EAClC,KAAK,OAAO,aAAa,cAAe,OAAO,EAC/C,KAAK,OAAS,GACV,KAAK,UACL,KAAK,QAAQ,UAAU,IAAI,MAAM,EACjC,KAAK,QAAQ,aAAa,gBAAiB,MAAM,EACjD,KAAK,QAAQ,aAAa,aAAc,gCAAgC,GAE5E,KAAK,eAAe,EAChB,KAAK,OACL,sBAAsB,IAAM,KAAK,MAAM,MAAM,CAAC,EAElD,KAAK,eAAe,EACxB,EAEA,OAAQ,CACC,KAAK,SACV,KAAK,OAAO,UAAU,OAAO,QAAQ,EACrC,KAAK,OAAO,aAAa,cAAe,MAAM,EAC9C,KAAK,OAAS,GACV,KAAK,UACL,KAAK,QAAQ,UAAU,OAAO,MAAM,EACpC,KAAK,QAAQ,aAAa,gBAAiB,OAAO,EAClD,KAAK,QAAQ,aAAa,aAAc,+BAA+B,GAEvE,KAAK,OACL,KAAK,MAAM,KAAK,EAExB,EAEA,QAAS,CACD,KAAK,OACL,KAAK,MAAM,EAEX,KAAK,KAAK,CAElB,EAEA,cAAcC,EAAMC,EAAM,CACtB,GAAI,CAAC,KAAK,KACN,OAEJ,IAAMC,EAAU,SAAS,cAAc,KAAK,EAC5CA,EAAQ,UAAY,gBAAgBF,CAAI,GACxC,IAAMG,EAAU,SAAS,cAAc,MAAM,EAC7CA,EAAQ,YAAcF,EACtBC,EAAQ,YAAYC,CAAO,EAC3B,KAAK,KAAK,YAAYD,CAAO,EAC7B,KAAK,eAAe,CACxB,EAEA,cAAcE,EAAS,CACnB,IAAMH,EAAOG,EAAQ,YAAY,EACjC,OAAIH,EAAK,SAAS,OAAO,GAAKA,EAAK,SAAS,SAAS,EAC1C,iJAEPA,EAAK,SAAS,UAAU,GAAKA,EAAK,SAAS,WAAW,EAC/C,iJAEPA,EAAK,SAAS,WAAW,GAAKA,EAAK,SAAS,KAAK,EAC1C,sHAEPA,EAAK,SAAS,SAAS,GAAKA,EAAK,SAAS,UAAU,GAAKA,EAAK,SAAS,SAAS,EACzE,4GAEJ,4GACX,EAEA,aAAc,CACV,GAAI,CAAC,KAAK,MACN,OAEJ,IAAMG,EAAU,KAAK,MAAM,MAAM,KAAK,EACjCA,IAGL,KAAK,cAAc,OAAQA,CAAO,EAClC,KAAK,MAAM,MAAQ,GAEnB,WAAW,IAAM,CACb,KAAK,cAAc,MAAO,KAAK,cAAcA,CAAO,CAAC,CACzD,EAAG,GAAG,EACV,EAEA,gBAAiB,CACR,KAAK,OAGV,KAAK,KAAK,UAAY,KAAK,KAAK,aACpC,CACJ,EAEMC,EAAU,CACZ,OAAQ,KACR,MAAO,KACP,OAAQ,KACR,MAAO,KACP,SAAU,KACV,KAAM,KACN,UAAW,KACX,WAAY,KACZ,cAAe,KACf,YAAa,KACb,aAAc,KACd,cAAe,KACf,UAAW,KACX,YAAa,KACb,cAAe,KACf,YAAa,KACb,YAAa,KACb,aAAc,KACd,eAAgB,KAEhB,MAAO,CACH,KAAK,OAAS,SAAS,eAAe,YAAY,EAClD,KAAK,MAAQ,KAAK,OAAS,KAAK,OAAO,cAAc,gBAAgB,EAAI,KACzE,KAAK,OAAS,KAAK,OAAS,KAAK,OAAO,cAAc,iBAAiB,EAAI,KAC3E,KAAK,MAAQ,SAAS,eAAe,cAAc,EACnD,KAAK,SAAW,SAAS,eAAe,mBAAmB,EAC3D,KAAK,KAAO,SAAS,eAAe,aAAa,EACjD,KAAK,UAAY,SAAS,eAAe,aAAa,EACtD,KAAK,WAAa,SAAS,eAAe,cAAc,EACxD,KAAK,cAAgB,SAAS,eAAe,iBAAiB,EAC9D,KAAK,YAAc,SAAS,eAAe,oBAAoB,EAC/D,KAAK,aAAe,SAAS,eAAe,qBAAqB,EACjE,KAAK,cAAgB,SAAS,eAAe,sBAAsB,EACnE,KAAK,UAAY,SAAS,eAAe,WAAW,EACpD,KAAK,YAAc,SAAS,eAAe,oBAAoB,EAC/D,KAAK,cAAgB,SAAS,eAAe,sBAAsB,EACnE,KAAK,YAAc,SAAS,eAAe,oBAAoB,EAC/D,KAAK,YAAc,SAAS,eAAe,oBAAoB,EAC/D,KAAK,aAAe,SAAS,eAAe,qBAAqB,EACjE,KAAK,eAAiB,SAAS,eAAe,uBAAuB,EAEjE,KAAK,SACDV,EAAS,iBACT,KAAK,OAAO,iBAAiB,QAAUI,GAAU,CAC7CA,EAAM,eAAe,EACrBH,EAAkB,CACtB,CAAC,EAED,KAAK,OAAO,iBAAiB,QAAS,IAAM,CACxC,GAAI,CAACU,EAAK,gBAAgB,GAAK,CAACf,EAAS,YAAa,CAClDe,EAAK,KAAK,WAAW,EACrB,MACJ,CACAA,EAAK,KAAK,aAAa,CAC3B,CAAC,GAIL,KAAK,UACL,KAAK,SAAS,iBAAiB,QAAS,IAAM,CAC1Cb,EAAM,MAAM,cAAc,EACtBE,EAAS,oBACTW,EAAK,KAAK,aAAa,CAE/B,CAAC,EAGD,KAAK,MACL,KAAK,KAAK,iBAAiB,SAAWP,GAAU,CAC5CA,EAAM,eAAe,EACrB,KAAK,YAAY,CACrB,CAAC,EAGD,KAAK,WACL,KAAK,UAAU,iBAAiB,QAAS,IAAM,CAC3CN,EAAM,MAAM,cAAc,EAC1Ba,EAAK,OAAO,CAChB,CAAC,EAGD,KAAK,eAAiB,KAAK,aAC3B,KAAK,cAAc,iBAAiB,QAAS,IAAM,CAC/C,GAAI,CAACA,EAAK,gBAAgB,GAAK,CAACf,EAAS,YAAa,CAClDe,EAAK,KAAK,WAAW,EACrB,MACJ,CACA,KAAK,YAAY,MAAM,CAC3B,CAAC,EAGD,KAAK,aACL,KAAK,YAAY,iBAAiB,SAAWP,GAAU,CACnD,IAAMQ,EAAOR,EAAM,OAAO,OAASA,EAAM,OAAO,MAAM,CAAC,EAClDQ,IAGL,KAAK,iBAAiBA,CAAI,EAC1BR,EAAM,OAAO,MAAQ,GACzB,CAAC,EAGD,KAAK,aACL,KAAK,YAAY,iBAAiB,QAAS,IAAM,KAAK,YAAY,CAAC,EAGnE,KAAK,gBACL,KAAK,eAAe,iBAAiB,QAAS,IAAM,KAAK,gBAAgB,EAAI,CAAC,EAGlF,KAAK,SAAS,EACd,KAAK,gBAAgB,EACrB,KAAK,qBAAqB,CAC9B,EAEA,cAAe,CACNR,EAAS,cAIV,KAAK,YACL,KAAK,UAAU,MAAQA,EAAS,YAAY,MAAQ,IAEpD,KAAK,aACL,KAAK,WAAW,MAAQA,EAAS,YAAY,OAAS,IAEtD,KAAK,gBACL,KAAK,cAAc,MAAQ,IAG/B,KAAK,cAAcA,EAAS,WAAW,EACvC,KAAK,qBAAqB,EAC1B,KAAK,gBAAgB,EACzB,EAEA,WAAY,CACR,GAAI,CAACe,EAAK,gBAAgB,GAAK,CAACf,EAAS,YAAa,CAClDe,EAAK,KAAK,WAAW,EACrB,MACJ,CACA,KAAK,aAAa,EAClBA,EAAK,KAAK,EACVb,EAAM,KAAK,cAAc,CAC7B,EAEA,aAAc,CACV,GAAI,CAACF,EAAS,YAAa,CACvBC,EAAM,UAAU,mCAAoC,SAAS,EAC7D,MACJ,CAEA,IAAMgB,GAAQ,KAAK,UAAY,KAAK,UAAU,MAAQ,IAAI,KAAK,EACzDC,GAAS,KAAK,WAAa,KAAK,WAAW,MAAQ,IAAI,KAAK,EAAE,YAAY,EAC1EC,GAAY,KAAK,cAAgB,KAAK,cAAc,MAAQ,IAAI,KAAK,EAE3E,GAAI,CAACF,EAAM,CACPhB,EAAM,UAAU,0BAA2B,SAAS,EACpD,MACJ,CAEA,GAAI,CAACiB,EAAO,CACRjB,EAAM,UAAU,4BAA6B,SAAS,EACtD,MACJ,CAEA,IAAMmB,EAAgBpB,EAAS,YAAY,MAC3C,GAAIkB,IAAUE,GAAiBL,EAAK,MAAM,KAAKM,GAAQA,EAAK,QAAUH,CAAK,EAAG,CAC1EjB,EAAM,UAAU,8BAA+B,OAAO,EACtD,MACJ,CAEA,IAAMqB,EAAYP,EAAK,MAAM,UAAUM,GAAQA,EAAK,QAAUD,CAAa,EAC3E,GAAIE,IAAc,GAAI,CAClBrB,EAAM,UAAU,8CAA+C,OAAO,EACtEc,EAAK,OAAO,EACZ,MACJ,CAEAA,EAAK,MAAMO,CAAS,EAAE,KAAOL,EAC7BF,EAAK,MAAMO,CAAS,EAAE,MAAQJ,EAC1BC,IACAJ,EAAK,MAAMO,CAAS,EAAE,SAAWH,GAErC,aAAa,QAAQ,YAAa,KAAK,UAAUJ,EAAK,KAAK,CAAC,EAE5Df,EAAS,YAAc,CAAE,KAAAiB,EAAM,MAAAC,CAAM,EACrC,aAAa,QAAQ,kBAAmB,KAAK,UAAUlB,EAAS,WAAW,CAAC,EAE5E,IAAMuB,EAAkB,SAAS,eAAe,YAAY,EACxDA,IACAA,EAAgB,MAAQL,GAExB,KAAK,gBACL,KAAK,cAAc,MAAQ,IAG/B,KAAK,cAAclB,EAAS,WAAW,EACvC,KAAK,qBAAqB,EAC1B,KAAK,gBAAgB,EACrB,KAAK,SAAS,EACde,EAAK,mBAAmB,EACxBd,EAAM,UAAU,iCAAkC,SAAS,CAC/D,EAEA,cAAcoB,EAAM,CAChB,GAAI,CAACA,EAAM,CACH,KAAK,cAAa,KAAK,YAAY,YAAc,aACjD,KAAK,eAAc,KAAK,aAAa,YAAc,OACvD,KAAK,qBAAqB,KAAK,cAAe,GAAI,GAAG,EACrD,MACJ,CAEI,KAAK,cACL,KAAK,YAAY,YAAcA,EAAK,MAAQ,aAE5C,KAAK,eACL,KAAK,aAAa,YAAcA,EAAK,OAAS,OAElD,KAAK,qBAAqB,KAAK,cAAeA,EAAK,KAAM,GAAG,CAChE,EAEA,UAAW,CACP,IAAMG,EAAWT,EAAK,gBAAgB,GAAK,CAAC,CAACf,EAAS,YAElD,KAAK,QACL,KAAK,OAAO,UAAU,OAAO,SAAUwB,CAAQ,EAGnD,IAAMP,EAAOO,GAAYxB,EAAS,YAAcA,EAAS,YAAY,KAAO,GACxE,KAAK,QACL,KAAK,MAAM,YAAcwB,EAAW,KAAK,aAAaP,CAAI,EAAI,UAGlE,KAAK,qBAAqB,KAAK,OAAQA,EAAM,GAAG,EAChD,KAAK,cAAcO,EAAWxB,EAAS,YAAc,IAAI,EACzD,KAAK,qBAAqB,CAC9B,EAEA,sBAAuB,CACnB,GAAI,KAAK,YAAa,CAClB,IAAMyB,EAAW,CAAC,CAACzB,EAAS,eAAiBe,EAAK,gBAAgB,GAAK,CAAC,CAACf,EAAS,YAClF,KAAK,YAAY,SAAW,CAACyB,CACjC,CACJ,EAEA,iBAAiBT,EAAM,CACnB,GAAI,CAACD,EAAK,gBAAgB,GAAK,CAACf,EAAS,YAAa,CAClDe,EAAK,KAAK,WAAW,EACrB,MACJ,CAEA,IAAMW,EAAU,EAAI,KAAO,KAC3B,GAAI,CAACV,EAAK,MAAQ,CAACA,EAAK,KAAK,WAAW,QAAQ,EAAG,CAC/Cf,EAAM,UAAU,+BAAgC,SAAS,EACzD,MACJ,CACA,GAAIe,EAAK,KAAOU,EAAS,CACrBzB,EAAM,UAAU,oCAAqC,SAAS,EAC9D,MACJ,CAEA,IAAM0B,EAAS,IAAI,WACnBA,EAAO,OAAS,IAAM,CAClB3B,EAAS,cAAgB2B,EAAO,OAChC1B,EAAM,cAAc,EACpB,KAAK,SAAS,EACdA,EAAM,UAAU,6BAA8B,SAAS,CAC3D,EACA0B,EAAO,QAAU,IAAM,CACnB1B,EAAM,UAAU,sCAAuC,OAAO,CAClE,EACA0B,EAAO,cAAcX,CAAI,CAC7B,EAEA,aAAc,CACV,GAAI,CAACD,EAAK,gBAAgB,GAAK,CAACf,EAAS,YAAa,CAClDe,EAAK,KAAK,WAAW,EACrB,MACJ,CACKf,EAAS,gBAGdA,EAAS,cAAgB,KACzBC,EAAM,cAAc,EACpB,KAAK,SAAS,EACdA,EAAM,UAAU,2BAA4B,MAAM,EACtD,EAEA,qBAAqB2B,EAASX,EAAO,GAAIY,EAAW,IAAK,CACrD,GAAI,CAACD,EACD,OAEJ,IAAME,EAAW,CAAC,CAAC9B,EAAS,eAAiBe,EAAK,gBAAgB,GAAK,CAAC,CAACf,EAAS,YAElF,GADA4B,EAAQ,UAAU,OAAO,YAAaE,CAAQ,EAC1CA,EACAF,EAAQ,MAAM,gBAAkB,OAAS5B,EAAS,cAAgB,IAClE4B,EAAQ,MAAM,eAAiB,QAC/BA,EAAQ,MAAM,mBAAqB,SACnCA,EAAQ,MAAM,iBAAmB,YACjCA,EAAQ,MAAM,gBAAkB,UAChCA,EAAQ,YAAc,OACnB,CACHA,EAAQ,MAAM,gBAAkB,GAChCA,EAAQ,MAAM,eAAiB,GAC/BA,EAAQ,MAAM,mBAAqB,GACnCA,EAAQ,MAAM,iBAAmB,GACjCA,EAAQ,MAAM,gBAAkB,GAChC,IAAMG,EAAU,KAAK,WAAWd,CAAI,GAAKY,EACzCD,EAAQ,YAAcG,CAC1B,CACJ,EAEA,gBAAgBC,EAAY,GAAO,CAC/B,GAAI,CAAC,KAAK,aAAe,CAAC,KAAK,aAC3B,OAGJ,IAAMR,EAAWT,EAAK,gBAAgB,GAAK,CAAC,CAACf,EAAS,YAChDiC,EAAY,MAAM,QAAQjC,EAAS,SAAS,EAAIA,EAAS,UAAY,CAAC,EAI5E,GAFA,KAAK,YAAY,UAAY,GAEzB,CAACwB,EAAU,CACX,KAAK,aAAa,YAAc,sCAChC,KAAK,aAAa,OAAS,GAC3B,KAAK,YAAY,OAAS,GAC1B,MACJ,CAEA,GAAI,CAACS,EAAU,OAAQ,CACnB,KAAK,aAAa,YAAc,0CAChC,KAAK,aAAa,OAAS,GAC3B,KAAK,YAAY,OAAS,GAC1B,MACJ,CAEA,KAAK,aAAa,OAAS,GAC3B,KAAK,YAAY,OAAS,GAE1BA,EAAU,QAASC,GAAa,CAC5B,IAAMC,EAAS,KAAK,kBAAkBD,CAAQ,EACxCE,EAAe,KAAK,WAAWF,EAAS,YAAY,EACpDG,EAAcH,EAAS,UAAY,KAAK,WAAWA,EAAS,SAAS,EAAI,wBACzEI,EAAO,SAAS,cAAc,IAAI,EACxCA,EAAK,UAAY,uBACjB,IAAMC,EAAiB,SAAS,cAAc,KAAK,EAC7CC,EAAQ,SAAS,cAAc,IAAI,EACzCA,EAAM,YAAcN,EAAS,KAC7BK,EAAe,YAAYC,CAAK,EAEhC,IAAMC,EAAO,SAAS,cAAc,KAAK,EACzCA,EAAK,UAAY,uBAEjB,CACI,CAAE,KAAM,kBAAmB,KAAML,CAAa,EAC9C,CAAE,KAAM,eAAgB,KAAMF,EAAS,UAAY,KAAM,EACzD,CAAE,KAAM,YAAa,KAAMjC,EAAM,YAAYiC,EAAS,OAAS,CAAC,CAAE,EAClE,CAAE,KAAM,oBAAqB,KAAMG,CAAY,CACnD,EAAE,QAAQ,CAAC,CAAE,KAAAK,EAAM,KAAAhC,CAAK,IAAM,CAC1B,IAAMiC,EAAO,SAAS,cAAc,MAAM,EACpCC,EAAS,SAAS,cAAc,GAAG,EACzCA,EAAO,UAAY,OAASF,EAC5BE,EAAO,aAAa,cAAe,MAAM,EACzCD,EAAK,YAAYC,CAAM,EACvBD,EAAK,YAAY,SAAS,eAAe,IAAMjC,CAAI,CAAC,EACpD+B,EAAK,YAAYE,CAAI,CACzB,CAAC,EAEDJ,EAAe,YAAYE,CAAI,EAE/B,IAAMI,EAAW,SAAS,cAAc,KAAK,EAC7CA,EAAS,UAAY,0BAA4BV,EAAO,UACxD,IAAMW,EAAa,SAAS,cAAc,GAAG,EAC7CA,EAAW,UAAY,OAASX,EAAO,KACvCW,EAAW,aAAa,cAAe,MAAM,EAC7C,IAAMC,EAAa,SAAS,cAAc,MAAM,EAChDA,EAAW,YAAcZ,EAAO,MAChCU,EAAS,OAAOC,EAAYC,CAAU,EAEtCT,EAAK,OAAOC,EAAgBM,CAAQ,EACpC,KAAK,YAAY,YAAYP,CAAI,CACrC,CAAC,EAEGN,GACA/B,EAAM,UAAU,wBAAyB,MAAM,CAEvD,EAEA,kBAAkBiC,EAAU,CACxB,GAAI,CAACA,GAAY,CAACA,EAAS,UACvB,MAAO,CAAE,MAAO,mBAAoB,UAAW,YAAa,KAAM,aAAc,EAEpF,IAAMc,EAAU,IAAI,KAAKd,EAAS,SAAS,EAC3C,GAAI,OAAO,MAAMc,EAAQ,QAAQ,CAAC,EAC9B,MAAO,CAAE,MAAO,wBAAyB,UAAW,YAAa,KAAM,oBAAqB,EAEhG,IAAMC,EAAM,IAAI,KACVC,EAASF,EAAQ,QAAQ,EAAIC,EAAI,QAAQ,EAC/C,GAAIC,GAAU,EAAG,CACb,IAAMC,EAAc,KAAK,IAAI,EAAG,KAAK,MAAM,KAAK,IAAID,CAAM,EAAK,KAAoB,CAAC,EACpF,MAAO,CAAE,MAAOC,GAAe,EAAI,WAAa,eAAiBA,EAAc,QAAS,UAAW,UAAW,KAAM,yBAA0B,CAClJ,CACA,IAAMC,EAAgB,KAAK,KAAKF,GAAU,IAAO,GAAK,GAAK,GAAG,EAC9D,OAAIE,GAAiB,EACV,CAAE,MAAO,yBAA0B,UAAW,QAAS,KAAM,UAAW,EAE5E,CAAE,MAAO,aAAeA,EAAgB,QAAS,UAAW,QAAS,KAAM,UAAW,CACjG,EAEA,WAAWC,EAAS,CAChB,GAAI,CAACA,EACD,MAAO,KAEX,GAAI,CACA,OAAO,IAAI,KAAK,eAAe,QAAS,CAAE,UAAW,QAAS,UAAW,OAAQ,CAAC,EAAE,OAAO,IAAI,KAAKA,CAAO,CAAC,CAChH,OAASC,EAAO,CACZ,OAAO,IAAI,KAAKD,CAAO,EAAE,eAAe,OAAO,CACnD,CACJ,EAEA,WAAWE,EAAQ,GAAI,CACnB,IAAMC,EAAUD,EAAM,KAAK,EAC3B,OAAOC,EAAUA,EAAQ,OAAO,CAAC,EAAE,YAAY,EAAI,GACvD,EAEA,aAAaD,EAAQ,GAAI,CACrB,IAAMC,EAAUD,EAAM,KAAK,EAC3B,GAAI,CAACC,EACD,MAAO,SAEX,IAAMC,EAAQD,EAAQ,MAAM,KAAK,EACjC,OAAOC,EAAM,OAASA,EAAM,CAAC,EAAID,CACrC,EAEA,SAAU,CACN,KAAK,SAAS,EACd,KAAK,gBAAgB,EACrBzC,EAAK,mBAAmB,CAC5B,EAEA,UAAW,CACH,KAAK,OACLb,EAAM,MAAM,cAAc,EAE1B,KAAK,gBACL,KAAK,cAAc,MAAQ,IAE/B,KAAK,gBAAgB,EACrB,KAAK,SAAS,EACda,EAAK,mBAAmB,CAC5B,EAEA,oBAAqB,CACjB,KAAK,gBAAgB,EAAI,CAC7B,CACJ,EAEM2C,EAAa,CACf,QAAS,KACT,SAAU,KACV,QAAS,KACT,UAAW,GAEX,MAAO,CAEH,GADA,KAAK,QAAU,SAAS,eAAe,gBAAgB,EACnD,CAAC,KAAK,QACN,OAGJ,KAAK,SAAW,SAAS,eAAe,qBAAqB,EAC7D,KAAK,QAAU,SAAS,eAAe,mBAAmB,EAC1D,KAAK,UAAY,aAAa,QAAQ,yBAAyB,IAAM,OAEjE,KAAK,UACL,KAAK,SAAS,iBAAiB,QAAS,IAAM,KAAK,KAAK,EAAI,CAAC,EAGjE,KAAK,QAAQ,iBAAiB,sBAAsB,EAAE,QAAQC,GAAQ,CAClE,IAAMC,EAASD,EAAK,aAAa,oBAAoB,EACrD,GAAI,CAACC,EACD,OAGJD,EAAK,iBAAiB,QAAUnD,GAAU,CAClCA,EAAM,OAAO,QAAQ,QAAQ,IAGjC,KAAK,SAASoD,CAAM,EACpB,KAAK,KAAK,EAAK,EACnB,CAAC,EAED,IAAMC,EAASF,EAAK,cAAc,QAAQ,EACtCE,GACAA,EAAO,iBAAiB,QAAUrD,GAAU,CACxCA,EAAM,eAAe,EACrBA,EAAM,gBAAgB,EACtB,KAAK,SAASoD,CAAM,EACpB,KAAK,KAAK,EAAK,CACnB,CAAC,CAET,CAAC,EAED,KAAK,QAAQ,iBAAiB,qBAAqB,EAAE,QAAQE,GAAQ,CACjEA,EAAK,iBAAiB,QAAUtD,GAAU,CACtCA,EAAM,eAAe,EACrBA,EAAM,gBAAgB,EACtBP,EAAM,mBAAmB,EACzB,KAAK,KAAK,EAAK,CACnB,CAAC,EAED,IAAM4D,EAASC,EAAK,cAAc,QAAQ,EACtCD,GACAA,EAAO,iBAAiB,QAAUrD,GAAU,CACxCA,EAAM,eAAe,EACrBA,EAAM,gBAAgB,EACtBP,EAAM,mBAAmB,EACzB,KAAK,KAAK,EAAK,CACnB,CAAC,CAET,CAAC,EAED,IAAM8D,EAAY,SAAS,eAAe,iBAAiB,EACvDA,GACAA,EAAU,iBAAiB,QAAS,IAAM,CACtC,KAAK,UAAY,GACjB,aAAa,WAAW,yBAAyB,EACjDhD,EAAK,KAAK,EACV,KAAK,KAAKf,EAAS,YAAcA,EAAS,YAAY,KAAO,GAAI,CAAE,MAAO,EAAK,CAAC,CACpF,CAAC,CAET,EAEA,KAAKiB,EAAO,GAAId,EAAU,CAAC,EAAG,CAC1B,GAAI,CAAC,KAAK,QACN,OAGJ,IAAM6D,EAAQ7D,EAAQ,QAAU,GAKhC,GAJI6D,IACA,KAAK,UAAY,IAGjB,OAAK,WAAa,CAACA,GAIvB,IAAI,KAAK,QACL,GAAI/C,EAAM,CACN,IAAMgD,EAAYhD,EAAK,KAAK,EAAE,MAAM,KAAK,EAAE,CAAC,GAAKA,EACjD,KAAK,QAAQ,YAAc,OAAOgD,CAAS,oCAC/C,MACI,KAAK,QAAQ,YAAc,iEAInC,KAAK,QAAQ,gBAAgB,QAAQ,EACrC,KAAK,QAAQ,UAAU,IAAI,SAAS,EACpC,KAAK,QAAQ,aAAa,cAAe,OAAO,EAEhD,sBAAsB,IAAM,CACxB,KAAK,QAAQ,eAAe,CAAE,SAAU,SAAU,MAAO,QAAS,CAAC,CACvE,CAAC,EACL,EAEA,KAAKC,EAAY,GAAO,CACf,KAAK,UAGV,KAAK,QAAQ,UAAU,OAAO,SAAS,EACvC,KAAK,QAAQ,aAAa,SAAU,EAAE,EACtC,KAAK,QAAQ,aAAa,cAAe,MAAM,EAC3CA,IACA,KAAK,UAAY,GACjB,aAAa,QAAQ,0BAA2B,MAAM,GAE9D,EAEA,SAASC,EAAU,CACf,GAAI,CAACA,EACD,OAEJ,IAAMP,EAAS,SAAS,cAAcO,CAAQ,EAC1CP,GACAA,EAAO,eAAe,CAAE,SAAU,SAAU,MAAO,OAAQ,CAAC,CAEpE,CACJ,EAEM7C,EAAO,CACT,QAAS,KACT,aAAc,KACd,aAAc,KACd,KAAM,CAAC,EACP,MAAO,CAAC,EACR,MAAO,CAAC,EACR,YAAa,YACb,aAAc,KACd,WAAY,KACZ,SAAU,KACV,YAAa,KACb,YAAa,KACb,cAAe,KACf,eAAgB,KAChB,gBAAiB,KACjB,kBAAmB,KACnB,iBAAkB,KAElB,MAAO,CAEH,GADA,KAAK,QAAU,SAAS,eAAe,aAAa,EAChD,CAAC,KAAK,QAAS,OAEnB,KAAK,aAAe,KAAK,QAAQ,cAAc,YAAY,EAC3D,KAAK,aAAe,KAAK,QAAQ,cAAc,qBAAqB,EACpE,KAAK,KAAO,MAAM,KAAK,KAAK,QAAQ,iBAAiB,WAAW,CAAC,EACjE,KAAK,MAAQ,MAAM,KAAK,KAAK,QAAQ,iBAAiB,YAAY,CAAC,EACnE,KAAK,MAAQ,KAAK,MAAM,aAAa,QAAQ,WAAW,GAAK,IAAI,EACjE,KAAK,WAAa,KAAK,QAAQ,cAAc,uBAAuB,EACpE,KAAK,SAAW,KAAK,QAAQ,cAAc,oCAAsC,EACjF,KAAK,YAAc,KAAK,QAAQ,cAAc,uCAAyC,EACvF,KAAK,YAAc,SAAS,eAAe,aAAa,EACxD,KAAK,cAAgB,SAAS,eAAe,iBAAiB,EAC9D,KAAK,eAAiB,SAAS,eAAe,kBAAkB,EAChE,KAAK,gBAAkB,SAAS,eAAe,eAAe,EAC9D,KAAK,kBAAoB,SAAS,eAAe,mBAAmB,EACpE,KAAK,iBAAmB,SAAS,eAAe,kBAAkB,EAClE,KAAK,YAAc,YACf,KAAK,cACL,KAAK,aAAa,aAAa,iBAAkB,GAAG,EAGpD,KAAK,cACL,OAAO,oBAAoB,SAAU,KAAK,YAAY,EAE1D,KAAK,aAAe,IAAM,KAAK,gBAAgB,KAAK,WAAW,EAC/D,OAAO,iBAAiB,SAAU,KAAK,YAAY,EAEnD,KAAK,cAAc,EACnB,KAAK,eAAe,EACpB,KAAK,mBAAmB,EACxB,KAAK,mBAAmB,EACxB,KAAK,mBAAmB,EAEP,KAAK,gBAAgB,GAAK,CAAC,CAACf,EAAS,aAElDc,EAAQ,QAAQ,EAChB,KAAK,SAAS,aAAa,EACvBV,EAAS,mBACT,KAAK,KAAK,aAAa,EAEvB,KAAK,KAAK,IAGdU,EAAQ,SAAS,EACjB,KAAK,SAAS,WAAW,EACrBV,EAAS,cAAgBA,EAAS,mBAClC,KAAK,KAAK,WAAW,EAErB,KAAK,KAAK,EAGtB,EAEA,eAAgB,CACZ,KAAK,KAAK,QAAQgE,GAAO,CACrBA,EAAI,iBAAiB,QAAS,IAAM,CAChC,IAAMR,EAASQ,EAAI,QAAQ,OAC3B,GAAIR,IAAW,eAAiB,CAAC,KAAK,gBAAgB,EAAG,CACrD,KAAK,SAAS,WAAW,EACzB,MACJ,CACA,KAAK,SAASA,CAAM,CACxB,CAAC,CACL,CAAC,EAED,KAAK,QAAQ,iBAAiB,gBAAgB,EAAE,QAAQS,GAAQ,CAC5DA,EAAK,iBAAiB,QAAU7D,GAAU,CACtCA,EAAM,eAAe,EACrB,IAAMoD,EAASS,EAAK,QAAQ,OACxBT,GACA,KAAK,SAASA,CAAM,CAE5B,CAAC,CACL,CAAC,CACL,EAEA,gBAAgBU,EAAU,CACtB,GAAI,CAAC,KAAK,cAAgB,CAAC,KAAK,aAC5B,OAGJ,IAAMC,EAAgBD,GAAY,KAAK,aAAe,YAChDE,EAAY,KAAK,aAAa,cAAc,0BAA2BD,CAAa,IAAK,EAE/F,GAAI,CAACC,GAAaA,EAAU,eAAiB,KAAM,CAC/C,KAAK,aAAa,MAAM,QAAU,IAClC,MACJ,CAEA,OAAO,sBAAsB,IAAM,CAC/B,GAAM,CAAE,WAAAC,EAAY,YAAAC,CAAY,EAAIF,EACpC,KAAK,aAAa,MAAM,QAAU,IAClC,KAAK,aAAa,MAAM,UAAY,cAAcC,CAAU,MAC5D,KAAK,aAAa,MAAM,MAAQ,GAAGC,CAAW,IAClD,CAAC,CACL,EAEA,oBAAqB,CACjB,KAAK,QAAQ,iBAAiB,kBAAkB,EAAE,QAAQb,GAAU,CAChEA,EAAO,iBAAiB,QAAS,IAAM,CACnC,IAAMc,EAAQ,SAAS,eAAed,EAAO,QAAQ,MAAM,EAC3D,GAAI,CAACc,EAAO,OACZ,IAAMC,EAAaD,EAAM,OAAS,WAClCA,EAAM,KAAOC,EAAa,OAAS,WACnCf,EAAO,UAAYe,EACb,mCACA,4BACV,CAAC,CACL,CAAC,CACL,EAEA,oBAAqB,CACb,KAAK,mBACL,KAAK,kBAAkB,iBAAiB,QAAUpE,GAAU,CACxD,GAAIJ,EAAS,iBAAkB,CAC3BI,EAAM,eAAe,EACrBH,EAAkB,EAClB,MACJ,CACAS,EAAQ,UAAU,CACtB,CAAC,EAGD,KAAK,kBACL,KAAK,iBAAiB,iBAAiB,QAAS,IAAM,CAClD,KAAK,OAAO,CAChB,CAAC,CAET,EAEA,gBAAiB,CACb,IAAM+D,EAAY,SAAS,eAAe,WAAW,EAC/CC,EAAe,SAAS,eAAe,cAAc,EAEvDD,GACAA,EAAU,iBAAiB,SAAWrE,GAAU,CAC5CA,EAAM,eAAe,EACrB,IAAMU,EAAQ2D,EAAU,cAAc,aAAa,EAAE,MAAM,KAAK,EAAE,YAAY,EACxE1D,EAAW0D,EAAU,cAAc,gBAAgB,EAAE,MACrDxD,EAAO,KAAK,MAAM,KAAK,GAAK,EAAE,QAAUH,GAAS,EAAE,WAAaC,CAAQ,EAE9E,GAAI,CAACE,EAAM,CACPpB,EAAM,UAAU,sDAAuD,OAAO,EAC9E,MACJ,CAEA,aAAa,QAAQ,WAAY,MAAM,EACvCD,EAAS,YAAc,CAAE,KAAMqB,EAAK,KAAM,MAAOA,EAAK,KAAM,EAC5D,aAAa,QAAQ,kBAAmB,KAAK,UAAUrB,EAAS,WAAW,CAAC,EAE5Ec,EAAQ,QAAQ,EAChB+D,EAAU,MAAM,EACZzE,EAAS,oBACT,KAAK,SAAS,aAAa,EAC3B,KAAK,KAAK,aAAa,GAEvB,KAAK,KAAK,EAGd,WAAW,IAAM,CACbH,EAAM,iBAAiBoB,EAAK,IAAI,EAChB,eAAe,QAAQ,2BAA2B,GAE9DqC,EAAW,KAAKrC,EAAK,KAAM,CAAE,MAAO,EAAK,CAAC,EAC1C,eAAe,WAAW,2BAA2B,GAErDqC,EAAW,KAAKrC,EAAK,IAAI,CAEjC,EAAG,GAAG,CACV,CAAC,EAGDyD,GACAA,EAAa,iBAAiB,SAAWtE,GAAU,CAC/CA,EAAM,eAAe,EACrB,IAAMuE,EAAWD,EAAa,cAAc,eAAe,EAAE,MAAM,KAAK,EACxE,GAAI,CAACC,EAAU,CACX9E,EAAM,UAAU,qCAAsC,SAAS,EAC/D,MACJ,CACA,IAAMiB,EAAQ4D,EAAa,cAAc,gBAAgB,EAAE,MAAM,KAAK,EAAE,YAAY,EAC9E3D,EAAW2D,EAAa,cAAc,mBAAmB,EAAE,MAEjE,GAAI3D,EAAS,OAAS,EAAG,CACrBlB,EAAM,UAAU,4CAA6C,SAAS,EACtE,MACJ,CAEA,GAAI,KAAK,MAAM,KAAK+E,GAAKA,EAAE,QAAU9D,CAAK,EAAG,CACzCjB,EAAM,UAAU,uCAAwC,OAAO,EAC/D,KAAK,SAAS,WAAW,EACzB,MACJ,CAEA,IAAMgF,EAAU,CAAE,KAAMF,EAAU,MAAA7D,EAAO,SAAAC,CAAS,EAClD,KAAK,MAAM,KAAK8D,CAAO,EACvB,aAAa,QAAQ,YAAa,KAAK,UAAU,KAAK,KAAK,CAAC,EAC5D,eAAe,QAAQ,4BAA6BF,CAAQ,EAC5D,aAAa,WAAW,yBAAyB,EACjD9E,EAAM,UAAU,mCAAqC8E,EAAW,sBAAuB,SAAS,EAChGD,EAAa,MAAM,EACnB,KAAK,SAAS,WAAW,EACzB,IAAMvD,EAAkB,SAAS,eAAe,YAAY,EACxDA,IACAA,EAAgB,MAAQL,EACxBK,EAAgB,MAAM,GAE1B,IAAM2D,EAAqB,SAAS,eAAe,eAAe,EAC9DA,IACAA,EAAmB,MAAQ,GAEnC,CAAC,CAET,EAEA,SAASZ,EAAW,YAAa,CAC7B,IAAM9C,EAAW,KAAK,gBAAgB,GAAK,CAAC,CAACxB,EAAS,YAClDsE,IAAa,eAAiB,CAAC9C,IAC/B8C,EAAW,aAEX9C,IAAa8C,IAAa,aAAeA,IAAa,kBACtDA,EAAW,eAGf,KAAK,YAAcA,EAEnB,KAAK,MAAM,QAAQa,GAAQ,CACvB,IAAMC,EAAWD,EAAK,KAAOb,EAC7Ba,EAAK,UAAU,OAAO,SAAUC,CAAQ,EACxCD,EAAK,gBAAgB,SAAU,CAACC,CAAQ,EACxCD,EAAK,aAAa,cAAeC,EAAW,QAAU,MAAM,CAChE,CAAC,EACD,KAAK,KAAK,QAAQhB,GAAO,CACrB,IAAMgB,EAAWhB,EAAI,QAAQ,SAAWE,EACxCF,EAAI,UAAU,OAAO,SAAUgB,CAAQ,EACvChB,EAAI,aAAa,gBAAiBgB,EAAW,OAAS,OAAO,EAC7DhB,EAAI,aAAa,WAAYgB,EAAW,IAAM,IAAI,CACtD,CAAC,EAED,KAAK,gBAAgBd,CAAQ,CACjC,EAEA,KAAKA,EAAW,YAAa,CACzB,IAAM9C,EAAW,KAAK,gBAAgB,GAAK,CAAC,CAACxB,EAAS,YAClDsE,IAAa,eAAiB,CAAC9C,IAC/B8C,EAAW,aAEX9C,IAAa8C,IAAa,aAAeA,IAAa,kBACtDA,EAAW,eAEf,KAAK,mBAAmB,EACxB,KAAK,kBAAkB,EACvB,KAAK,SAASA,CAAQ,EAClB,SAAS,KAAK,UAAU,SAAS,oBAAoB,EACrD,SAAS,KAAK,UAAU,OAAO,aAAa,EAE5C,SAAS,KAAK,UAAU,IAAI,aAAa,EAE7C,KAAK,QAAQ,UAAU,IAAI,QAAQ,CACvC,EAEA,MAAO,CACH,SAAS,KAAK,UAAU,OAAO,aAAa,EAC5C,KAAK,QAAQ,UAAU,OAAO,QAAQ,CAC1C,EAEA,QAAS,CACL,aAAa,WAAW,UAAU,EAClC,aAAa,WAAW,iBAAiB,EACzCtE,EAAS,YAAc,KACvBc,EAAQ,SAAS,EACjB,KAAK,KAAK,WAAW,EACrBb,EAAM,UAAU,+CAAgD,MAAM,CAC1E,EAEA,mBAAoB,CAChB,IAAMoF,EAAW,SAAS,eAAe,gBAAgB,EACzD,GAAI,CAACA,EACD,OAEJ,IAAM7D,EAAW,KAAK,gBAAgB,GAAK,CAAC,CAACxB,EAAS,YACtDqF,EAAS,UAAU,OAAO,UAAW7D,CAAQ,EAC7C6D,EAAS,aAAa,cAAe7D,EAAW,QAAU,MAAM,EAChE6D,EAAS,oBAAoB,QAAS,KAAK,gBAAgB,EACvD7D,GACA6D,EAAS,iBAAiB,QAAS,KAAK,gBAAgB,CAEhE,EAEA,iBAAkB,IAAM,CACpBtE,EAAK,KAAK,CACd,EAEA,oBAAqB,CACjB,IAAMS,EAAW,KAAK,gBAAgB,GAAK,CAAC,CAACxB,EAAS,YAgDtD,GA9CI,KAAK,aACL,KAAK,WAAW,UAAU,OAAO,UAAWwB,CAAQ,EACpD,KAAK,WAAW,aAAa,cAAeA,EAAW,QAAU,MAAM,EACvE,KAAK,WAAW,gBAAgB,WAAY,CAACA,CAAQ,EACrD,KAAK,WAAW,gBAAgB,SAAU,CAACA,CAAQ,EACnD,KAAK,WAAW,aAAa,WAAYA,GAAY,KAAK,WAAW,UAAU,SAAS,QAAQ,EAAI,IAAM,IAAI,EACzGA,GACD,KAAK,WAAW,KAAK,GAGzB,KAAK,WACL,KAAK,SAAS,UAAU,OAAO,SAAUA,CAAQ,EACjD,KAAK,SAAS,aAAa,cAAeA,EAAW,OAAS,OAAO,EACrE,KAAK,SAAS,gBAAgB,SAAUA,CAAQ,GAEhD,KAAK,cACL,KAAK,YAAY,UAAU,OAAO,SAAUA,CAAQ,EACpD,KAAK,YAAY,aAAa,cAAeA,EAAW,OAAS,OAAO,EACxE,KAAK,YAAY,gBAAgB,SAAUA,CAAQ,GAGnD,KAAK,cACL,KAAK,aAAa,aAAa,iBAAkBA,EAAW,IAAM,GAAG,EAGrE,KAAK,cACL,KAAK,YAAY,UAAU,OAAO,YAAaA,CAAQ,EACvD,KAAK,YAAY,aAAa,cAAeA,EAAW,QAAU,MAAM,EACxE,KAAK,YAAY,gBAAgB,SAAU,CAACA,CAAQ,EAChD,CAACA,GAAY,KAAK,YAAY,UAAU,SAAS,QAAQ,GACzD,KAAK,SAAS,WAAW,GAI7B,KAAK,gBACL,KAAK,cAAc,YAAcA,GAAYxB,EAAS,YAChDA,EAAS,YAAY,KACrB,aAGN,KAAK,iBACL,KAAK,eAAe,YAAcwB,GAAYxB,EAAS,YACjDA,EAAS,YAAY,MACrB,OAGN,KAAK,gBAAiB,CACtB,IAAMiB,EAAOO,GAAYxB,EAAS,YAAcA,EAAS,YAAY,KAAO,GACtE+B,EAAUd,EAAOA,EAAK,KAAK,EAAE,OAAO,CAAC,EAAE,YAAY,EAAI,IAC7D,KAAK,gBAAgB,YAAcc,GAAW,GAClD,CACA,KAAK,kBAAkB,EACvB,KAAK,gBAAgB,KAAK,WAAW,CACzC,EAEA,iBAAkB,CACd,OAAO,aAAa,QAAQ,UAAU,IAAM,MAChD,CACJ,EAEIuD,EAAc,GAElB,SAASC,GAAa,CACdD,IAGJA,EAAc,GACd/E,EAAW,KAAK,EAChBmD,EAAW,KAAK,EAChB5C,EAAQ,KAAK,EACbC,EAAK,KAAK,EACd,CAEA,MAAO,CACH,WAAAR,EACA,QAAAO,EACA,KAAAC,EACA,WAAA2C,EACA,WAAA6B,EACA,cAAe,IAAMD,CACzB,CACJ,CCroCA,IAAME,EAAW,CACb,KAAM,KAAK,MAAM,aAAa,QAAQ,UAAU,CAAC,GAAK,CAAC,EACvD,UAAW,KAAK,MAAM,aAAa,QAAQ,eAAe,CAAC,GAAK,CAAC,EACjE,MAAO,aAAa,QAAQ,WAAW,GAAK,QAC5C,YAAa,KAAK,MAAM,aAAa,QAAQ,iBAAiB,CAAC,GAAK,KACpE,UAAW,KAAK,MAAM,aAAa,QAAQ,eAAe,GAAK,IAAI,EACnE,cAAe,aAAa,QAAQ,mBAAmB,GAAK,IAChE,EAEMC,EAAQ,CACV,YAAcC,GAEH,MADO,OAAO,WAAWA,GAAS,CAAC,EACvB,QAAQ,CAAC,EAAE,QAAQ,IAAK,GAAG,CAAC,GAGnD,mBAAoB,IAAM,CACtB,OAAO,KAAK,wFAAyF,QAAQ,CACjH,EAEA,UAAW,CAACC,EAASC,EAAO,SAAW,CArB3C,IAAAC,EAsBQ,IAAMC,EAAQ,SAAS,cAAc,KAAK,EAC1CA,EAAM,UAAY,SAASF,CAAI,GAC/BE,EAAM,UAAY;AAAA,uCACaF,IAAS,UAAY,kBAChDA,IAAS,QAAU,wBACnBA,IAAS,UAAY,0BAA4B,gBAAgB;AAAA,0CACnCD,CAAO;AAAA;AAAA,UAIzC,IAAMI,EAAY,SAAS,eAAe,gBAAgB,EAC1D,GAAI,CAACA,EACD,OAGJ,KAAOA,EAAU,SAAS,QAAU,GAChCA,EAAU,YAAYA,EAAU,iBAAiB,EAErDA,EAAU,YAAYD,CAAK,EAE3B,IAAME,EAAc,IAAM,CAClBF,EAAM,YACNA,EAAM,OAAO,CAErB,GAEAD,EAAAC,EAAM,cAAc,cAAc,IAAlC,MAAAD,EAAqC,iBAAiB,QAASG,GAC/D,WAAWA,EAAa,GAAI,CAChC,EAEA,iBAAkB,CAACC,EAAW,KAAO,CACjC,IAAMC,GAAaD,GAAY,IAAI,KAAK,EAAE,MAAM,KAAK,EAAE,CAAC,GAAK,QAC7DR,EAAM,UAAU,uBAAuBS,CAAS,IAAK,SAAS,CAClE,EAEA,cAAe,IAAM,CACjB,aAAa,QAAQ,WAAY,KAAK,UAAUV,EAAS,MAAQ,CAAC,CAAC,CAAC,EACpE,aAAa,QAAQ,gBAAiB,KAAK,UAAUA,EAAS,WAAa,CAAC,CAAC,CAAC,EAC9E,aAAa,QAAQ,YAAaA,EAAS,OAAS,OAAO,EAC3D,aAAa,QAAQ,gBAAiB,KAAK,UAAUA,EAAS,WAAa,CAAC,CAAC,CAAC,EAC1EA,EAAS,cACT,aAAa,QAAQ,oBAAqBA,EAAS,aAAa,EAEhE,aAAa,WAAW,mBAAmB,CAEnD,CACJ,EAEMW,EAAQ,CACV,KAAOC,GAAY,CACf,IAAMC,EAAQ,SAAS,eAAeD,CAAO,EACzCC,IACAA,EAAM,UAAU,IAAI,QAAQ,EAC5BA,EAAM,OAAS,GAEvB,EACA,MAAQD,GAAY,CAChB,IAAMC,EAAQ,SAAS,eAAeD,CAAO,EACzCC,IACAA,EAAM,UAAU,OAAO,QAAQ,EAC/BA,EAAM,OAAS,GAEvB,CACJ,EAEMC,EAAa,IAAM,CACjBd,EAAS,QAAU,OACnB,SAAS,KAAK,UAAU,IAAI,YAAY,EAExC,SAAS,KAAK,UAAU,OAAO,YAAY,CAEnD,EAEA,SAAS,iBAAiB,mBAAoB,IAAM,CAChDc,EAAW,EAEX,IAAMC,EAAQC,EAAiB,CAAE,SAAAhB,EAAU,MAAAC,EAAO,MAAAU,CAAM,EAAG,CACvD,aAAc,GACd,mBAAoB,GACpB,iBAAkB,KAClB,oBAAqB,OACzB,CAAC,EACDI,EAAM,WAAW,EAEjB,GAAM,CAAE,QAAAE,EAAS,KAAAC,CAAK,EAAIH,EAEtBG,GAAA,MAAAA,EAAM,MACNA,EAAK,KAAK,EAGd,IAAMC,EAAS,MAAM,KAAK,SAAS,iBAAiB,mBAAmB,CAAC,EAClEC,EAAgB,MAAM,KAAK,SAAS,iBAAiB,eAAe,CAAC,EAErEC,EAAe,CAACC,EAAO,KAAO,CAChC,IAAMC,EAAUD,EAAK,KAAK,EAC1B,OAAKC,EACEA,EAAQ,MAAM,KAAK,EAAE,CAAC,EADR,EAEzB,EAEMC,EAAeC,GAAW,CAC5BN,EAAO,QAASO,GAAY,CAExB,IAAMC,EADQD,EAAQ,QAAQ,YACD,OAASD,EAAS,CAACA,EAChDC,EAAQ,UAAU,OAAO,eAAgB,CAACC,CAAU,EACpDD,EAAQ,aAAa,cAAeC,EAAa,QAAU,MAAM,CACrE,CAAC,CACL,EAEMC,EAAkB,CAAC,CAAE,OAAAH,EAAS,GAAO,aAAAI,EAAe,GAAO,UAAAC,EAAY,EAAM,EAAI,CAAC,IAAM,CAC1F,IAAMvB,EAAY,SAAS,eAAe,uBAAuB,EACjE,GAAI,CAACA,EACD,OAGJ,IAAMwB,EAAW,CAACC,EAAMC,IAAc,CAClC,IAAMC,EAAO3B,EAAU,cAAc,eAAeyB,CAAI,IAAI,EAC5D,GAAI,CAACE,EACD,OAEJA,EAAK,QAAQ,MAAQD,EAAY,WAAa,UAC9C,IAAME,EAASD,EAAK,cAAc,eAAe,EAC7CC,IACAA,EAAO,YAAcF,EAAY,eAAc,WAEvD,EAEAF,EAAS,QAASN,CAAM,EACxBM,EAAS,WAAYF,CAAY,EACjCE,EAAS,WAAYD,CAAS,EAC9BC,EAAS,UAAW,EAAK,CAC7B,EAEMK,EAAuB,CAACX,EAAS,KAAU,CAC7C,IAAMY,EAAU,SAAS,eAAe,oBAAoB,EACtDC,EAAW,SAAS,eAAe,qBAAqB,EACxDC,EAAS,SAAS,eAAe,mBAAmB,EACpDC,EAAc,SAAS,eAAe,wBAAwB,EAC9DC,EAAc,SAAS,eAAe,wBAAwB,EAC9DC,EAAW,SAAS,eAAe,iBAAiB,EAE1D,GAAI,CAACzB,EACD,OAGJ,IAAM0B,EAAY,MAAM,QAAQ3C,EAAS,SAAS,EAAI,CAAC,GAAGA,EAAS,SAAS,EAAI,CAAC,EAC3E4C,EAAM,KAAK,IAAI,EACfC,EAAQ,IAAO,GAAK,GAAK,GAEzBC,EAAWH,EAAU,IAAKI,GAAa9B,EAAQ,kBAC/CA,EAAQ,kBAAkB8B,CAAQ,EAClC,CAAE,UAAW,OAAQ,CAAC,EAEtBC,EAAkBL,EAAU,OAAO,CAACI,EAAUE,IAAO,CA9KnE,IAAA5C,EA8KsE,QAAAA,EAAAyC,EAASG,CAAK,IAAd,YAAA5C,EAAiB,aAAc,UAAS,EAahG6C,EAZsBP,EACvB,OAAQI,GAAaA,EAAS,SAAS,EACvC,IAAKA,GAAa,CACf,IAAMI,EAAY,IAAI,KAAKJ,EAAS,SAAS,EAC7C,MAAO,CACH,SAAAA,EACA,OAAQI,EAAU,QAAQ,EAAIP,CAClC,CACJ,CAAC,EACA,OAAO,CAAC,CAAE,OAAAQ,CAAO,IAAMA,EAAS,CAAC,EACjC,KAAK,CAACC,EAAGC,IAAMD,EAAE,OAASC,EAAE,MAAM,EAEI,CAAC,GAAK,KAC7CC,EAAY,KACZC,EAAY,6BAChB,GAAIN,EAAgB,CAChB,IAAMO,EAAO,KAAK,KAAKP,EAAe,OAASL,CAAK,EACpDU,EAAYE,GAAQ,EAAI,OAAS,GAAGA,CAAI,IACxCD,EAAYC,GAAQ,EACd,+BACA,iBAAiBA,CAAI,QAC/B,CAEIpB,IAASA,EAAQ,YAAcM,EAAU,OAAO,SAAS,GACzDL,IAAUA,EAAS,YAAcU,EAAgB,OAAO,SAAS,GACjET,IAAQA,EAAO,YAAcgB,GAC7Bf,IAAaA,EAAY,YAAcgB,GAE3C,IAAME,EAAiB,MAAM,QAAQ1D,EAAS,SAAS,EAAIA,EAAS,UAAU,OAAS,EACnFyC,IAAaA,EAAY,YAAciB,EAAe,SAAS,GAE/DhB,IACIC,EAAU,SAAW,EACrBD,EAAS,YAAcM,EAAgB,OAAS,gBAAmBvB,EAAS,mBAAqB,kBAC1FuB,EAAgB,OAAS,EAChCN,EAAS,YAAc,gBAEvBA,EAAS,YAAc,6BAI/Bd,EAAgB,CACZ,OAAAH,EACA,aAAckB,EAAU,OAAS,EACjC,UAAWK,EAAgB,OAAS,CACxC,CAAC,CACL,EAEMW,EAAsB,IAAM,CA/NtC,IAAAtD,EAgOQ,IAAMoB,GAASP,GAAA,YAAAA,EAAM,oBAAqB,CAAC,CAAClB,EAAS,YACrDwB,EAAY,CAAC,CAACC,CAAM,EAEpB,IAAMmC,EAAS,SAAS,eAAe,mBAAmB,EACpDC,EAAU,SAAS,eAAe,oBAAoB,EACtDC,EAAW,SAAS,eAAe,iBAAiB,EACpDC,EAAa,SAAS,eAAe,iBAAiB,EAE5D,GAAI,CAACtC,EAAQ,CACLmC,IAAQA,EAAO,YAAc,kBAC7BC,IAASA,EAAQ,YAAc,wDAC/BC,IACAA,EAAS,UAAU,OAAO,WAAW,EACrCA,EAAS,MAAM,gBAAkB,GACjCA,EAAS,YAAc,KAE3B1B,EAAqB,EAAK,EACtB2B,IACAA,EAAW,YAAc,mBAE7B,MACJ,CAEA,IAAMtD,IAAWJ,EAAAL,EAAS,cAAT,YAAAK,EAAsB,OAAQ,eACzCK,EAAYW,EAAaZ,CAAQ,GAAK,UACxCmD,IACAA,EAAO,YAAc,QAAQlD,CAAS,IAEtCmD,IACAA,EAAQ,YAAc,8BAA8B7D,EAAS,YAAY,KAAK,IAE9E8D,IAAY7C,GAAA,MAAAA,EAAS,uBACrBA,EAAQ,qBAAqB6C,EAAUrD,EAAUC,EAAU,OAAO,CAAC,EAAE,YAAY,CAAC,EAGtF0B,EAAqB,EAAI,CAC7B,EAEM4B,EAAqBC,GAAe,CACtC,GAAI,CAAChD,GAAW,OAAOA,EAAQgD,CAAU,GAAM,WAC3C,OAEJ,IAAMC,EAAWjD,EAAQgD,CAAU,EAAE,KAAKhD,CAAO,EACjDA,EAAQgD,CAAU,EAAI,IAAIE,IAAS,CAC/B,IAAMC,EAASF,EAAS,GAAGC,CAAI,EAC/B,OAAAR,EAAoB,EACbS,CACX,CACJ,EAEA,CAAC,WAAY,kBAAmB,UAAW,WAAY,oBAAoB,EAAE,QAAQJ,CAAiB,EACtGL,EAAoB,EAEpB,IAAMU,EAAsB,IAAM,CAC9B,IAAMC,EAAiB,SAAS,eAAe,kBAAkB,EAC5DA,IAGLrD,GAAA,MAAAA,EAAS,kBACTqD,EAAe,eAAe,CAAE,SAAU,SAAU,MAAO,OAAQ,CAAC,EACxE,EAEMC,EAAgBC,GAAW,CAC7B,GAAI,CAACA,EACD,OAEJ,IAAM/C,GAASP,GAAA,YAAAA,EAAM,oBAAqB,CAAC,CAAClB,EAAS,YACrD,OAAQwE,EAAQ,CACZ,IAAK,eACD,GAAI,CAAC/C,EAAQ,CACTP,GAAA,MAAAA,EAAM,KAAK,aACX,MACJ,CACAP,EAAM,KAAK,cAAc,EACzB,sBAAsB,IAAM,CA1S5C,IAAAN,EAAAoE,GA2SoBpE,EAAA,SAAS,eAAe,cAAc,IAAtC,MAAAA,EAAyC,eAAe,CAAE,SAAU,SAAU,MAAO,OAAQ,IAC7FoE,EAAA,SAAS,eAAe,aAAa,IAArC,MAAAA,EAAwC,OAC5C,CAAC,EACD,MACJ,IAAK,eACL,IAAK,eACD,GAAI,CAAChD,EAAQ,CACTP,GAAA,MAAAA,EAAM,KAAK,aACX,MACJ,CACAmD,EAAoB,EACpB,MACJ,IAAK,eACDpE,EAAM,mBAAmB,EACzB,MACJ,IAAK,aACDiB,GAAA,MAAAA,EAAM,KAAK,aACX,MACJ,IAAK,gBACDA,GAAA,MAAAA,EAAM,KAAK,gBACX,MACJ,IAAK,gBACD,GAAI,CAACO,EAAQ,CACTP,GAAA,MAAAA,EAAM,KAAK,aACX,MACJ,CACAP,EAAM,KAAK,cAAc,EACzB,sBAAsB,IAAM,CAtU5C,IAAAN,EAAAoE,GAuUoBpE,EAAA,SAAS,eAAe,cAAc,IAAtC,MAAAA,EAAyC,eAAe,CAAE,SAAU,SAAU,MAAO,OAAQ,IAC7FoE,EAAA,SAAS,eAAe,sBAAsB,IAA9C,MAAAA,EAAiD,OACrD,CAAC,EACD,MACJ,IAAK,WACD,OAAO,KAAK,qBAAsB,QAAQ,EAC1C,MACJ,IAAK,mBACDxE,EAAM,UAAU,oDAAqD,MAAM,EAC3E,MACJ,QACI,KACR,CACJ,EAEAmB,EAAc,QAASsD,GAAW,CAC9BA,EAAO,iBAAiB,QAAUC,GAAU,CACxCA,EAAM,eAAe,EACrBJ,EAAaG,EAAO,QAAQ,MAAM,CACtC,CAAC,CACL,CAAC,EAED,IAAME,EAAuB,SAAS,eAAe,mBAAmB,EACpEA,GACAA,EAAqB,iBAAiB,QAAS,IAAM,CACjDjE,EAAM,MAAM,cAAc,CAC9B,CAAC,EAGL,IAAMkE,EAAc,SAAS,cAAc,gBAAgB,EACvDA,GACAA,EAAY,iBAAiB,QAAS,IAAM,CACxC,OAAO,SAAS,KAAO,gBAC3B,CAAC,EAGL,OAAO,iBAAiB,UAAYF,GAAU,CAC1C,GAAIA,EAAM,MAAQ,YACd3E,EAAS,MAAQ2E,EAAM,UAAY,QACnC7D,EAAW,UACJ6D,EAAM,MAAQ,gBAAiB,CACtC,GAAI,CACA3E,EAAS,UAAY,KAAK,MAAM2E,EAAM,UAAY,IAAI,CAC1D,OAAQG,EAAA,CACJ9E,EAAS,UAAY,CAAC,CAC1B,CACA2D,EAAoB,CACxB,SAAWgB,EAAM,MAAQ,gBAAiB,CACtC,GAAI,CACA3E,EAAS,UAAY,KAAK,MAAM2E,EAAM,UAAY,IAAI,CAC1D,OAAQG,EAAA,CACJ9E,EAAS,UAAY,CAAC,CAC1B,CACA2D,EAAoB,CACxB,MAAWgB,EAAM,MAAQ,sBACrB3E,EAAS,cAAgB2E,EAAM,UAAY,KAC3ChB,EAAoB,EAE5B,CAAC,CACL,CAAC",
  "names": ["initAccountSuite", "AppState", "Utils", "Modal", "options", "settings", "openProfilePortal", "newWindow", "ChatWidget", "event", "type", "text", "wrapper", "content", "message", "Profile", "Auth", "file", "name", "email", "password", "previousEmail", "user", "userIndex", "loginEmailInput", "isLogged", "canReset", "maxSize", "reader", "element", "fallback", "hasPhoto", "initial", "showToast", "purchases", "purchase", "status", "purchaseDate", "expiresDate", "item", "detailsWrapper", "title", "meta", "icon", "span", "iconEl", "statusEl", "statusIcon", "statusText", "expires", "now", "diffMs", "overdueDays", "remainingDays", "isoDate", "error", "value", "trimmed", "parts", "Onboarding", "card", "target", "button", "node", "reopenBtn", "force", "firstName", "saveState", "selector", "tab", "link", "targetId", "desiredTarget", "activeTab", "offsetLeft", "offsetWidth", "input", "isPassword", "loginForm", "registerForm", "nickname", "u", "newUser", "loginPasswordInput", "form", "isActive", "closeBtn", "initialized", "initialize", "AppState", "Utils", "price", "message", "type", "_a", "toast", "container", "removeToast", "fullName", "firstName", "Modal", "modalId", "modal", "applyTheme", "suite", "initAccountSuite", "Profile", "Auth", "guards", "actionButtons", "getFirstName", "name", "trimmed", "applyGuards", "logged", "element", "shouldShow", "updateChecklist", "hasPurchases", "hasActive", "setState", "step", "completed", "item", "status", "updateDashboardStats", "totalEl", "activeEl", "nextEl", "nextLabelEl", "favoritesEl", "statusEl", "purchases", "now", "dayMs", "statuses", "purchase", "activePurchases", "index", "nextExpiration", "expiresAt", "diffMs", "a", "b", "nextValue", "nextLabel", "days", "favoritesCount", "applyDashboardState", "nameEl", "emailEl", "avatarEl", "statusChip", "wrapProfileMethod", "methodName", "original", "args", "result", "focusHistorySection", "historySection", "handleAction", "action", "_b", "button", "event", "closeProfileModalBtn", "logoTrigger", "e"]
}
